{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:////Users/pikachu/ws/aliceart/node_modules/css-element-queries/src/ResizeSensor.js","webpack:////Users/pikachu/ws/aliceart/node_modules/holderjs/holder.js","webpack:///./scss/admin.scss?2da1","webpack:///./scss/site.scss?32b0","webpack:////Users/pikachu/ws/aliceart/node_modules/style-loader/lib/addStyles.js","webpack:////Users/pikachu/ws/aliceart/node_modules/style-loader/lib/urls.js","webpack:////Users/pikachu/ws/aliceart/node_modules/validate.js/validate.js","webpack:///(webpack)/buildin/amd-define.js","webpack:///(webpack)/buildin/global.js","webpack:///(webpack)/buildin/module.js","webpack:////Users/pikachu/ws/aliceart/web/ui/ace-utils.js","webpack:////Users/pikachu/ws/aliceart/web/ui/base-editor.js","webpack:////Users/pikachu/ws/aliceart/web/ui/ck-utils.js","webpack:////Users/pikachu/ws/aliceart/web/ui/fit-window.js","webpack:////Users/pikachu/ws/aliceart/web/ui/form-comp.js","webpack:////Users/pikachu/ws/aliceart/web/ui/forms.js","webpack:////Users/pikachu/ws/aliceart/web/ui/index.js","webpack:////Users/pikachu/ws/aliceart/web/ui/ko-utils.js","webpack:////Users/pikachu/ws/aliceart/web/ui/komp.js","webpack:////Users/pikachu/ws/aliceart/web/ui/states.js","webpack:////Users/pikachu/ws/aliceart/web/ui/tag-utils.js","webpack:///./client.js","webpack:///./scss/admin.scss?8e5c","webpack:///./scss/site.scss?cf33","webpack:///external \"jQuery\"","webpack:///external \"ko\"","webpack:///external \"minstatic\""],"names":["$","require","minstatic","url","exports","loadEditor","ui","assetLoader","loadAssets","then","ace","config","set","initEditor","divId","done","newEditor","editor","edit","setOptions","maxLines","minLines","fontSize","readOnly","showLineNumbers","showGutter","$blockScrolling","Infinity","ss","getSession","mode","setMode","softTab","setUseSoftTabs","setTabSize","setTheme","ko","Komp","BaseEditor","subclass","init","params","elem","call","profile","addTagsObservable","name","tags","me","observable","join","computed","s","trim","split","applyTagsinput","sel","opts","$el","find","tagsinput","module","userConfig","customConfig","scayt_autoStartup","tartupFocus","toolbarGroups","groups","removeButtons","format_tags","removeDialogTabs","extraAllowedContent","extraPlugins","removePlugins","adminConfig","Object","assign","allowedContent","loadCkEditor","addExternal","CKE","path","plugins","err","console","error","applyCkEditor","html","ckeditorSetter","dtd","$removeEmpty","span","ckeditor","jquery","value","cfg","isAdmin","ckConfig","replace","host","fieldName","ResizeSensor","fitWindow","style","width","height","trimHeight","undefined","container","offsetHeight","pullLeft","document","body","trans2d","resize","layout","w","offsetWidth","h","ratio","curW","curH","newH","maxHeight","newRatio","scale","outerH","Math","floor","diff","outer","v","marginLeft","left","top","bottom","right","transform","assert","forms","FormComp","Comp","_init0","form","first","_applyFormBindings","constraints","ckEditors","tagFields","nodeName","editorPairs","applyFormBindings","_applyBindings","submitForm","handleForm","validateForm","postForm","showErrors","errors","validate","each","errorMap","ckUtils","tagUtils","method","postUrl","successUrl","traverseForm","val","field","addEventListener","ev","showErrorsForInput","ta","on","setReadOnly","updateElement","push","preventDefault","res","fetch","JSON","stringify","formJson","headers","text","ret","parse","visit","input","fg","closest","classList","remove","resetFormGroup","errs","elements","add","addError","formGroup","div","contains","el","parentNode","removeChild","block","createElement","innerText","appendChild","global","canValidateJSON","validation","rules","validator","opt","orString","ex","message","registerExtenders","canValidateArrayLength","nameMin","minLength","Array","isArray","length","nameMax","maxLength","klass","Emitter","cntx","contextFor","c","$component","$root","hideClass","cntxEmit","emit","apply","arguments","finder","$finder","showCardBefore","comp","target","id","showCard","showCardAfter","noHide","after","$target","isJQuery","addClass","hide","cards","_cards","cardId","toString","card","$comp","show","data","type","hiding","applyBindings","insertAfter","insertBefore","appendCard","appendTo","hideCard","removeClass","resetCards","clearCard","cancel","tagName","TagName","mixin","features","Mixin","register","komp","components","isRegistered","viewModelFactory","Cls","createViewModel","compInfo","instance","element","vm","evt","closestData","attr","identity","x","nls","setNls","replaceWithTurbolinks","Turbolinks","match","innerHTML","dispatch","arr","getElementsByTagName","i","eval","setErrors","alerts","key","property","clientPath","ob","setError","isModified","alert","json","status","statusText","postPjax","q","hdl","fail","validateExtendOptions","exts","keys","forEach","create","extend","nm","toLowerCase","_curUrl","_handlers","curUrl","window","location","pathname","updateUrl","oldUrl","n","pat","pattern","leave","onLeave","mat","cb","states","onEnter","offEnter","filter","xbarc","modules","connect"],"mappings":";QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;;AClFA,kEAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,IAA0C;AAClD,QAAQ,oCAAO,OAAO;AAAA;AAAA;AAAA;AAAA,oGAAC;AACvB,KAAK,MAAM,EAIN;AACL,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,0BAA0B;AACzC,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,OAAO;AACzB;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA,cAAc,YAAY;AAC1B,gBAAgB,OAAO,EAAE;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,YAAY;AAC3B,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA,eAAe,kCAAkC;AACjD,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,yCAAyC,OAAO;AAChD;AACA;AACA;;AAEA;AACA;AACA,wCAAwC,OAAO;AAC/C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,mBAAmB,YAAY;AAC/B,mBAAmB,SAAS;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,mCAAmC,gCAAgC;AACnE;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,6BAA6B;AAC7B;;AAEA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,SAAS;;AAET;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA,mCAAmC,kBAAkB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;;AAEA;;AAEA,CAAC;;;;;;;;;;;;AC1VD;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,iDAAiD,4DAA4D;AAC7G;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,4BAA4B,qDAAqD;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,6CAA6C,mBAAmB;;AAEhE;AACA;AACA,sCAAsC,mBAAmB;;AAEzD;AACA,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,qCAAqC,kCAAkC;AACvE,qCAAqC,sCAAsC;AAC3E,yCAAyC,sCAAsC;;AAE/E;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,uCAAuC,sCAAsC;;AAE7E;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;;;AAGA;;AAEA;AACA;AACA;;AAEA,yCAAyC;AACzC;AACA,KAAK;;AAEL;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA,KAAK;AACL,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA,KAAK;AACL,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA,CAAC;;AAED;AACA,IAAI,IAAyD;AAC7D;AACA,MAAM,EAKuB;AAC7B,CAAC;AACD,oCAAoC;AACpC;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;;AAGA,OAAO;AACP;AACA;;AAEA,+CAA+C;AAC/C;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB,OAAO;AACvB,gBAAgB,OAAO;AACvB;AACA;AACA;AACA;AACA;AACA,MAAM;;AAEN;AACA;AACA;AACA,gBAAgB,OAAO;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,MAAM;;AAEN;AACA;AACA;AACA;AACA,gBAAgB,OAAO;AACvB,gBAAgB,QAAQ;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;;AAEN;AACA;AACA;AACA,gBAAgB,OAAO;AACvB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;;AAEV;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,cAAc;AACd;AACA,cAAc;AACd;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA,UAAU;;AAEV;AACA;;AAEA;AACA;AACA;AACA,cAAc;;AAEd;AACA;;AAEA;AACA;AACA,cAAc;AACd;AACA;AACA,UAAU;;AAEV;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAc;;AAEd;AACA;AACA;;AAEA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B,0BAA0B;AAC1B;AACA;AACA,cAAc;AACd;AACA;AACA,UAAU;;AAEV;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,4BAA4B,sBAAsB;AAClD;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAU;AACV;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAU;AACV;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,MAAM;AACN;;AAEA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,cAAc;AACd,UAAU;AACV;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB,kBAAkB;AAClB;AACA;AACA;AACA,sBAAsB;AACtB;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM;;AAEN;;AAEA;AACA;AACA,MAAM;;AAEN;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAU;;AAEV;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAM;;AAEN;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,wBAAwB,yBAAyB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;;AAEA;AACA,UAAU;AACV;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,uCAAuC,OAAO;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;;AAEA;AACA,UAAU;AACV;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;;AAEN;AACA;AACA;AACA,UAAU;AACV;;AAEA;AACA;AACA;AACA,MAAM;AACN;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB,cAAc;;AAEd;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gCAAgC,kBAAkB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,EAAE;;AAEF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;;AAEA;AACA;AACA;AACA,cAAc;AACd;AACA,MAAM;AACN;;AAEA;;AAEA,6BAA6B,4BAA4B,aAAa,EAAE;;AAExE,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAM;AACN;AACA;;AAEA;AACA;;AAEA;AACA,MAAM;AACN;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAU;;AAEV;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,cAAc;AACd;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA,OAAO;AACP;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,YAAY,OAAO;AACnB,aAAa;AACb;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,kBAAkB,kBAAkB;AACpC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,UAAU;AACV;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,YAAY,OAAO;AACnB,aAAa;AACb;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,sBAAsB,kBAAkB;AACxC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;;AAGA,OAAO;AACP;AACA;;;AAGA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA,OAAO;AACP;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,YAAY,MAAM;AAClB,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,OAAO;AACP;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;AAGA,OAAO;AACP;AACA;;AAEA,+CAA+C;AAC/C;AACA;AACA;AACA;AACA,cAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,QAAQ;AACzC;AACA;AACA,4CAA4C;AAC5C,UAAU;AACV;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA,MAAM;AACN;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAM;AACN;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mCAAmC,EAAE,oBAAoB,EAAE;AAC3D,4BAA4B,IAAI,YAAY,IAAI,YAAY,IAAI;AAChE,8BAA8B,IAAI,YAAY,IAAI,YAAY,IAAI,eAAe,GAAG;;AAEpF;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,6BAA6B,4BAA4B,aAAa,EAAE;;AAExE,OAAO;AACP;AACA;;AAEA,+CAA+C;;AAE/C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,oBAAoB,2BAA2B;AAC/C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAM;;AAEN;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC,4CAA4C,cAAc;;AAE1D;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,sCAAsC,SAAS,GAAG,EAAE;AACpD;AACA;;AAEA,6BAA6B,4BAA4B,aAAa,EAAE;;AAExE,OAAO;AACP;AACA;;AAEA,+CAA+C;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA;;AAEA;;AAEA;AACA;;AAEA,6BAA6B,4BAA4B,aAAa,EAAE;;AAExE,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,MAAM;AACN;AACA;AACA,MAAM;AACN;AACA;AACA,MAAM;AACN;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAM;AACN;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;;AAGA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;;AAEA,OAAO;AACP;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;;AAEA;AACA;;AAEA,sCAAsC,wCAAwC;;AAE9E;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;;AAER;AACA,MAAM;AACN,IAAI;;AAEJ;AACA;AACA;AACA,IAAI;;AAEJ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;;AAEA,cAAc;AACd,yCAAyC;AACzC;;AAEA;;AAEA;AACA;AACA;;AAEA,OAAO;AACP;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;;AAGA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,0BAA0B;AAC1B,2BAA2B;AAC3B;AACA;;AAEA;AACA;AACA,yBAAyB;AACzB,0BAA0B;AAC1B,0BAA0B;AAC1B,wBAAwB;AACxB,wBAAwB;AACxB;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA,QAAQ,kBAAkB;;AAE1B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,MAAM;;AAEN;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,IAAI;;AAEJ;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa;AACb;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,4BAA4B,oBAAoB;AAChD;AACA;AACA,yBAAyB;AACzB;AACA;AACA,wBAAwB;AACxB;AACA;AACA,wBAAwB;AACxB;AACA;AACA,uBAAuB;AACvB;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA,OAAO;AACP;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,EAAE;;AAEF,OAAO;AACP;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;AC7/FD,uC;;;;;;;;;;;ACAA,uC;;;;;;;;;;;ACAA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;;AAEA,cAAc,mBAAO,CAAC,2DAAQ;;AAE9B;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA,iBAAiB,mBAAmB;AACpC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,iBAAiB,sBAAsB;AACvC;;AAEA;AACA,mBAAmB,2BAA2B;;AAE9C;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB,mBAAmB;AACnC;AACA;;AAEA;AACA;;AAEA,iBAAiB,2BAA2B;AAC5C;AACA;;AAEA,QAAQ,uBAAuB;AAC/B;AACA;AACA,GAAG;AACH;;AAEA,iBAAiB,uBAAuB;AACxC;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA;;AAEA,gBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA;AACA,cAAc;;AAEd,kDAAkD,sBAAsB;AACxE;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA,KAAK,KAAwC,EAAE,EAE7C;;AAEF,QAAQ,sBAAiB;AACzB;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;;AAEA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uDAAuD;AACvD;;AAEA,6BAA6B,mBAAmB;;AAEhD;;AAEA;;AAEA;AACA;;;;;;;;;;;;;AC9YA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,WAAW,EAAE;AACrD,wCAAwC,WAAW,EAAE;;AAErD;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,sCAAsC;AACtC,GAAG;AACH;AACA,8DAA8D;AAC9D;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;AACA;;;;;;;;;;;;ACxFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;;AAEzB;AACA;AACA;;AAEA,kCAAkC,6BAA6B,EAAE;AACjE;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,MAAM,GAAG,MAAM,GAAG,MAAM;AAC1D;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,aAAa,4DAA4D;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,kDAAkD,KAAK,IAAI,oBAAoB;AAC/E;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,OAAO;AACP,mDAAmD,OAAO;AAC1D;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,2BAA2B;;AAE3B;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT,OAAO;AACP,KAAK;;AAEL;AACA,2BAA2B;AAC3B;AACA;AACA,OAAO;AACP,gBAAgB,cAAc,GAAG,oBAAoB;AACrD,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT,OAAO,6BAA6B,KAAK,EAAE,GAAG;AAC9C,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA,sBAAsB,IAAI,IAAI,WAAW;AACzC;AACA,8BAA8B,IAAI;AAClC,2CAA2C,IAAI;AAC/C,mBAAmB,IAAI;AACvB;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,WAAW;AAC/B,SAAS;AACT;AACA;AACA,OAAO;AACP,KAAK;AACL,iBAAiB,IAAI;AACrB,6BAA6B,KAAK,KAAK;AACvC,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA,oCAAoC,sBAAsB,EAAE;AAC5D;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA,eAAe;AACf,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,iBAAiB,oBAAoB;AACrC;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,iBAAiB,mBAAmB;AACpC;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iBAAiB,mBAAmB;AACpC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;AACA,SAAS,6BAA6B;AACtC;AACA,SAAS,mBAAmB,GAAG,mBAAmB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,UAAU,WAAW;AACrD,WAAW;AACX,SAAS;AACT;AACA;AACA,OAAO;AACP;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,4BAA4B,cAAc,aAAa;AACvD,OAAO;AACP;AACA,KAAK;;AAEL;AACA,SAAS,kCAAkC;AAC3C;AACA,QAAQ,qBAAqB,kCAAkC;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP;AACA,KAAK;;AAEL;AACA,SAAS,0BAA0B,GAAG,0BAA0B;AAChE;AACA;AACA;AACA;AACA,8BAA8B,oBAAoB,EAAE;AACpD;AACA;AACA,SAAS;AACT,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,2CAA2C;AAC3C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,6BAA6B;AAC7B;AACA;;AAEA;AACA;;AAEA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,kCAAkC,iBAAiB,EAAE;AACrD;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA,2BAA2B;;AAE3B;AACA;AACA;AACA,0DAA0D,YAAY;AACtE;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,4CAA4C,MAAM;AAClD,mCAAmC,UAAU;AAC7C;;AAEA;AACA;AACA;AACA,sCAAsC,MAAM;AAC5C,mCAAmC,eAAe;AAClD;;AAEA;AACA;AACA;AACA,qCAAqC,MAAM;AAC3C,mCAAmC,eAAe;AAClD;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA,2BAA2B;;AAE3B;AACA;AACA;AACA;AACA,kDAAkD,cAAc,EAAE;AAClE,kDAAkD,eAAe,EAAE;AACnE,kDAAkD,gBAAgB,EAAE;AACpE,kDAAkD,cAAc,EAAE;AAClE,kDAAkD,eAAe,EAAE;AACnE,kDAAkD,oBAAoB;AACtE;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,KAAK,GAAG,MAAM;;AAErC;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,2BAA2B;;AAE3B;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,oBAAoB;AAClD;;AAEA;AACA;AACA;AACA;AACA,qCAAqC,KAAK;AAC1C;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA,mCAAmC,KAAK;AACxC;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA,2BAA2B,YAAY,eAAe;AACtD;AACA,KAAK;AACL;AACA;AACA,mBAAmB;AACnB;;AAEA,2BAA2B;;AAE3B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA,YAAY,MAAM;AAClB,gCAAgC,aAAa;AAC7C,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA,2BAA2B;AAC3B;AACA;AACA;AACA,2DAA2D,MAAM;AACjE;AACA;AACA;AACA,gCAAgC,aAAa;AAC7C,KAAK;AACL;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,0CAA0C,EAAE,+BAA+B,EAAE,2NAA2N,EAAE;AAC1S,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA,mBAAmB;AACnB;AACA,2BAA2B;AAC3B;AACA;AACA,2BAA2B,UAAU;;AAErC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,kCAAkC,uCAAuC;AACzE;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA,2BAA2B;;AAE3B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,+CAA+C,GAAG;;AAElD;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,kCAAkC,IAAI,EAAE,EAAE;AAC1C,+CAA+C,IAAI,EAAE,EAAE;AACvD,oDAAoD,IAAI,EAAE,EAAE;AAC5D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,IAAI,qBAAqB,EAAE;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,IAAI;AACrB;AACA;AACA;;AAEA;AACA;AACA,6CAA6C;AAC7C,6CAA6C;AAC7C,kDAAkD;AAClD;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,2BAA2B;AAC3B;;AAEA;AACA;AACA;;AAEA,+BAA+B;;AAE/B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mFAAmF,KAAK;;AAExF;AACA;AACA;;AAEA,kCAAkC,6CAA6C;AAC/E;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,KAAK;AACL;;AAEA;AACA,gCAAgC,eAAe;AAC/C;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA,yDAAyD,kGAAM;AAC/D,CAAC;AACD,QAAQ,KAA8B,wCAAwC,SAAI;AAClF,QAAQ,KAA6B,uCAAuC,SAAI;AAChF,QAAQ,kGAAwE;;;;;;;;;;;;;ACpuChF;AACA;AACA;;;;;;;;;;;;ACFA;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;;AAEA;AACA;AACA,4CAA4C;;AAE5C;;;;;;;;;;;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;;;;;;;;;;;;ACrBa;AAC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","file":"site.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","'use strict';\n\n/**\n * Copyright Marc J. Schmidt. See the LICENSE file at the top-level\n * directory of this distribution and at\n * https://github.com/marcj/css-element-queries/blob/master/LICENSE.\n */\n(function (root, factory) {\n    if (typeof define === \"function\" && define.amd) {\n        define(factory);\n    } else if (typeof exports === \"object\") {\n        module.exports = factory();\n    } else {\n        root.ResizeSensor = factory();\n    }\n}(typeof window !== 'undefined' ? window : this, function () {\n\n    // Make sure it does not throw in a SSR (Server Side Rendering) situation\n    if (typeof window === \"undefined\") {\n        return null;\n    }\n    // https://github.com/Semantic-Org/Semantic-UI/issues/3855\n    // https://github.com/marcj/css-element-queries/issues/257\n    var globalWindow = typeof window != 'undefined' && window.Math == Math\n        ? window\n        : typeof self != 'undefined' && self.Math == Math\n            ? self\n            : Function('return this')();\n    // Only used for the dirty checking, so the event callback count is limited to max 1 call per fps per sensor.\n    // In combination with the event based resize sensor this saves cpu time, because the sensor is too fast and\n    // would generate too many unnecessary events.\n    var requestAnimationFrame = globalWindow.requestAnimationFrame ||\n        globalWindow.mozRequestAnimationFrame ||\n        globalWindow.webkitRequestAnimationFrame ||\n        function (fn) {\n            return globalWindow.setTimeout(fn, 20);\n        };\n\n    /**\n     * Iterate over each of the provided element(s).\n     *\n     * @param {HTMLElement|HTMLElement[]} elements\n     * @param {Function}                  callback\n     */\n    function forEachElement(elements, callback){\n        var elementsType = Object.prototype.toString.call(elements);\n        var isCollectionTyped = ('[object Array]' === elementsType\n            || ('[object NodeList]' === elementsType)\n            || ('[object HTMLCollection]' === elementsType)\n            || ('[object Object]' === elementsType)\n            || ('undefined' !== typeof jQuery && elements instanceof jQuery) //jquery\n            || ('undefined' !== typeof Elements && elements instanceof Elements) //mootools\n        );\n        var i = 0, j = elements.length;\n        if (isCollectionTyped) {\n            for (; i < j; i++) {\n                callback(elements[i]);\n            }\n        } else {\n            callback(elements);\n        }\n    }\n\n    /**\n    * Get element size\n    * @param {HTMLElement} element\n    * @returns {Object} {width, height}\n    */\n    function getElementSize(element) {\n        if (!element.getBoundingClientRect) {\n            return {\n                width: element.offsetWidth,\n                height: element.offsetHeight\n            }\n        }\n\n        var rect = element.getBoundingClientRect();\n        return {\n            width: Math.round(rect.width),\n            height: Math.round(rect.height)\n        }\n    }\n\n    /**\n     * Apply CSS styles to element.\n     *\n     * @param {HTMLElement} element\n     * @param {Object} style\n     */\n    function setStyle(element, style) {\n        Object.keys(style).forEach(function(key) {\n            element.style[key] = style[key];\n        });\n    }\n\n    /**\n     * Class for dimension change detection.\n     *\n     * @param {Element|Element[]|Elements|jQuery} element\n     * @param {Function} callback\n     *\n     * @constructor\n     */\n    var ResizeSensor = function(element, callback) {\n        /**\n         *\n         * @constructor\n         */\n        function EventQueue() {\n            var q = [];\n            this.add = function(ev) {\n                q.push(ev);\n            };\n\n            var i, j;\n            this.call = function(sizeInfo) {\n                for (i = 0, j = q.length; i < j; i++) {\n                    q[i].call(this, sizeInfo);\n                }\n            };\n\n            this.remove = function(ev) {\n                var newQueue = [];\n                for(i = 0, j = q.length; i < j; i++) {\n                    if(q[i] !== ev) newQueue.push(q[i]);\n                }\n                q = newQueue;\n            };\n\n            this.length = function() {\n                return q.length;\n            }\n        }\n\n        /**\n         *\n         * @param {HTMLElement} element\n         * @param {Function}    resized\n         */\n        function attachResizeEvent(element, resized) {\n            if (!element) return;\n            if (element.resizedAttached) {\n                element.resizedAttached.add(resized);\n                return;\n            }\n\n            element.resizedAttached = new EventQueue();\n            element.resizedAttached.add(resized);\n\n            element.resizeSensor = document.createElement('div');\n            element.resizeSensor.dir = 'ltr';\n            element.resizeSensor.className = 'resize-sensor';\n\n            var style = {\n                pointerEvents: 'none',\n                position: 'absolute',\n                left: '0px',\n                top: '0px',\n                right: '0px',\n                bottom: '0px',\n                overflow: 'hidden',\n                zIndex: '-1',\n                visibility: 'hidden',\n                maxWidth: '100%'\n            };\n            var styleChild = {\n                position: 'absolute',\n                left: '0px',\n                top: '0px',\n                transition: '0s',\n            };\n\n            setStyle(element.resizeSensor, style);\n\n            var expand = document.createElement('div');\n            expand.className = 'resize-sensor-expand';\n            setStyle(expand, style);\n\n            var expandChild = document.createElement('div');\n            setStyle(expandChild, styleChild);\n            expand.appendChild(expandChild);\n\n            var shrink = document.createElement('div');\n            shrink.className = 'resize-sensor-shrink';\n            setStyle(shrink, style);\n\n            var shrinkChild = document.createElement('div');\n            setStyle(shrinkChild, styleChild);\n            setStyle(shrinkChild, { width: '200%', height: '200%' });\n            shrink.appendChild(shrinkChild);\n\n            element.resizeSensor.appendChild(expand);\n            element.resizeSensor.appendChild(shrink);\n            element.appendChild(element.resizeSensor);\n\n            var computedStyle = window.getComputedStyle(element);\n            var position = computedStyle ? computedStyle.getPropertyValue('position') : null;\n            if ('absolute' !== position && 'relative' !== position && 'fixed' !== position) {\n                element.style.position = 'relative';\n            }\n\n            var dirty, rafId;\n            var size = getElementSize(element);\n            var lastWidth = 0;\n            var lastHeight = 0;\n            var initialHiddenCheck = true;\n            var lastAnimationFrame = 0;\n\n            var resetExpandShrink = function () {\n                var width = element.offsetWidth;\n                var height = element.offsetHeight;\n\n                expandChild.style.width = (width + 10) + 'px';\n                expandChild.style.height = (height + 10) + 'px';\n\n                expand.scrollLeft = width + 10;\n                expand.scrollTop = height + 10;\n\n                shrink.scrollLeft = width + 10;\n                shrink.scrollTop = height + 10;\n            };\n\n            var reset = function() {\n                // Check if element is hidden\n                if (initialHiddenCheck) {\n                    var invisible = element.offsetWidth === 0 && element.offsetHeight === 0;\n                    if (invisible) {\n                        // Check in next frame\n                        if (!lastAnimationFrame){\n                            lastAnimationFrame = requestAnimationFrame(function(){\n                                lastAnimationFrame = 0;\n\n                                reset();\n                            });\n                        }\n\n                        return;\n                    } else {\n                        // Stop checking\n                        initialHiddenCheck = false;\n                    }\n                }\n\n                resetExpandShrink();\n            };\n            element.resizeSensor.resetSensor = reset;\n\n            var onResized = function() {\n                rafId = 0;\n\n                if (!dirty) return;\n\n                lastWidth = size.width;\n                lastHeight = size.height;\n\n                if (element.resizedAttached) {\n                    element.resizedAttached.call(size);\n                }\n            };\n\n            var onScroll = function() {\n                size = getElementSize(element);\n                dirty = size.width !== lastWidth || size.height !== lastHeight;\n\n                if (dirty && !rafId) {\n                    rafId = requestAnimationFrame(onResized);\n                }\n\n                reset();\n            };\n\n            var addEvent = function(el, name, cb) {\n                if (el.attachEvent) {\n                    el.attachEvent('on' + name, cb);\n                } else {\n                    el.addEventListener(name, cb);\n                }\n            };\n\n            addEvent(expand, 'scroll', onScroll);\n            addEvent(shrink, 'scroll', onScroll);\n\n            // Fix for custom Elements\n            requestAnimationFrame(reset);\n        }\n\n        forEachElement(element, function(elem){\n            attachResizeEvent(elem, callback);\n        });\n\n        this.detach = function(ev) {\n            ResizeSensor.detach(element, ev);\n        };\n\n        this.reset = function() {\n            element.resizeSensor.resetSensor();\n        };\n    };\n\n    ResizeSensor.reset = function(element) {\n        forEachElement(element, function(elem){\n            elem.resizeSensor.resetSensor();\n        });\n    };\n\n    ResizeSensor.detach = function(element, ev) {\n        forEachElement(element, function(elem){\n            if (!elem) return;\n            if(elem.resizedAttached && typeof ev === \"function\"){\n                elem.resizedAttached.remove(ev);\n                if(elem.resizedAttached.length()) return;\n            }\n            if (elem.resizeSensor) {\n                if (elem.contains(elem.resizeSensor)) {\n                    elem.removeChild(elem.resizeSensor);\n                }\n                delete elem.resizeSensor;\n                delete elem.resizedAttached;\n            }\n        });\n    };\n\n    if (typeof MutationObserver !== \"undefined\") {\n        var observer = new MutationObserver(function (mutations) {\n            for (var i in mutations) {\n                if (mutations.hasOwnProperty(i)) {\n                    var items = mutations[i].addedNodes;\n                    for (var j = 0; j < items.length; j++) {\n                        if (items[j].resizeSensor) {\n                            ResizeSensor.reset(items[j]);\n                        }\n                    }\n                }\n            }\n        });\n\n        document.addEventListener(\"DOMContentLoaded\", function (event) {\n            observer.observe(document.body, {\n                childList: true,\n                subtree: true,\n            });\n        });\n    }\n\n    return ResizeSensor;\n\n}));\n","/*!\n\nHolder - client side image placeholders\nVersion 2.9.6+fblyy\n 2018 Ivan Malopinsky - http://imsky.co\n\nSite:     http://holderjs.com\nIssues:   https://github.com/imsky/holder/issues\nLicense:  MIT\n\n*/\n(function (window) {\n  if (!window.document) return;\n  var document = window.document;\n\n  //https://github.com/inexorabletash/polyfill/blob/master/web.js\n    if (!document.querySelectorAll) {\n      document.querySelectorAll = function (selectors) {\n        var style = document.createElement('style'), elements = [], element;\n        document.documentElement.firstChild.appendChild(style);\n        document._qsa = [];\n\n        style.styleSheet.cssText = selectors + '{x-qsa:expression(document._qsa && document._qsa.push(this))}';\n        window.scrollBy(0, 0);\n        style.parentNode.removeChild(style);\n\n        while (document._qsa.length) {\n          element = document._qsa.shift();\n          element.style.removeAttribute('x-qsa');\n          elements.push(element);\n        }\n        document._qsa = null;\n        return elements;\n      };\n    }\n\n    if (!document.querySelector) {\n      document.querySelector = function (selectors) {\n        var elements = document.querySelectorAll(selectors);\n        return (elements.length) ? elements[0] : null;\n      };\n    }\n\n    if (!document.getElementsByClassName) {\n      document.getElementsByClassName = function (classNames) {\n        classNames = String(classNames).replace(/^|\\s+/g, '.');\n        return document.querySelectorAll(classNames);\n      };\n    }\n\n  //https://github.com/inexorabletash/polyfill\n  // ES5 15.2.3.14 Object.keys ( O )\n  // https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/keys\n  if (!Object.keys) {\n    Object.keys = function (o) {\n      if (o !== Object(o)) { throw TypeError('Object.keys called on non-object'); }\n      var ret = [], p;\n      for (p in o) {\n        if (Object.prototype.hasOwnProperty.call(o, p)) {\n          ret.push(p);\n        }\n      }\n      return ret;\n    };\n  }\n\n  // ES5 15.4.4.18 Array.prototype.forEach ( callbackfn [ , thisArg ] )\n  // From https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/forEach\n  if (!Array.prototype.forEach) {\n    Array.prototype.forEach = function (fun /*, thisp */) {\n      if (this === void 0 || this === null) { throw TypeError(); }\n\n      var t = Object(this);\n      var len = t.length >>> 0;\n      if (typeof fun !== \"function\") { throw TypeError(); }\n\n      var thisp = arguments[1], i;\n      for (i = 0; i < len; i++) {\n        if (i in t) {\n          fun.call(thisp, t[i], i, t);\n        }\n      }\n    };\n  }\n\n  //https://github.com/inexorabletash/polyfill/blob/master/web.js\n  (function (global) {\n    var B64_ALPHABET = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n    global.atob = global.atob || function (input) {\n      input = String(input);\n      var position = 0,\n          output = [],\n          buffer = 0, bits = 0, n;\n\n      input = input.replace(/\\s/g, '');\n      if ((input.length % 4) === 0) { input = input.replace(/=+$/, ''); }\n      if ((input.length % 4) === 1) { throw Error('InvalidCharacterError'); }\n      if (/[^+/0-9A-Za-z]/.test(input)) { throw Error('InvalidCharacterError'); }\n\n      while (position < input.length) {\n        n = B64_ALPHABET.indexOf(input.charAt(position));\n        buffer = (buffer << 6) | n;\n        bits += 6;\n\n        if (bits === 24) {\n          output.push(String.fromCharCode((buffer >> 16) & 0xFF));\n          output.push(String.fromCharCode((buffer >>  8) & 0xFF));\n          output.push(String.fromCharCode(buffer & 0xFF));\n          bits = 0;\n          buffer = 0;\n        }\n        position += 1;\n      }\n\n      if (bits === 12) {\n        buffer = buffer >> 4;\n        output.push(String.fromCharCode(buffer & 0xFF));\n      } else if (bits === 18) {\n        buffer = buffer >> 2;\n        output.push(String.fromCharCode((buffer >> 8) & 0xFF));\n        output.push(String.fromCharCode(buffer & 0xFF));\n      }\n\n      return output.join('');\n    };\n\n    global.btoa = global.btoa || function (input) {\n      input = String(input);\n      var position = 0,\n          out = [],\n          o1, o2, o3,\n          e1, e2, e3, e4;\n\n      if (/[^\\x00-\\xFF]/.test(input)) { throw Error('InvalidCharacterError'); }\n\n      while (position < input.length) {\n        o1 = input.charCodeAt(position++);\n        o2 = input.charCodeAt(position++);\n        o3 = input.charCodeAt(position++);\n\n        // 111111 112222 222233 333333\n        e1 = o1 >> 2;\n        e2 = ((o1 & 0x3) << 4) | (o2 >> 4);\n        e3 = ((o2 & 0xf) << 2) | (o3 >> 6);\n        e4 = o3 & 0x3f;\n\n        if (position === input.length + 2) {\n          e3 = 64; e4 = 64;\n        }\n        else if (position === input.length + 1) {\n          e4 = 64;\n        }\n\n        out.push(B64_ALPHABET.charAt(e1),\n                 B64_ALPHABET.charAt(e2),\n                 B64_ALPHABET.charAt(e3),\n                 B64_ALPHABET.charAt(e4));\n      }\n\n      return out.join('');\n    };\n  }(window));\n\n  //https://gist.github.com/jimeh/332357\n  if (!Object.prototype.hasOwnProperty){\n      /*jshint -W001, -W103 */\n      Object.prototype.hasOwnProperty = function(prop) {\n      var proto = this.__proto__ || this.constructor.prototype;\n      return (prop in this) && (!(prop in proto) || proto[prop] !== this[prop]);\n    };\n      /*jshint +W001, +W103 */\n  }\n\n  // @license http://opensource.org/licenses/MIT\n  // copyright Paul Irish 2015\n\n\n  // Date.now() is supported everywhere except IE8. For IE8 we use the Date.now polyfill\n  //   github.com/Financial-Times/polyfill-service/blob/master/polyfills/Date.now/polyfill.js\n  // as Safari 6 doesn't have support for NavigationTiming, we use a Date.now() timestamp for relative values\n\n  // if you want values similar to what you'd get with real perf.now, place this towards the head of the page\n  // but in reality, you're just getting the delta between now() calls, so it's not terribly important where it's placed\n\n\n  (function(){\n\n    if ('performance' in window === false) {\n        window.performance = {};\n    }\n    \n    Date.now = (Date.now || function () {  // thanks IE8\n      return new Date().getTime();\n    });\n\n    if ('now' in window.performance === false){\n      \n      var nowOffset = Date.now();\n      \n      if (performance.timing && performance.timing.navigationStart){\n        nowOffset = performance.timing.navigationStart;\n      }\n\n      window.performance.now = function now(){\n        return Date.now() - nowOffset;\n      };\n    }\n\n  })();\n\n  //requestAnimationFrame polyfill for older Firefox/Chrome versions\n  if (!window.requestAnimationFrame) {\n    if (window.webkitRequestAnimationFrame && window.webkitCancelAnimationFrame) {\n    //https://github.com/Financial-Times/polyfill-service/blob/master/polyfills/requestAnimationFrame/polyfill-webkit.js\n    (function (global) {\n      global.requestAnimationFrame = function (callback) {\n        return webkitRequestAnimationFrame(function () {\n          callback(global.performance.now());\n        });\n      };\n\n      global.cancelAnimationFrame = global.webkitCancelAnimationFrame;\n    }(window));\n    } else if (window.mozRequestAnimationFrame && window.mozCancelAnimationFrame) {\n      //https://github.com/Financial-Times/polyfill-service/blob/master/polyfills/requestAnimationFrame/polyfill-moz.js\n    (function (global) {\n      global.requestAnimationFrame = function (callback) {\n        return mozRequestAnimationFrame(function () {\n          callback(global.performance.now());\n        });\n      };\n\n      global.cancelAnimationFrame = global.mozCancelAnimationFrame;\n    }(window));\n    } else {\n    (function (global) {\n      global.requestAnimationFrame = function (callback) {\n        return global.setTimeout(callback, 1000 / 60);\n      };\n\n      global.cancelAnimationFrame = global.clearTimeout;\n    })(window);\n    }\n  }\n})(this);\n\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Holder\"] = factory();\n\telse\n\t\troot[\"Holder\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n\n\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/*\n\tHolder.js - client side image placeholders\n\t(c) 2012-2015 Ivan Malopinsky - http://imsky.co\n\t*/\n\n\tmodule.exports = __webpack_require__(1);\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(global) {/*\n\tHolder.js - client side image placeholders\n\t(c) 2012-2016 Ivan Malopinsky - http://imsky.co\n\t*/\n\n\t//Libraries and functions\n\tvar onDomReady = __webpack_require__(2);\n\tvar querystring = __webpack_require__(3);\n\n\tvar SceneGraph = __webpack_require__(6);\n\tvar utils = __webpack_require__(7);\n\tvar SVG = __webpack_require__(8);\n\tvar DOM = __webpack_require__(9);\n\tvar Color = __webpack_require__(10);\n\tvar constants = __webpack_require__(11);\n\n\tvar svgRenderer = __webpack_require__(12);\n\tvar sgCanvasRenderer = __webpack_require__(15);\n\n\tvar extend = utils.extend;\n\tvar dimensionCheck = utils.dimensionCheck;\n\n\t//Constants and definitions\n\tvar SVG_NS = constants.svg_ns;\n\n\tvar Holder = {\n\t    version: constants.version,\n\n\t    /**\n\t     * Adds a theme to default settings\n\t     *\n\t     * @param {string} name Theme name\n\t     * @param {Object} theme Theme object, with foreground, background, size, font, and fontweight properties.\n\t     */\n\t    addTheme: function(name, theme) {\n\t        name != null && theme != null && (App.settings.themes[name] = theme);\n\t        delete App.vars.cache.themeKeys;\n\t        return this;\n\t    },\n\n\t    /**\n\t     * Appends a placeholder to an element\n\t     *\n\t     * @param {string} src Placeholder URL string\n\t     * @param el A selector or a reference to a DOM node\n\t     */\n\t    addImage: function(src, el) {\n\t        //todo: use jquery fallback if available for all QSA references\n\t        var nodes = DOM.getNodeArray(el);\n\t        nodes.forEach(function (node) {\n\t            var img = DOM.newEl('img');\n\t            var domProps = {};\n\t            domProps[App.setup.dataAttr] = src;\n\t            DOM.setAttr(img, domProps);\n\t            node.appendChild(img);\n\t        });\n\t        return this;\n\t    },\n\n\t    /**\n\t     * Sets whether or not an image is updated on resize.\n\t     * If an image is set to be updated, it is immediately rendered.\n\t     *\n\t     * @param {Object} el Image DOM element\n\t     * @param {Boolean} value Resizable update flag value\n\t     */\n\t    setResizeUpdate: function(el, value) {\n\t        if (el.holderData) {\n\t            el.holderData.resizeUpdate = !!value;\n\t            if (el.holderData.resizeUpdate) {\n\t                updateResizableElements(el);\n\t            }\n\t        }\n\t    },\n\n\t    /**\n\t     * Runs Holder with options. By default runs Holder on all images with \"holder.js\" in their source attributes.\n\t     *\n\t     * @param {Object} userOptions Options object, can contain domain, themes, images, and bgnodes properties\n\t     */\n\t    run: function(userOptions) {\n\t        //todo: split processing into separate queues\n\t        userOptions = userOptions || {};\n\t        var engineSettings = {};\n\t        var options = extend(App.settings, userOptions);\n\n\t        App.vars.preempted = true;\n\t        App.vars.dataAttr = options.dataAttr || App.setup.dataAttr;\n\n\t        engineSettings.renderer = options.renderer ? options.renderer : App.setup.renderer;\n\t        if (App.setup.renderers.join(',').indexOf(engineSettings.renderer) === -1) {\n\t            engineSettings.renderer = App.setup.supportsSVG ? 'svg' : (App.setup.supportsCanvas ? 'canvas' : 'html');\n\t        }\n\n\t        var images = DOM.getNodeArray(options.images);\n\t        var bgnodes = DOM.getNodeArray(options.bgnodes);\n\t        var stylenodes = DOM.getNodeArray(options.stylenodes);\n\t        var objects = DOM.getNodeArray(options.objects);\n\n\t        engineSettings.stylesheets = [];\n\t        engineSettings.svgXMLStylesheet = true;\n\t        engineSettings.noFontFallback = !!options.noFontFallback;\n\t        engineSettings.noBackgroundSize = !!options.noBackgroundSize;\n\n\t        stylenodes.forEach(function (styleNode) {\n\t            if (styleNode.attributes.rel && styleNode.attributes.href && styleNode.attributes.rel.value == 'stylesheet') {\n\t                var href = styleNode.attributes.href.value;\n\t                //todo: write isomorphic relative-to-absolute URL function\n\t                var proxyLink = DOM.newEl('a');\n\t                proxyLink.href = href;\n\t                var stylesheetURL = proxyLink.protocol + '//' + proxyLink.host + proxyLink.pathname + proxyLink.search;\n\t                engineSettings.stylesheets.push(stylesheetURL);\n\t            }\n\t        });\n\n\t        bgnodes.forEach(function (bgNode) {\n\t            //Skip processing background nodes if getComputedStyle is unavailable, since only modern browsers would be able to use canvas or SVG to render to background\n\t            if (!global.getComputedStyle) return;\n\t            var backgroundImage = global.getComputedStyle(bgNode, null).getPropertyValue('background-image');\n\t            var dataBackgroundImage = bgNode.getAttribute('data-background-src');\n\t            var rawURL = dataBackgroundImage || backgroundImage;\n\n\t            var holderURL = null;\n\t            var holderString = options.domain + '/';\n\t            var holderStringIndex = rawURL.indexOf(holderString);\n\n\t            if (holderStringIndex === 0) {\n\t                holderURL = rawURL;\n\t            } else if (holderStringIndex === 1 && rawURL[0] === '?') {\n\t                holderURL = rawURL.slice(1);\n\t            } else {\n\t                var fragment = rawURL.substr(holderStringIndex).match(/([^\\\"]*)\"?\\)/);\n\t                if (fragment !== null) {\n\t                    holderURL = fragment[1];\n\t                } else if (rawURL.indexOf('url(') === 0) {\n\t                    throw 'Holder: unable to parse background URL: ' + rawURL;\n\t                }\n\t            }\n\n\t            if (holderURL) {\n\t                var holderFlags = parseURL(holderURL, options);\n\t                if (holderFlags) {\n\t                    prepareDOMElement({\n\t                        mode: 'background',\n\t                        el: bgNode,\n\t                        flags: holderFlags,\n\t                        engineSettings: engineSettings\n\t                    });\n\t                }\n\t            }\n\t        });\n\n\t        objects.forEach(function (object) {\n\t            var objectAttr = {};\n\n\t            try {\n\t                objectAttr.data = object.getAttribute('data');\n\t                objectAttr.dataSrc = object.getAttribute(App.vars.dataAttr);\n\t            } catch (e) {}\n\n\t            var objectHasSrcURL = objectAttr.data != null && objectAttr.data.indexOf(options.domain) === 0;\n\t            var objectHasDataSrcURL = objectAttr.dataSrc != null && objectAttr.dataSrc.indexOf(options.domain) === 0;\n\n\t            if (objectHasSrcURL) {\n\t                prepareImageElement(options, engineSettings, objectAttr.data, object);\n\t            } else if (objectHasDataSrcURL) {\n\t                prepareImageElement(options, engineSettings, objectAttr.dataSrc, object);\n\t            }\n\t        });\n\n\t        images.forEach(function (image) {\n\t            var imageAttr = {};\n\n\t            try {\n\t                imageAttr.src = image.getAttribute('src');\n\t                imageAttr.dataSrc = image.getAttribute(App.vars.dataAttr);\n\t                imageAttr.rendered = image.getAttribute('data-holder-rendered');\n\t            } catch (e) {}\n\n\t            var imageHasSrc = imageAttr.src != null;\n\t            var imageHasDataSrcURL = imageAttr.dataSrc != null && imageAttr.dataSrc.indexOf(options.domain) === 0;\n\t            var imageRendered = imageAttr.rendered != null && imageAttr.rendered == 'true';\n\n\t            if (imageHasSrc) {\n\t                if (imageAttr.src.indexOf(options.domain) === 0) {\n\t                    prepareImageElement(options, engineSettings, imageAttr.src, image);\n\t                } else if (imageHasDataSrcURL) {\n\t                    //Image has a valid data-src and an invalid src\n\t                    if (imageRendered) {\n\t                        //If the placeholder has already been render, re-render it\n\t                        prepareImageElement(options, engineSettings, imageAttr.dataSrc, image);\n\t                    } else {\n\t                        //If the placeholder has not been rendered, check if the image exists and render a fallback if it doesn't\n\t                        (function(src, options, engineSettings, dataSrc, image) {\n\t                            utils.imageExists(src, function(exists) {\n\t                                if (!exists) {\n\t                                    prepareImageElement(options, engineSettings, dataSrc, image);\n\t                                }\n\t                            });\n\t                        })(imageAttr.src, options, engineSettings, imageAttr.dataSrc, image);\n\t                    }\n\t                }\n\t            } else if (imageHasDataSrcURL) {\n\t                prepareImageElement(options, engineSettings, imageAttr.dataSrc, image);\n\t            }\n\t        });\n\n\t        return this;\n\t    }\n\t};\n\n\tvar App = {\n\t    settings: {\n\t        domain: 'holder.js',\n\t        images: 'img',\n\t        objects: 'object',\n\t        bgnodes: 'body .holderjs',\n\t        stylenodes: 'head link.holderjs',\n\t        themes: {\n\t            'gray': {\n\t                bg: '#EEEEEE',\n\t                fg: '#AAAAAA'\n\t            },\n\t            'social': {\n\t                bg: '#3a5a97',\n\t                fg: '#FFFFFF'\n\t            },\n\t            'industrial': {\n\t                bg: '#434A52',\n\t                fg: '#C2F200'\n\t            },\n\t            'sky': {\n\t                bg: '#0D8FDB',\n\t                fg: '#FFFFFF'\n\t            },\n\t            'vine': {\n\t                bg: '#39DBAC',\n\t                fg: '#1E292C'\n\t            },\n\t            'lava': {\n\t                bg: '#F8591A',\n\t                fg: '#1C2846'\n\t            }\n\t        }\n\t    },\n\t    defaults: {\n\t        size: 10,\n\t        units: 'pt',\n\t        scale: 1 / 16\n\t    }\n\t};\n\n\t/**\n\t * Processes provided source attribute and sets up the appropriate rendering workflow\n\t *\n\t * @private\n\t * @param options Instance options from Holder.run\n\t * @param renderSettings Instance configuration\n\t * @param src Image URL\n\t * @param el Image DOM element\n\t */\n\tfunction prepareImageElement(options, engineSettings, src, el) {\n\t    var holderFlags = parseURL(src.substr(src.lastIndexOf(options.domain)), options);\n\t    if (holderFlags) {\n\t        prepareDOMElement({\n\t            mode: null,\n\t            el: el,\n\t            flags: holderFlags,\n\t            engineSettings: engineSettings\n\t        });\n\t    }\n\t}\n\n\t/**\n\t * Processes a Holder URL and extracts configuration from query string\n\t *\n\t * @private\n\t * @param url URL\n\t * @param instanceOptions Instance options from Holder.run\n\t */\n\tfunction parseURL(url, instanceOptions) {\n\t    var holder = {\n\t        theme: extend(App.settings.themes.gray, null),\n\t        stylesheets: instanceOptions.stylesheets,\n\t        instanceOptions: instanceOptions\n\t    };\n\n\t    var firstQuestionMark = url.indexOf('?');\n\t    var parts = [url];\n\n\t    if (firstQuestionMark !== -1) {\n\t        parts = [url.slice(0, firstQuestionMark), url.slice(firstQuestionMark + 1)];\n\t    }\n\n\t    var basics = parts[0].split('/');\n\n\t    holder.holderURL = url;\n\n\t    var dimensions = basics[1];\n\t    var dimensionData = dimensions.match(/([\\d]+p?)x([\\d]+p?)/);\n\n\t    if (!dimensionData) return false;\n\n\t    holder.fluid = dimensions.indexOf('p') !== -1;\n\n\t    holder.dimensions = {\n\t        width: dimensionData[1].replace('p', '%'),\n\t        height: dimensionData[2].replace('p', '%')\n\t    };\n\n\t    if (parts.length === 2) {\n\t        var options = querystring.parse(parts[1]);\n\n\t        // Dimensions\n\n\t        if (utils.truthy(options.ratio)) {\n\t            holder.fluid = true;\n\t            var ratioWidth = parseFloat(holder.dimensions.width.replace('%', ''));\n\t            var ratioHeight = parseFloat(holder.dimensions.height.replace('%', ''));\n\n\t            ratioHeight = Math.floor(100 * (ratioHeight / ratioWidth));\n\t            ratioWidth = 100;\n\n\t            holder.dimensions.width = ratioWidth + '%';\n\t            holder.dimensions.height = ratioHeight + '%';\n\t        }\n\n\t        holder.auto = utils.truthy(options.auto);\n\n\t        // Colors\n\n\t        if (options.bg) {\n\t            holder.theme.bg = utils.parseColor(options.bg);\n\t        }\n\n\t        if (options.fg) {\n\t            holder.theme.fg = utils.parseColor(options.fg);\n\t        }\n\n\t        //todo: add automatic foreground to themes without foreground\n\t        if (options.bg && !options.fg) {\n\t            holder.autoFg = true;\n\t        }\n\n\t        if (options.theme && holder.instanceOptions.themes.hasOwnProperty(options.theme)) {\n\t            holder.theme = extend(holder.instanceOptions.themes[options.theme], null);\n\t        }\n\n\t        // Text\n\n\t        if (options.text) {\n\t            holder.text = options.text;\n\t        }\n\n\t        if (options.textmode) {\n\t            holder.textmode = options.textmode;\n\t        }\n\n\t        if (options.size && parseFloat(options.size)) {\n\t            holder.size = parseFloat(options.size);\n\t        }\n\n\t        if (options.font) {\n\t            holder.font = options.font;\n\t        }\n\n\t        if (options.align) {\n\t            holder.align = options.align;\n\t        }\n\n\t        if (options.lineWrap) {\n\t            holder.lineWrap = options.lineWrap;\n\t        }\n\n\t        holder.nowrap = utils.truthy(options.nowrap);\n\n\t        // Miscellaneous\n\n\t        holder.outline = utils.truthy(options.outline);\n\n\t        if (utils.truthy(options.random)) {\n\t            App.vars.cache.themeKeys = App.vars.cache.themeKeys || Object.keys(holder.instanceOptions.themes);\n\t            var _theme = App.vars.cache.themeKeys[0 | Math.random() * App.vars.cache.themeKeys.length];\n\t            holder.theme = extend(holder.instanceOptions.themes[_theme], null);\n\t        }\n\t    }\n\n\t    return holder;\n\t}\n\n\t/**\n\t * Modifies the DOM to fit placeholders and sets up resizable image callbacks (for fluid and automatically sized placeholders)\n\t *\n\t * @private\n\t * @param settings DOM prep settings\n\t */\n\tfunction prepareDOMElement(prepSettings) {\n\t    var mode = prepSettings.mode;\n\t    var el = prepSettings.el;\n\t    var flags = prepSettings.flags;\n\t    var _engineSettings = prepSettings.engineSettings;\n\t    var dimensions = flags.dimensions,\n\t        theme = flags.theme;\n\t    var dimensionsCaption = dimensions.width + 'x' + dimensions.height;\n\t    mode = mode == null ? (flags.fluid ? 'fluid' : 'image') : mode;\n\t    var holderTemplateRe = /holder_([a-z]+)/g;\n\t    var dimensionsInText = false;\n\n\t    if (flags.text != null) {\n\t        theme.text = flags.text;\n\n\t        //<object> SVG embedding doesn't parse Unicode properly\n\t        if (el.nodeName.toLowerCase() === 'object') {\n\t            var textLines = theme.text.split('\\\\n');\n\t            for (var k = 0; k < textLines.length; k++) {\n\t                textLines[k] = utils.encodeHtmlEntity(textLines[k]);\n\t            }\n\t            theme.text = textLines.join('\\\\n');\n\t        }\n\t    }\n\n\t    if (theme.text) {\n\t        var holderTemplateMatches = theme.text.match(holderTemplateRe);\n\n\t        if (holderTemplateMatches !== null) {\n\t            //todo: optimize template replacement\n\t            holderTemplateMatches.forEach(function (match) {\n\t                if (match === 'holder_dimensions') {\n\t                    theme.text = theme.text.replace(match, dimensionsCaption);\n\t                }\n\t            });\n\t        }\n\t    }\n\n\t    var holderURL = flags.holderURL;\n\t    var engineSettings = extend(_engineSettings, null);\n\n\t    if (flags.font) {\n\t        /*\n\t        If external fonts are used in a <img> placeholder rendered with SVG, Holder falls back to canvas.\n\n\t        This is done because Firefox and Chrome disallow embedded SVGs from referencing external assets.\n\t        The workaround is either to change the placeholder tag from <img> to <object> or to use the canvas renderer.\n\t        */\n\t        theme.font = flags.font;\n\t        if (!engineSettings.noFontFallback && el.nodeName.toLowerCase() === 'img' && App.setup.supportsCanvas && engineSettings.renderer === 'svg') {\n\t            engineSettings = extend(engineSettings, {\n\t                renderer: 'canvas'\n\t            });\n\t        }\n\t    }\n\n\t    //Chrome and Opera require a quick 10ms re-render if web fonts are used with canvas\n\t    if (flags.font && engineSettings.renderer == 'canvas') {\n\t        engineSettings.reRender = true;\n\t    }\n\n\t    if (mode == 'background') {\n\t        if (el.getAttribute('data-background-src') == null) {\n\t            DOM.setAttr(el, {\n\t                'data-background-src': holderURL\n\t            });\n\t        }\n\t    } else {\n\t        var domProps = {};\n\t        domProps[App.vars.dataAttr] = holderURL;\n\t        DOM.setAttr(el, domProps);\n\t    }\n\n\t    flags.theme = theme;\n\n\t    //todo consider using all renderSettings in holderData\n\t    el.holderData = {\n\t        flags: flags,\n\t        engineSettings: engineSettings\n\t    };\n\n\t    if (mode == 'image' || mode == 'fluid') {\n\t        DOM.setAttr(el, {\n\t            'alt': theme.text ? (dimensionsInText ? theme.text : theme.text + ' [' + dimensionsCaption + ']') : dimensionsCaption\n\t        });\n\t    }\n\n\t    var renderSettings = {\n\t        mode: mode,\n\t        el: el,\n\t        holderSettings: {\n\t            dimensions: dimensions,\n\t            theme: theme,\n\t            flags: flags\n\t        },\n\t        engineSettings: engineSettings\n\t    };\n\n\t    if (mode == 'image') {\n\t        if (!flags.auto) {\n\t            el.style.width = dimensions.width + 'px';\n\t            el.style.height = dimensions.height + 'px';\n\t        }\n\n\t        if (engineSettings.renderer == 'html') {\n\t            el.style.backgroundColor = theme.bg;\n\t        } else {\n\t            render(renderSettings);\n\n\t            if (flags.textmode == 'exact') {\n\t                el.holderData.resizeUpdate = true;\n\t                App.vars.resizableImages.push(el);\n\t                updateResizableElements(el);\n\t            }\n\t        }\n\t    } else if (mode == 'background' && engineSettings.renderer != 'html') {\n\t        render(renderSettings);\n\t    } else if (mode == 'fluid') {\n\t        el.holderData.resizeUpdate = true;\n\n\t        if (dimensions.height.slice(-1) == '%') {\n\t            el.style.height = dimensions.height;\n\t        } else if (flags.auto == null || !flags.auto) {\n\t            el.style.height = dimensions.height + 'px';\n\t        }\n\t        if (dimensions.width.slice(-1) == '%') {\n\t            el.style.width = dimensions.width;\n\t        } else if (flags.auto == null || !flags.auto) {\n\t            el.style.width = dimensions.width + 'px';\n\t        }\n\t        if (el.style.display == 'inline' || el.style.display === '' || el.style.display == 'none') {\n\t            el.style.display = 'block';\n\t        }\n\n\t        setInitialDimensions(el);\n\n\t        if (engineSettings.renderer == 'html') {\n\t            el.style.backgroundColor = theme.bg;\n\t        } else {\n\t            App.vars.resizableImages.push(el);\n\t            updateResizableElements(el);\n\t        }\n\t    }\n\t}\n\n\t/**\n\t * Core function that takes output from renderers and sets it as the source or background-image of the target element\n\t *\n\t * @private\n\t * @param renderSettings Renderer settings\n\t */\n\tfunction render(renderSettings) {\n\t    var image = null;\n\t    var mode = renderSettings.mode;\n\t    var el = renderSettings.el;\n\t    var holderSettings = renderSettings.holderSettings;\n\t    var engineSettings = renderSettings.engineSettings;\n\n\t    switch (engineSettings.renderer) {\n\t        case 'svg':\n\t            if (!App.setup.supportsSVG) return;\n\t            break;\n\t        case 'canvas':\n\t            if (!App.setup.supportsCanvas) return;\n\t            break;\n\t        default:\n\t            return;\n\t    }\n\n\t    //todo: move generation of scene up to flag generation to reduce extra object creation\n\t    var scene = {\n\t        width: holderSettings.dimensions.width,\n\t        height: holderSettings.dimensions.height,\n\t        theme: holderSettings.theme,\n\t        flags: holderSettings.flags\n\t    };\n\n\t    var sceneGraph = buildSceneGraph(scene);\n\n\t    function getRenderedImage() {\n\t        var image = null;\n\t        switch (engineSettings.renderer) {\n\t            case 'canvas':\n\t                image = sgCanvasRenderer(sceneGraph, renderSettings);\n\t                break;\n\t            case 'svg':\n\t                image = svgRenderer(sceneGraph, renderSettings);\n\t                break;\n\t            default:\n\t                throw 'Holder: invalid renderer: ' + engineSettings.renderer;\n\t        }\n\n\t        return image;\n\t    }\n\n\t    image = getRenderedImage();\n\n\t    if (image == null) {\n\t        throw 'Holder: couldn\\'t render placeholder';\n\t    }\n\n\t    //todo: add <object> canvas rendering\n\t    if (mode == 'background') {\n\t        el.style.backgroundImage = 'url(' + image + ')';\n\n\t        if (!engineSettings.noBackgroundSize) {\n\t            el.style.backgroundSize = scene.width + 'px ' + scene.height + 'px';\n\t        }\n\t    } else {\n\t        if (el.nodeName.toLowerCase() === 'img') {\n\t            DOM.setAttr(el, {\n\t                'src': image\n\t            });\n\t        } else if (el.nodeName.toLowerCase() === 'object') {\n\t            DOM.setAttr(el, {\n\t                'data': image,\n\t                'type': 'image/svg+xml'\n\t            });\n\t        }\n\t        if (engineSettings.reRender) {\n\t            global.setTimeout(function () {\n\t                var image = getRenderedImage();\n\t                if (image == null) {\n\t                    throw 'Holder: couldn\\'t render placeholder';\n\t                }\n\t                //todo: refactor this code into a function\n\t                if (el.nodeName.toLowerCase() === 'img') {\n\t                    DOM.setAttr(el, {\n\t                        'src': image\n\t                    });\n\t                } else if (el.nodeName.toLowerCase() === 'object') {\n\t                    DOM.setAttr(el, {\n\t                        'data': image,\n\t                        'type': 'image/svg+xml'\n\t                    });\n\t                }\n\t            }, 150);\n\t        }\n\t    }\n\t    //todo: account for re-rendering\n\t    DOM.setAttr(el, {\n\t        'data-holder-rendered': true\n\t    });\n\t}\n\n\t/**\n\t * Core function that takes a Holder scene description and builds a scene graph\n\t *\n\t * @private\n\t * @param scene Holder scene object\n\t */\n\t//todo: make this function reusable\n\t//todo: merge app defaults and setup properties into the scene argument\n\tfunction buildSceneGraph(scene) {\n\t    var fontSize = App.defaults.size;\n\t    if (parseFloat(scene.theme.size)) {\n\t        fontSize = scene.theme.size;\n\t    } else if (parseFloat(scene.flags.size)) {\n\t        fontSize = scene.flags.size;\n\t    }\n\n\t    scene.font = {\n\t        family: scene.theme.font ? scene.theme.font : 'Arial, Helvetica, Open Sans, sans-serif',\n\t        size: textSize(scene.width, scene.height, fontSize, App.defaults.scale),\n\t        units: scene.theme.units ? scene.theme.units : App.defaults.units,\n\t        weight: scene.theme.fontweight ? scene.theme.fontweight : 'bold'\n\t    };\n\n\t    scene.text = scene.theme.text || Math.floor(scene.width) + 'x' + Math.floor(scene.height);\n\n\t    scene.noWrap = scene.theme.nowrap || scene.flags.nowrap;\n\n\t    scene.align = scene.theme.align || scene.flags.align || 'center';\n\n\t    switch (scene.flags.textmode) {\n\t        case 'literal':\n\t            scene.text = scene.flags.dimensions.width + 'x' + scene.flags.dimensions.height;\n\t            break;\n\t        case 'exact':\n\t            if (!scene.flags.exactDimensions) break;\n\t            scene.text = Math.floor(scene.flags.exactDimensions.width) + 'x' + Math.floor(scene.flags.exactDimensions.height);\n\t            break;\n\t    }\n\n\t    var lineWrap = scene.flags.lineWrap || App.setup.lineWrapRatio;\n\t    var sceneMargin = scene.width * lineWrap;\n\t    var maxLineWidth = sceneMargin;\n\n\t    var sceneGraph = new SceneGraph({\n\t        width: scene.width,\n\t        height: scene.height\n\t    });\n\n\t    var Shape = sceneGraph.Shape;\n\n\t    var holderBg = new Shape.Rect('holderBg', {\n\t        fill: scene.theme.bg\n\t    });\n\n\t    holderBg.resize(scene.width, scene.height);\n\t    sceneGraph.root.add(holderBg);\n\n\t    if (scene.flags.outline) {\n\t        var outlineColor = new Color(holderBg.properties.fill);\n\t        outlineColor = outlineColor.lighten(outlineColor.lighterThan('7f7f7f') ? -0.1 : 0.1);\n\t        holderBg.properties.outline = {\n\t            fill: outlineColor.toHex(true),\n\t            width: 2\n\t        };\n\t    }\n\n\t    var holderTextColor = scene.theme.fg;\n\n\t    if (scene.flags.autoFg) {\n\t        var holderBgColor = new Color(holderBg.properties.fill);\n\t        var lightColor = new Color('fff');\n\t        var darkColor = new Color('000', {\n\t            'alpha': 0.285714\n\t        });\n\n\t        holderTextColor = holderBgColor.blendAlpha(holderBgColor.lighterThan('7f7f7f') ? darkColor : lightColor).toHex(true);\n\t    }\n\n\t    var holderTextGroup = new Shape.Group('holderTextGroup', {\n\t        text: scene.text,\n\t        align: scene.align,\n\t        font: scene.font,\n\t        fill: holderTextColor\n\t    });\n\n\t    holderTextGroup.moveTo(null, null, 1);\n\t    sceneGraph.root.add(holderTextGroup);\n\n\t    var tpdata = holderTextGroup.textPositionData = stagingRenderer(sceneGraph);\n\t    if (!tpdata) {\n\t        throw 'Holder: staging fallback not supported yet.';\n\t    }\n\t    holderTextGroup.properties.leading = tpdata.boundingBox.height;\n\n\t    var textNode = null;\n\t    var line = null;\n\n\t    function finalizeLine(parent, line, width, height) {\n\t        line.width = width;\n\t        line.height = height;\n\t        parent.width = Math.max(parent.width, line.width);\n\t        parent.height += line.height;\n\t    }\n\n\t    if (tpdata.lineCount > 1) {\n\t        var offsetX = 0;\n\t        var offsetY = 0;\n\t        var lineIndex = 0;\n\t        var lineKey;\n\t        line = new Shape.Group('line' + lineIndex);\n\n\t        //Double margin so that left/right-aligned next is not flush with edge of image\n\t        if (scene.align === 'left' || scene.align === 'right') {\n\t            maxLineWidth = scene.width * (1 - (1 - lineWrap) * 2);\n\t        }\n\n\t        for (var i = 0; i < tpdata.words.length; i++) {\n\t            var word = tpdata.words[i];\n\t            textNode = new Shape.Text(word.text);\n\t            var newline = word.text == '\\\\n';\n\t            if (!scene.noWrap && (offsetX + word.width >= maxLineWidth || newline === true)) {\n\t                finalizeLine(holderTextGroup, line, offsetX, holderTextGroup.properties.leading);\n\t                holderTextGroup.add(line);\n\t                offsetX = 0;\n\t                offsetY += holderTextGroup.properties.leading;\n\t                lineIndex += 1;\n\t                line = new Shape.Group('line' + lineIndex);\n\t                line.y = offsetY;\n\t            }\n\t            if (newline === true) {\n\t                continue;\n\t            }\n\t            textNode.moveTo(offsetX, 0);\n\t            offsetX += tpdata.spaceWidth + word.width;\n\t            line.add(textNode);\n\t        }\n\n\t        finalizeLine(holderTextGroup, line, offsetX, holderTextGroup.properties.leading);\n\t        holderTextGroup.add(line);\n\n\t        if (scene.align === 'left') {\n\t            holderTextGroup.moveTo(scene.width - sceneMargin, null, null);\n\t        } else if (scene.align === 'right') {\n\t            for (lineKey in holderTextGroup.children) {\n\t                line = holderTextGroup.children[lineKey];\n\t                line.moveTo(scene.width - line.width, null, null);\n\t            }\n\n\t            holderTextGroup.moveTo(0 - (scene.width - sceneMargin), null, null);\n\t        } else {\n\t            for (lineKey in holderTextGroup.children) {\n\t                line = holderTextGroup.children[lineKey];\n\t                line.moveTo((holderTextGroup.width - line.width) / 2, null, null);\n\t            }\n\n\t            holderTextGroup.moveTo((scene.width - holderTextGroup.width) / 2, null, null);\n\t        }\n\n\t        holderTextGroup.moveTo(null, (scene.height - holderTextGroup.height) / 2, null);\n\n\t        //If the text exceeds vertical space, move it down so the first line is visible\n\t        if ((scene.height - holderTextGroup.height) / 2 < 0) {\n\t            holderTextGroup.moveTo(null, 0, null);\n\t        }\n\t    } else {\n\t        textNode = new Shape.Text(scene.text);\n\t        line = new Shape.Group('line0');\n\t        line.add(textNode);\n\t        holderTextGroup.add(line);\n\n\t        if (scene.align === 'left') {\n\t            holderTextGroup.moveTo(scene.width - sceneMargin, null, null);\n\t        } else if (scene.align === 'right') {\n\t            holderTextGroup.moveTo(0 - (scene.width - sceneMargin), null, null);\n\t        } else {\n\t            holderTextGroup.moveTo((scene.width - tpdata.boundingBox.width) / 2, null, null);\n\t        }\n\n\t        holderTextGroup.moveTo(null, (scene.height - tpdata.boundingBox.height) / 2, null);\n\t    }\n\n\t    //todo: renderlist\n\t    return sceneGraph;\n\t}\n\n\t/**\n\t * Adaptive text sizing function\n\t *\n\t * @private\n\t * @param width Parent width\n\t * @param height Parent height\n\t * @param fontSize Requested text size\n\t * @param scale Proportional scale of text\n\t */\n\tfunction textSize(width, height, fontSize, scale) {\n\t    var stageWidth = parseInt(width, 10);\n\t    var stageHeight = parseInt(height, 10);\n\n\t    var bigSide = Math.max(stageWidth, stageHeight);\n\t    var smallSide = Math.min(stageWidth, stageHeight);\n\n\t    var newHeight = 0.8 * Math.min(smallSide, bigSide * scale);\n\t    return Math.round(Math.max(fontSize, newHeight));\n\t}\n\n\t/**\n\t * Iterates over resizable (fluid or auto) placeholders and renders them\n\t *\n\t * @private\n\t * @param element Optional element selector, specified only if a specific element needs to be re-rendered\n\t */\n\tfunction updateResizableElements(element) {\n\t    var images;\n\t    if (element == null || element.nodeType == null) {\n\t        images = App.vars.resizableImages;\n\t    } else {\n\t        images = [element];\n\t    }\n\t    for (var i = 0, l = images.length; i < l; i++) {\n\t        var el = images[i];\n\t        if (el.holderData) {\n\t            var flags = el.holderData.flags;\n\t            var dimensions = dimensionCheck(el);\n\t            if (dimensions) {\n\t                if (!el.holderData.resizeUpdate) {\n\t                    continue;\n\t                }\n\n\t                if (flags.fluid && flags.auto) {\n\t                    var fluidConfig = el.holderData.fluidConfig;\n\t                    switch (fluidConfig.mode) {\n\t                        case 'width':\n\t                            dimensions.height = dimensions.width / fluidConfig.ratio;\n\t                            break;\n\t                        case 'height':\n\t                            dimensions.width = dimensions.height * fluidConfig.ratio;\n\t                            break;\n\t                    }\n\t                }\n\n\t                var settings = {\n\t                    mode: 'image',\n\t                    holderSettings: {\n\t                        dimensions: dimensions,\n\t                        theme: flags.theme,\n\t                        flags: flags\n\t                    },\n\t                    el: el,\n\t                    engineSettings: el.holderData.engineSettings\n\t                };\n\n\t                if (flags.textmode == 'exact') {\n\t                    flags.exactDimensions = dimensions;\n\t                    settings.holderSettings.dimensions = flags.dimensions;\n\t                }\n\n\t                render(settings);\n\t            } else {\n\t                setInvisible(el);\n\t            }\n\t        }\n\t    }\n\t}\n\n\t/**\n\t * Sets up aspect ratio metadata for fluid placeholders, in order to preserve proportions when resizing\n\t *\n\t * @private\n\t * @param el Image DOM element\n\t */\n\tfunction setInitialDimensions(el) {\n\t    if (el.holderData) {\n\t        var dimensions = dimensionCheck(el);\n\t        if (dimensions) {\n\t            var flags = el.holderData.flags;\n\n\t            var fluidConfig = {\n\t                fluidHeight: flags.dimensions.height.slice(-1) == '%',\n\t                fluidWidth: flags.dimensions.width.slice(-1) == '%',\n\t                mode: null,\n\t                initialDimensions: dimensions\n\t            };\n\n\t            if (fluidConfig.fluidWidth && !fluidConfig.fluidHeight) {\n\t                fluidConfig.mode = 'width';\n\t                fluidConfig.ratio = fluidConfig.initialDimensions.width / parseFloat(flags.dimensions.height);\n\t            } else if (!fluidConfig.fluidWidth && fluidConfig.fluidHeight) {\n\t                fluidConfig.mode = 'height';\n\t                fluidConfig.ratio = parseFloat(flags.dimensions.width) / fluidConfig.initialDimensions.height;\n\t            }\n\n\t            el.holderData.fluidConfig = fluidConfig;\n\t        } else {\n\t            setInvisible(el);\n\t        }\n\t    }\n\t}\n\n\t/**\n\t * Iterates through all current invisible images, and if they're visible, renders them and removes them from further checks. Runs every animation frame.\n\t *\n\t * @private\n\t */\n\tfunction visibilityCheck() {\n\t    var renderableImages = [];\n\t    var keys = Object.keys(App.vars.invisibleImages);\n\t    var el;\n\n\t    keys.forEach(function (key) {\n\t        el = App.vars.invisibleImages[key];\n\t        if (dimensionCheck(el) && el.nodeName.toLowerCase() == 'img') {\n\t            renderableImages.push(el);\n\t            delete App.vars.invisibleImages[key];\n\t        }\n\t    });\n\n\t    if (renderableImages.length) {\n\t        Holder.run({\n\t            images: renderableImages\n\t        });\n\t    }\n\n\t    // Done to prevent 100% CPU usage via aggressive calling of requestAnimationFrame\n\t    setTimeout(function () {\n\t        global.requestAnimationFrame(visibilityCheck);\n\t    }, 10);\n\t}\n\n\t/**\n\t * Starts checking for invisible placeholders if not doing so yet. Does nothing otherwise.\n\t *\n\t * @private\n\t */\n\tfunction startVisibilityCheck() {\n\t    if (!App.vars.visibilityCheckStarted) {\n\t        global.requestAnimationFrame(visibilityCheck);\n\t        App.vars.visibilityCheckStarted = true;\n\t    }\n\t}\n\n\t/**\n\t * Sets a unique ID for an image detected to be invisible and adds it to the map of invisible images checked by visibilityCheck\n\t *\n\t * @private\n\t * @param el Invisible DOM element\n\t */\n\tfunction setInvisible(el) {\n\t    if (!el.holderData.invisibleId) {\n\t        App.vars.invisibleId += 1;\n\t        App.vars.invisibleImages['i' + App.vars.invisibleId] = el;\n\t        el.holderData.invisibleId = App.vars.invisibleId;\n\t    }\n\t}\n\n\t//todo: see if possible to convert stagingRenderer to use HTML only\n\tvar stagingRenderer = (function() {\n\t    var svg = null,\n\t        stagingText = null,\n\t        stagingTextNode = null;\n\t    return function(graph) {\n\t        var rootNode = graph.root;\n\t        if (App.setup.supportsSVG) {\n\t            var firstTimeSetup = false;\n\t            var tnode = function(text) {\n\t                return document.createTextNode(text);\n\t            };\n\t            if (svg == null || svg.parentNode !== document.body) {\n\t                firstTimeSetup = true;\n\t            }\n\n\t            svg = SVG.initSVG(svg, rootNode.properties.width, rootNode.properties.height);\n\t            //Show staging element before staging\n\t            svg.style.display = 'block';\n\n\t            if (firstTimeSetup) {\n\t                stagingText = DOM.newEl('text', SVG_NS);\n\t                stagingTextNode = tnode(null);\n\t                DOM.setAttr(stagingText, {\n\t                    x: 0\n\t                });\n\t                stagingText.appendChild(stagingTextNode);\n\t                svg.appendChild(stagingText);\n\t                document.body.appendChild(svg);\n\t                svg.style.visibility = 'hidden';\n\t                svg.style.position = 'absolute';\n\t                svg.style.top = '-100%';\n\t                svg.style.left = '-100%';\n\t                //todo: workaround for zero-dimension <svg> tag in Opera 12\n\t                //svg.setAttribute('width', 0);\n\t                //svg.setAttribute('height', 0);\n\t            }\n\n\t            var holderTextGroup = rootNode.children.holderTextGroup;\n\t            var htgProps = holderTextGroup.properties;\n\t            DOM.setAttr(stagingText, {\n\t                'y': htgProps.font.size,\n\t                'style': utils.cssProps({\n\t                    'font-weight': htgProps.font.weight,\n\t                    'font-size': htgProps.font.size + htgProps.font.units,\n\t                    'font-family': htgProps.font.family\n\t                })\n\t            });\n\n\t            //Unescape HTML entities to get approximately the right width\n\t            var txt = DOM.newEl('textarea');\n\t            txt.innerHTML = htgProps.text;\n\t            stagingTextNode.nodeValue = txt.value;\n\n\t            //Get bounding box for the whole string (total width and height)\n\t            var stagingTextBBox = stagingText.getBBox();\n\n\t            //Get line count and split the string into words\n\t            var lineCount = Math.ceil(stagingTextBBox.width / rootNode.properties.width);\n\t            var words = htgProps.text.split(' ');\n\t            var newlines = htgProps.text.match(/\\\\n/g);\n\t            lineCount += newlines == null ? 0 : newlines.length;\n\n\t            //Get bounding box for the string with spaces removed\n\t            stagingTextNode.nodeValue = htgProps.text.replace(/[ ]+/g, '');\n\t            var computedNoSpaceLength = stagingText.getComputedTextLength();\n\n\t            //Compute average space width\n\t            var diffLength = stagingTextBBox.width - computedNoSpaceLength;\n\t            var spaceWidth = Math.round(diffLength / Math.max(1, words.length - 1));\n\n\t            //Get widths for every word with space only if there is more than one line\n\t            var wordWidths = [];\n\t            if (lineCount > 1) {\n\t                stagingTextNode.nodeValue = '';\n\t                for (var i = 0; i < words.length; i++) {\n\t                    if (words[i].length === 0) continue;\n\t                    stagingTextNode.nodeValue = utils.decodeHtmlEntity(words[i]);\n\t                    var bbox = stagingText.getBBox();\n\t                    wordWidths.push({\n\t                        text: words[i],\n\t                        width: bbox.width\n\t                    });\n\t                }\n\t            }\n\n\t            //Hide staging element after staging\n\t            svg.style.display = 'none';\n\n\t            return {\n\t                spaceWidth: spaceWidth,\n\t                lineCount: lineCount,\n\t                boundingBox: stagingTextBBox,\n\t                words: wordWidths\n\t            };\n\t        } else {\n\t            //todo: canvas fallback for measuring text on android 2.3\n\t            return false;\n\t        }\n\t    };\n\t})();\n\n\t//Helpers\n\n\t/**\n\t * Prevents a function from being called too often, waits until a timer elapses to call it again\n\t *\n\t * @param fn Function to call\n\t */\n\tfunction debounce(fn) {\n\t    if (!App.vars.debounceTimer) fn.call(this);\n\t    if (App.vars.debounceTimer) global.clearTimeout(App.vars.debounceTimer);\n\t    App.vars.debounceTimer = global.setTimeout(function() {\n\t        App.vars.debounceTimer = null;\n\t        fn.call(this);\n\t    }, App.setup.debounce);\n\t}\n\n\t/**\n\t * Holder-specific resize/orientation change callback, debounced to prevent excessive execution\n\t */\n\tfunction resizeEvent() {\n\t    debounce(function() {\n\t        updateResizableElements(null);\n\t    });\n\t}\n\n\t//Set up flags\n\n\tfor (var flag in App.flags) {\n\t    if (!App.flags.hasOwnProperty(flag)) continue;\n\t    App.flags[flag].match = function(val) {\n\t        return val.match(this.regex);\n\t    };\n\t}\n\n\t//Properties set once on setup\n\n\tApp.setup = {\n\t    renderer: 'html',\n\t    debounce: 100,\n\t    ratio: 1,\n\t    supportsCanvas: false,\n\t    supportsSVG: false,\n\t    lineWrapRatio: 0.9,\n\t    dataAttr: 'data-src',\n\t    renderers: ['html', 'canvas', 'svg']\n\t};\n\n\t//Properties modified during runtime\n\n\tApp.vars = {\n\t    preempted: false,\n\t    resizableImages: [],\n\t    invisibleImages: {},\n\t    invisibleId: 0,\n\t    visibilityCheckStarted: false,\n\t    debounceTimer: null,\n\t    cache: {}\n\t};\n\n\t//Pre-flight\n\n\t(function() {\n\t    var canvas = DOM.newEl('canvas');\n\n\t    if (canvas.getContext) {\n\t        if (canvas.toDataURL('image/png').indexOf('data:image/png') != -1) {\n\t            App.setup.renderer = 'canvas';\n\t            App.setup.supportsCanvas = true;\n\t        }\n\t    }\n\n\t    if (!!document.createElementNS && !!document.createElementNS(SVG_NS, 'svg').createSVGRect) {\n\t        App.setup.renderer = 'svg';\n\t        App.setup.supportsSVG = true;\n\t    }\n\t})();\n\n\t//Starts checking for invisible placeholders\n\tstartVisibilityCheck();\n\n\tif (onDomReady) {\n\t    onDomReady(function() {\n\t        if (!App.vars.preempted) {\n\t            Holder.run();\n\t        }\n\t        if (global.addEventListener) {\n\t            global.addEventListener('resize', resizeEvent, false);\n\t            global.addEventListener('orientationchange', resizeEvent, false);\n\t        } else {\n\t            global.attachEvent('onresize', resizeEvent);\n\t        }\n\n\t        if (typeof global.Turbolinks == 'object') {\n\t            global.document.addEventListener('page:change', function() {\n\t                Holder.run();\n\t            });\n\t        }\n\t    });\n\t}\n\n\tmodule.exports = Holder;\n\n\t/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }())))\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports) {\n\n\t/*!\n\t * onDomReady.js 1.4.0 (c) 2013 Tubal Martin - MIT license\n\t *\n\t * Specially modified to work with Holder.js\n\t */\n\n\tfunction _onDomReady(win) {\n\t    //Lazy loading fix for Firefox < 3.6\n\t    //http://webreflection.blogspot.com/2009/11/195-chars-to-help-lazy-loading.html\n\t    if (document.readyState == null && document.addEventListener) {\n\t        document.addEventListener(\"DOMContentLoaded\", function DOMContentLoaded() {\n\t            document.removeEventListener(\"DOMContentLoaded\", DOMContentLoaded, false);\n\t            document.readyState = \"complete\";\n\t        }, false);\n\t        document.readyState = \"loading\";\n\t    }\n\t    \n\t    var doc = win.document,\n\t        docElem = doc.documentElement,\n\t    \n\t        LOAD = \"load\",\n\t        FALSE = false,\n\t        ONLOAD = \"on\"+LOAD,\n\t        COMPLETE = \"complete\",\n\t        READYSTATE = \"readyState\",\n\t        ATTACHEVENT = \"attachEvent\",\n\t        DETACHEVENT = \"detachEvent\",\n\t        ADDEVENTLISTENER = \"addEventListener\",\n\t        DOMCONTENTLOADED = \"DOMContentLoaded\",\n\t        ONREADYSTATECHANGE = \"onreadystatechange\",\n\t        REMOVEEVENTLISTENER = \"removeEventListener\",\n\t    \n\t        // W3C Event model\n\t        w3c = ADDEVENTLISTENER in doc,\n\t        _top = FALSE,\n\t    \n\t        // isReady: Is the DOM ready to be used? Set to true once it occurs.\n\t        isReady = FALSE,\n\t    \n\t        // Callbacks pending execution until DOM is ready\n\t        callbacks = [];\n\t    \n\t    // Handle when the DOM is ready\n\t    function ready( fn ) {\n\t        if ( !isReady ) {\n\t    \n\t            // Make sure body exists, at least, in case IE gets a little overzealous (ticket #5443).\n\t            if ( !doc.body ) {\n\t                return defer( ready );\n\t            }\n\t    \n\t            // Remember that the DOM is ready\n\t            isReady = true;\n\t    \n\t            // Execute all callbacks\n\t            while ( fn = callbacks.shift() ) {\n\t                defer( fn );\n\t            }\n\t        }\n\t    }\n\t    \n\t    // The ready event handler\n\t    function completed( event ) {\n\t        // readyState === \"complete\" is good enough for us to call the dom ready in oldIE\n\t        if ( w3c || event.type === LOAD || doc[READYSTATE] === COMPLETE ) {\n\t            detach();\n\t            ready();\n\t        }\n\t    }\n\t    \n\t    // Clean-up method for dom ready events\n\t    function detach() {\n\t        if ( w3c ) {\n\t            doc[REMOVEEVENTLISTENER]( DOMCONTENTLOADED, completed, FALSE );\n\t            win[REMOVEEVENTLISTENER]( LOAD, completed, FALSE );\n\t        } else {\n\t            doc[DETACHEVENT]( ONREADYSTATECHANGE, completed );\n\t            win[DETACHEVENT]( ONLOAD, completed );\n\t        }\n\t    }\n\t    \n\t    // Defers a function, scheduling it to run after the current call stack has cleared.\n\t    function defer( fn, wait ) {\n\t        // Allow 0 to be passed\n\t        setTimeout( fn, +wait >= 0 ? wait : 1 );\n\t    }\n\t    \n\t    // Attach the listeners:\n\t    \n\t    // Catch cases where onDomReady is called after the browser event has already occurred.\n\t    // we once tried to use readyState \"interactive\" here, but it caused issues like the one\n\t    // discovered by ChrisS here: http://bugs.jquery.com/ticket/12282#comment:15\n\t    if ( doc[READYSTATE] === COMPLETE ) {\n\t        // Handle it asynchronously to allow scripts the opportunity to delay ready\n\t        defer( ready );\n\t    \n\t    // Standards-based browsers support DOMContentLoaded\n\t    } else if ( w3c ) {\n\t        // Use the handy event callback\n\t        doc[ADDEVENTLISTENER]( DOMCONTENTLOADED, completed, FALSE );\n\t    \n\t        // A fallback to window.onload, that will always work\n\t        win[ADDEVENTLISTENER]( LOAD, completed, FALSE );\n\t    \n\t    // If IE event model is used\n\t    } else {\n\t        // Ensure firing before onload, maybe late but safe also for iframes\n\t        doc[ATTACHEVENT]( ONREADYSTATECHANGE, completed );\n\t    \n\t        // A fallback to window.onload, that will always work\n\t        win[ATTACHEVENT]( ONLOAD, completed );\n\t    \n\t        // If IE and not a frame\n\t        // continually check to see if the document is ready\n\t        try {\n\t            _top = win.frameElement == null && docElem;\n\t        } catch(e) {}\n\t    \n\t        if ( _top && _top.doScroll ) {\n\t            (function doScrollCheck() {\n\t                if ( !isReady ) {\n\t                    try {\n\t                        // Use the trick by Diego Perini\n\t                        // http://javascript.nwbox.com/IEContentLoaded/\n\t                        _top.doScroll(\"left\");\n\t                    } catch(e) {\n\t                        return defer( doScrollCheck, 50 );\n\t                    }\n\t    \n\t                    // detach all dom ready events\n\t                    detach();\n\t    \n\t                    // and execute any waiting functions\n\t                    ready();\n\t                }\n\t            })();\n\t        }\n\t    }\n\t    \n\t    function onDomReady( fn ) {\n\t        // If DOM is ready, execute the function (async), otherwise wait\n\t        isReady ? defer( fn ) : callbacks.push( fn );\n\t    }\n\t    \n\t    // Add version\n\t    onDomReady.version = \"1.4.0\";\n\t    // Add method to check if DOM is ready\n\t    onDomReady.isReady = function(){\n\t        return isReady;\n\t    };\n\n\t    return onDomReady;\n\t}\n\n\tmodule.exports = typeof window !== \"undefined\" && _onDomReady(window);\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t//Modified version of component/querystring\n\t//Changes: updated dependencies, dot notation parsing, JSHint fixes\n\t//Fork at https://github.com/imsky/querystring\n\n\t/**\n\t * Module dependencies.\n\t */\n\n\tvar encode = encodeURIComponent;\n\tvar decode = decodeURIComponent;\n\tvar trim = __webpack_require__(4);\n\tvar type = __webpack_require__(5);\n\n\tvar arrayRegex = /(\\w+)\\[(\\d+)\\]/;\n\tvar objectRegex = /\\w+\\.\\w+/;\n\n\t/**\n\t * Parse the given query `str`.\n\t *\n\t * @param {String} str\n\t * @return {Object}\n\t * @api public\n\t */\n\n\texports.parse = function(str){\n\t  if ('string' !== typeof str) return {};\n\n\t  str = trim(str);\n\t  if ('' === str) return {};\n\t  if ('?' === str.charAt(0)) str = str.slice(1);\n\n\t  var obj = {};\n\t  var pairs = str.split('&');\n\t  for (var i = 0; i < pairs.length; i++) {\n\t    var parts = pairs[i].split('=');\n\t    var key = decode(parts[0]);\n\t    var m, ctx, prop;\n\n\t    if (m = arrayRegex.exec(key)) {\n\t      obj[m[1]] = obj[m[1]] || [];\n\t      obj[m[1]][m[2]] = decode(parts[1]);\n\t      continue;\n\t    }\n\n\t    if (m = objectRegex.test(key)) {\n\t      m = key.split('.');\n\t      ctx = obj;\n\t      \n\t      while (m.length) {\n\t        prop = m.shift();\n\n\t        if (!prop.length) continue;\n\n\t        if (!ctx[prop]) {\n\t          ctx[prop] = {};\n\t        } else if (ctx[prop] && typeof ctx[prop] !== 'object') {\n\t          break;\n\t        }\n\n\t        if (!m.length) {\n\t          ctx[prop] = decode(parts[1]);\n\t        }\n\n\t        ctx = ctx[prop];\n\t      }\n\n\t      continue;\n\t    }\n\n\t    obj[parts[0]] = null == parts[1] ? '' : decode(parts[1]);\n\t  }\n\n\t  return obj;\n\t};\n\n\t/**\n\t * Stringify the given `obj`.\n\t *\n\t * @param {Object} obj\n\t * @return {String}\n\t * @api public\n\t */\n\n\texports.stringify = function(obj){\n\t  if (!obj) return '';\n\t  var pairs = [];\n\n\t  for (var key in obj) {\n\t    var value = obj[key];\n\n\t    if ('array' == type(value)) {\n\t      for (var i = 0; i < value.length; ++i) {\n\t        pairs.push(encode(key + '[' + i + ']') + '=' + encode(value[i]));\n\t      }\n\t      continue;\n\t    }\n\n\t    pairs.push(encode(key) + '=' + encode(obj[key]));\n\t  }\n\n\t  return pairs.join('&');\n\t};\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports) {\n\n\t\n\texports = module.exports = trim;\n\n\tfunction trim(str){\n\t  return str.replace(/^\\s*|\\s*$/g, '');\n\t}\n\n\texports.left = function(str){\n\t  return str.replace(/^\\s*/, '');\n\t};\n\n\texports.right = function(str){\n\t  return str.replace(/\\s*$/, '');\n\t};\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports) {\n\n\t/**\n\t * toString ref.\n\t */\n\n\tvar toString = Object.prototype.toString;\n\n\t/**\n\t * Return the type of `val`.\n\t *\n\t * @param {Mixed} val\n\t * @return {String}\n\t * @api public\n\t */\n\n\tmodule.exports = function(val){\n\t  switch (toString.call(val)) {\n\t    case '[object Date]': return 'date';\n\t    case '[object RegExp]': return 'regexp';\n\t    case '[object Arguments]': return 'arguments';\n\t    case '[object Array]': return 'array';\n\t    case '[object Error]': return 'error';\n\t  }\n\n\t  if (val === null) return 'null';\n\t  if (val === undefined) return 'undefined';\n\t  if (val !== val) return 'nan';\n\t  if (val && val.nodeType === 1) return 'element';\n\n\t  if (isBuffer(val)) return 'buffer';\n\n\t  val = val.valueOf\n\t    ? val.valueOf()\n\t    : Object.prototype.valueOf.apply(val);\n\n\t  return typeof val;\n\t};\n\n\t// code borrowed from https://github.com/feross/is-buffer/blob/master/index.js\n\tfunction isBuffer(obj) {\n\t  return !!(obj != null &&\n\t    (obj._isBuffer || // For Safari 5-7 (missing Object.prototype.constructor)\n\t      (obj.constructor &&\n\t      typeof obj.constructor.isBuffer === 'function' &&\n\t      obj.constructor.isBuffer(obj))\n\t    ))\n\t}\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports) {\n\n\tvar SceneGraph = function(sceneProperties) {\n\t    var nodeCount = 1;\n\n\t    //todo: move merge to helpers section\n\t    function merge(parent, child) {\n\t        for (var prop in child) {\n\t            parent[prop] = child[prop];\n\t        }\n\t        return parent;\n\t    }\n\n\t    var SceneNode = function(name) {\n\t        nodeCount++;\n\t        this.parent = null;\n\t        this.children = {};\n\t        this.id = nodeCount;\n\t        this.name = 'n' + nodeCount;\n\t        if (typeof name !== 'undefined') {\n\t            this.name = name;\n\t        }\n\t        this.x = this.y = this.z = 0;\n\t        this.width = this.height = 0;\n\t    };\n\n\t    SceneNode.prototype.resize = function(width, height) {\n\t        if (width != null) {\n\t            this.width = width;\n\t        }\n\t        if (height != null) {\n\t            this.height = height;\n\t        }\n\t    };\n\n\t    SceneNode.prototype.moveTo = function(x, y, z) {\n\t        this.x = x != null ? x : this.x;\n\t        this.y = y != null ? y : this.y;\n\t        this.z = z != null ? z : this.z;\n\t    };\n\n\t    SceneNode.prototype.add = function(child) {\n\t        var name = child.name;\n\t        if (typeof this.children[name] === 'undefined') {\n\t            this.children[name] = child;\n\t            child.parent = this;\n\t        } else {\n\t            throw 'SceneGraph: child already exists: ' + name;\n\t        }\n\t    };\n\n\t    var RootNode = function() {\n\t        SceneNode.call(this, 'root');\n\t        this.properties = sceneProperties;\n\t    };\n\n\t    RootNode.prototype = new SceneNode();\n\n\t    var Shape = function(name, props) {\n\t        SceneNode.call(this, name);\n\t        this.properties = {\n\t            'fill': '#000000'\n\t        };\n\t        if (typeof props !== 'undefined') {\n\t            merge(this.properties, props);\n\t        } else if (typeof name !== 'undefined' && typeof name !== 'string') {\n\t            throw 'SceneGraph: invalid node name';\n\t        }\n\t    };\n\n\t    Shape.prototype = new SceneNode();\n\n\t    var Group = function() {\n\t        Shape.apply(this, arguments);\n\t        this.type = 'group';\n\t    };\n\n\t    Group.prototype = new Shape();\n\n\t    var Rect = function() {\n\t        Shape.apply(this, arguments);\n\t        this.type = 'rect';\n\t    };\n\n\t    Rect.prototype = new Shape();\n\n\t    var Text = function(text) {\n\t        Shape.call(this);\n\t        this.type = 'text';\n\t        this.properties.text = text;\n\t    };\n\n\t    Text.prototype = new Shape();\n\n\t    var root = new RootNode();\n\n\t    this.Shape = {\n\t        'Rect': Rect,\n\t        'Text': Text,\n\t        'Group': Group\n\t    };\n\n\t    this.root = root;\n\t    return this;\n\t};\n\n\tmodule.exports = SceneGraph;\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports) {\n\n\t/* WEBPACK VAR INJECTION */(function(global) {/**\n\t * Shallow object clone and merge\n\t *\n\t * @param a Object A\n\t * @param b Object B\n\t * @returns {Object} New object with all of A's properties, and all of B's properties, overwriting A's properties\n\t */\n\texports.extend = function(a, b) {\n\t    var c = {};\n\t    for (var x in a) {\n\t        if (a.hasOwnProperty(x)) {\n\t            c[x] = a[x];\n\t        }\n\t    }\n\t    if (b != null) {\n\t        for (var y in b) {\n\t            if (b.hasOwnProperty(y)) {\n\t                c[y] = b[y];\n\t            }\n\t        }\n\t    }\n\t    return c;\n\t};\n\n\t/**\n\t * Takes a k/v list of CSS properties and returns a rule\n\t *\n\t * @param props CSS properties object\n\t */\n\texports.cssProps = function(props) {\n\t    var ret = [];\n\t    for (var p in props) {\n\t        if (props.hasOwnProperty(p)) {\n\t            ret.push(p + ':' + props[p]);\n\t        }\n\t    }\n\t    return ret.join(';');\n\t};\n\n\t/**\n\t * Encodes HTML entities in a string\n\t *\n\t * @param str Input string\n\t */\n\texports.encodeHtmlEntity = function(str) {\n\t    var buf = [];\n\t    var charCode = 0;\n\t    for (var i = str.length - 1; i >= 0; i--) {\n\t        charCode = str.charCodeAt(i);\n\t        if (charCode > 128) {\n\t            buf.unshift(['&#', charCode, ';'].join(''));\n\t        } else {\n\t            buf.unshift(str[i]);\n\t        }\n\t    }\n\t    return buf.join('');\n\t};\n\n\t/**\n\t * Checks if an image exists\n\t *\n\t * @param src URL of image\n\t * @param callback Callback to call once image status has been found\n\t */\n\texports.imageExists = function(src, callback) {\n\t    var image = new Image();\n\t    image.onerror = function() {\n\t        callback.call(this, false);\n\t    };\n\t    image.onload = function() {\n\t        callback.call(this, true);\n\t    };\n\t    image.src = src;\n\t};\n\n\t/**\n\t * Decodes HTML entities in a string\n\t *\n\t * @param str Input string\n\t */\n\texports.decodeHtmlEntity = function(str) {\n\t    return str.replace(/&#(\\d+);/g, function(match, dec) {\n\t        return String.fromCharCode(dec);\n\t    });\n\t};\n\n\n\t/**\n\t * Returns an element's dimensions if it's visible, `false` otherwise.\n\t *\n\t * @param el DOM element\n\t */\n\texports.dimensionCheck = function(el) {\n\t    var dimensions = {\n\t        height: el.clientHeight,\n\t        width: el.clientWidth\n\t    };\n\n\t    if (dimensions.height && dimensions.width) {\n\t        return dimensions;\n\t    } else {\n\t        return false;\n\t    }\n\t};\n\n\n\t/**\n\t * Returns true if value is truthy or if it is \"semantically truthy\"\n\t * @param val\n\t */\n\texports.truthy = function(val) {\n\t    if (typeof val === 'string') {\n\t        return val === 'true' || val === 'yes' || val === '1' || val === 'on' || val === '';\n\t    }\n\t    return !!val;\n\t};\n\n\t/**\n\t * Parses input into a well-formed CSS color\n\t * @param val\n\t */\n\texports.parseColor = function(val) {\n\t    var hexre = /(^(?:#?)[0-9a-f]{6}$)|(^(?:#?)[0-9a-f]{3}$)/i;\n\t    var rgbre = /^rgb\\((\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*\\)$/;\n\t    var rgbare = /^rgba\\((\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(0\\.\\d{1,}|1)\\)$/;\n\n\t    var match = val.match(hexre);\n\t    var retval;\n\n\t    if (match !== null) {\n\t        retval = match[1] || match[2];\n\t        if (retval[0] !== '#') {\n\t            return '#' + retval;\n\t        } else {\n\t            return retval;\n\t        }\n\t    }\n\n\t    match = val.match(rgbre);\n\n\t    if (match !== null) {\n\t        retval = 'rgb(' + match.slice(1).join(',') + ')';\n\t        return retval;\n\t    }\n\n\t    match = val.match(rgbare);\n\n\t    if (match !== null) {\n\t        retval = 'rgba(' + match.slice(1).join(',') + ')';\n\t        return retval;\n\t    }\n\n\t    return null;\n\t};\n\n\t/**\n\t * Provides the correct scaling ratio for canvas drawing operations on HiDPI screens (e.g. Retina displays)\n\t */\n\texports.canvasRatio = function () {\n\t    var devicePixelRatio = 1;\n\t    var backingStoreRatio = 1;\n\n\t    if (global.document) {\n\t        var canvas = global.document.createElement('canvas');\n\t        if (canvas.getContext) {\n\t            var ctx = canvas.getContext('2d');\n\t            devicePixelRatio = global.devicePixelRatio || 1;\n\t            backingStoreRatio = ctx.webkitBackingStorePixelRatio || ctx.mozBackingStorePixelRatio || ctx.msBackingStorePixelRatio || ctx.oBackingStorePixelRatio || ctx.backingStorePixelRatio || 1;\n\t        }\n\t    }\n\n\t    return devicePixelRatio / backingStoreRatio;\n\t};\n\t/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }())))\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(global) {var DOM = __webpack_require__(9);\n\n\tvar SVG_NS = 'http://www.w3.org/2000/svg';\n\tvar NODE_TYPE_COMMENT = 8;\n\n\t/**\n\t * Generic SVG element creation function\n\t *\n\t * @param svg SVG context, set to null if new\n\t * @param width Document width\n\t * @param height Document height\n\t */\n\texports.initSVG = function(svg, width, height) {\n\t    var defs, style, initialize = false;\n\n\t    if (svg && svg.querySelector) {\n\t        style = svg.querySelector('style');\n\t        if (style === null) {\n\t            initialize = true;\n\t        }\n\t    } else {\n\t        svg = DOM.newEl('svg', SVG_NS);\n\t        initialize = true;\n\t    }\n\n\t    if (initialize) {\n\t        defs = DOM.newEl('defs', SVG_NS);\n\t        style = DOM.newEl('style', SVG_NS);\n\t        DOM.setAttr(style, {\n\t            'type': 'text/css'\n\t        });\n\t        defs.appendChild(style);\n\t        svg.appendChild(defs);\n\t    }\n\n\t    //IE throws an exception if this is set and Chrome requires it to be set\n\t    if (svg.webkitMatchesSelector) {\n\t        svg.setAttribute('xmlns', SVG_NS);\n\t    }\n\n\t    //Remove comment nodes\n\t    for (var i = 0; i < svg.childNodes.length; i++) {\n\t        if (svg.childNodes[i].nodeType === NODE_TYPE_COMMENT) {\n\t            svg.removeChild(svg.childNodes[i]);\n\t        }\n\t    }\n\n\t    //Remove CSS\n\t    while (style.childNodes.length) {\n\t        style.removeChild(style.childNodes[0]);\n\t    }\n\n\t    DOM.setAttr(svg, {\n\t        'width': width,\n\t        'height': height,\n\t        'viewBox': '0 0 ' + width + ' ' + height,\n\t        'preserveAspectRatio': 'none'\n\t    });\n\n\t    return svg;\n\t};\n\n\t/**\n\t * Converts serialized SVG to a string suitable for data URI use\n\t * @param svgString Serialized SVG string\n\t * @param [base64] Use base64 encoding for data URI\n\t */\n\texports.svgStringToDataURI = function() {\n\t    var rawPrefix = 'data:image/svg+xml;charset=UTF-8,';\n\t    var base64Prefix = 'data:image/svg+xml;charset=UTF-8;base64,';\n\n\t    return function(svgString, base64) {\n\t        if (base64) {\n\t            return base64Prefix + btoa(global.unescape(encodeURIComponent(svgString)));\n\t        } else {\n\t            return rawPrefix + encodeURIComponent(svgString);\n\t        }\n\t    };\n\t}();\n\n\t/**\n\t * Returns serialized SVG with XML processing instructions\n\t *\n\t * @param svg SVG context\n\t * @param stylesheets CSS stylesheets to include\n\t */\n\texports.serializeSVG = function(svg, engineSettings) {\n\t    if (!global.XMLSerializer) return;\n\t    var serializer = new XMLSerializer();\n\t    var svgCSS = '';\n\t    var stylesheets = engineSettings.stylesheets;\n\n\t    //External stylesheets: Processing Instruction method\n\t    if (engineSettings.svgXMLStylesheet) {\n\t        var xml = DOM.createXML();\n\t        //Add <?xml-stylesheet ?> directives\n\t        for (var i = stylesheets.length - 1; i >= 0; i--) {\n\t            var csspi = xml.createProcessingInstruction('xml-stylesheet', 'href=\"' + stylesheets[i] + '\" rel=\"stylesheet\"');\n\t            xml.insertBefore(csspi, xml.firstChild);\n\t        }\n\n\t        xml.removeChild(xml.documentElement);\n\t        svgCSS = serializer.serializeToString(xml);\n\t    }\n\n\t    var svgText = serializer.serializeToString(svg);\n\t    svgText = svgText.replace(/\\&amp;(\\#[0-9]{2,}\\;)/g, '&$1');\n\t    return svgCSS + svgText;\n\t};\n\n\t/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }())))\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports) {\n\n\t/* WEBPACK VAR INJECTION */(function(global) {/**\n\t * Generic new DOM element function\n\t *\n\t * @param tag Tag to create\n\t * @param namespace Optional namespace value\n\t */\n\texports.newEl = function(tag, namespace) {\n\t    if (!global.document) return;\n\n\t    if (namespace == null) {\n\t        return global.document.createElement(tag);\n\t    } else {\n\t        return global.document.createElementNS(namespace, tag);\n\t    }\n\t};\n\n\t/**\n\t * Generic setAttribute function\n\t *\n\t * @param el Reference to DOM element\n\t * @param attrs Object with attribute keys and values\n\t */\n\texports.setAttr = function (el, attrs) {\n\t    for (var a in attrs) {\n\t        el.setAttribute(a, attrs[a]);\n\t    }\n\t};\n\n\t/**\n\t * Creates a XML document\n\t * @private\n\t */\n\texports.createXML = function() {\n\t    if (!global.DOMParser) return;\n\t    return new DOMParser().parseFromString('<xml />', 'application/xml');\n\t};\n\n\t/**\n\t * Converts a value into an array of DOM nodes\n\t *\n\t * @param val A string, a NodeList, a Node, or an HTMLCollection\n\t */\n\texports.getNodeArray = function(val) {\n\t    var retval = null;\n\t    if (typeof(val) == 'string') {\n\t        retval = document.querySelectorAll(val);\n\t    } else if (global.NodeList && val instanceof global.NodeList) {\n\t        retval = val;\n\t    } else if (global.Node && val instanceof global.Node) {\n\t        retval = [val];\n\t    } else if (global.HTMLCollection && val instanceof global.HTMLCollection) {\n\t        retval = val;\n\t    } else if (val instanceof Array) {\n\t        retval = val;\n\t    } else if (val === null) {\n\t        retval = [];\n\t    }\n\n\t    retval = Array.prototype.slice.call(retval);\n\n\t    return retval;\n\t};\n\n\t/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }())))\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports) {\n\n\tvar Color = function(color, options) {\n\t    //todo: support rgba, hsla, and rrggbbaa notation\n\t    //todo: use CIELAB internally\n\t    //todo: add clamp function (with sign)\n\t    if (typeof color !== 'string') return;\n\n\t    this.original = color;\n\n\t    if (color.charAt(0) === '#') {\n\t        color = color.slice(1);\n\t    }\n\n\t    if (/[^a-f0-9]+/i.test(color)) return;\n\n\t    if (color.length === 3) {\n\t        color = color.replace(/./g, '$&$&');\n\t    }\n\n\t    if (color.length !== 6) return;\n\n\t    this.alpha = 1;\n\n\t    if (options && options.alpha) {\n\t        this.alpha = options.alpha;\n\t    }\n\n\t    this.set(parseInt(color, 16));\n\t};\n\n\t//todo: jsdocs\n\tColor.rgb2hex = function(r, g, b) {\n\t    function format (decimal) {\n\t        var hex = (decimal | 0).toString(16);\n\t        if (decimal < 16) {\n\t            hex = '0' + hex;\n\t        }\n\t        return hex;\n\t    }\n\n\t    return [r, g, b].map(format).join('');\n\t};\n\n\t//todo: jsdocs\n\tColor.hsl2rgb = function (h, s, l) {\n\t    var H = h / 60;\n\t    var C = (1 - Math.abs(2 * l - 1)) * s;\n\t    var X = C * (1 - Math.abs(parseInt(H) % 2 - 1));\n\t    var m = l - (C / 2);\n\n\t    var r = 0, g = 0, b = 0;\n\n\t    if (H >= 0 && H < 1) {\n\t        r = C;\n\t        g = X;\n\t    } else if (H >= 1 && H < 2) {\n\t        r = X;\n\t        g = C;\n\t    } else if (H >= 2 && H < 3) {\n\t        g = C;\n\t        b = X;\n\t    } else if (H >= 3 && H < 4) {\n\t        g = X;\n\t        b = C;\n\t    } else if (H >= 4 && H < 5) {\n\t        r = X;\n\t        b = C;\n\t    } else if (H >= 5 && H < 6) {\n\t        r = C;\n\t        b = X;\n\t    }\n\n\t    r += m;\n\t    g += m;\n\t    b += m;\n\n\t    r = parseInt(r * 255);\n\t    g = parseInt(g * 255);\n\t    b = parseInt(b * 255);\n\n\t    return [r, g, b];\n\t};\n\n\t/**\n\t * Sets the color from a raw RGB888 integer\n\t * @param raw RGB888 representation of color\n\t */\n\t//todo: refactor into a static method\n\t//todo: factor out individual color spaces\n\t//todo: add HSL, CIELAB, and CIELUV\n\tColor.prototype.set = function (val) {\n\t    this.raw = val;\n\n\t    var r = (this.raw & 0xFF0000) >> 16;\n\t    var g = (this.raw & 0x00FF00) >> 8;\n\t    var b = (this.raw & 0x0000FF);\n\n\t    // BT.709\n\t    var y = 0.2126 * r + 0.7152 * g + 0.0722 * b;\n\t    var u = -0.09991 * r - 0.33609 * g + 0.436 * b;\n\t    var v = 0.615 * r - 0.55861 * g - 0.05639 * b;\n\n\t    this.rgb = {\n\t        r: r,\n\t        g: g,\n\t        b: b\n\t    };\n\n\t    this.yuv = {\n\t        y: y,\n\t        u: u,\n\t        v: v\n\t    };\n\n\t    return this;\n\t};\n\n\t/**\n\t * Lighten or darken a color\n\t * @param multiplier Amount to lighten or darken (-1 to 1)\n\t */\n\tColor.prototype.lighten = function(multiplier) {\n\t    var cm = Math.min(1, Math.max(0, Math.abs(multiplier))) * (multiplier < 0 ? -1 : 1);\n\t    var bm = (255 * cm) | 0;\n\t    var cr = Math.min(255, Math.max(0, this.rgb.r + bm));\n\t    var cg = Math.min(255, Math.max(0, this.rgb.g + bm));\n\t    var cb = Math.min(255, Math.max(0, this.rgb.b + bm));\n\t    var hex = Color.rgb2hex(cr, cg, cb);\n\t    return new Color(hex);\n\t};\n\n\t/**\n\t * Output color in hex format\n\t * @param addHash Add a hash character to the beginning of the output\n\t */\n\tColor.prototype.toHex = function(addHash) {\n\t    return (addHash ? '#' : '') + this.raw.toString(16);\n\t};\n\n\t/**\n\t * Returns whether or not current color is lighter than another color\n\t * @param color Color to compare against\n\t */\n\tColor.prototype.lighterThan = function(color) {\n\t    if (!(color instanceof Color)) {\n\t        color = new Color(color);\n\t    }\n\n\t    return this.yuv.y > color.yuv.y;\n\t};\n\n\t/**\n\t * Returns the result of mixing current color with another color\n\t * @param color Color to mix with\n\t * @param multiplier How much to mix with the other color\n\t */\n\t/*\n\tColor.prototype.mix = function (color, multiplier) {\n\t    if (!(color instanceof Color)) {\n\t        color = new Color(color);\n\t    }\n\n\t    var r = this.rgb.r;\n\t    var g = this.rgb.g;\n\t    var b = this.rgb.b;\n\t    var a = this.alpha;\n\n\t    var m = typeof multiplier !== 'undefined' ? multiplier : 0.5;\n\n\t    //todo: write a lerp function\n\t    r = r + m * (color.rgb.r - r);\n\t    g = g + m * (color.rgb.g - g);\n\t    b = b + m * (color.rgb.b - b);\n\t    a = a + m * (color.alpha - a);\n\n\t    return new Color(Color.rgbToHex(r, g, b), {\n\t        'alpha': a\n\t    });\n\t};\n\t*/\n\n\t/**\n\t * Returns the result of blending another color on top of current color with alpha\n\t * @param color Color to blend on top of current color, i.e. \"Ca\"\n\t */\n\t//todo: see if .blendAlpha can be merged into .mix\n\tColor.prototype.blendAlpha = function(color) {\n\t    if (!(color instanceof Color)) {\n\t        color = new Color(color);\n\t    }\n\n\t    var Ca = color;\n\t    var Cb = this;\n\n\t    //todo: write alpha blending function\n\t    var r = Ca.alpha * Ca.rgb.r + (1 - Ca.alpha) * Cb.rgb.r;\n\t    var g = Ca.alpha * Ca.rgb.g + (1 - Ca.alpha) * Cb.rgb.g;\n\t    var b = Ca.alpha * Ca.rgb.b + (1 - Ca.alpha) * Cb.rgb.b;\n\n\t    return new Color(Color.rgb2hex(r, g, b));\n\t};\n\n\tmodule.exports = Color;\n\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = {\n\t  'version': '2.9.6',\n\t  'svg_ns': 'http://www.w3.org/2000/svg'\n\t};\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar shaven = __webpack_require__(13);\n\n\tvar SVG = __webpack_require__(8);\n\tvar constants = __webpack_require__(11);\n\tvar utils = __webpack_require__(7);\n\n\tvar SVG_NS = constants.svg_ns;\n\n\tvar templates = {\n\t  'element': function (options) {\n\t    var tag = options.tag;\n\t    var content = options.content || '';\n\t    delete options.tag;\n\t    delete options.content;\n\t    return  [tag, content, options];\n\t  }\n\t};\n\n\t//todo: deprecate tag arg, infer tag from shape object\n\tfunction convertShape (shape, tag) {\n\t  return templates.element({\n\t    'tag': tag,\n\t    'width': shape.width,\n\t    'height': shape.height,\n\t    'fill': shape.properties.fill\n\t  });\n\t}\n\n\tfunction textCss (properties) {\n\t  return utils.cssProps({\n\t    'fill': properties.fill,\n\t    'font-weight': properties.font.weight,\n\t    'font-family': properties.font.family + ', monospace',\n\t    'font-size': properties.font.size + properties.font.units\n\t  });\n\t}\n\n\tfunction outlinePath (bgWidth, bgHeight, outlineWidth) {\n\t  var outlineOffsetWidth = outlineWidth / 2;\n\n\t  return [\n\t    'M', outlineOffsetWidth, outlineOffsetWidth,\n\t    'H', bgWidth - outlineOffsetWidth,\n\t    'V', bgHeight - outlineOffsetWidth,\n\t    'H', outlineOffsetWidth,\n\t    'V', 0,\n\t    'M', 0, outlineOffsetWidth,\n\t    'L', bgWidth, bgHeight - outlineOffsetWidth,\n\t    'M', 0, bgHeight - outlineOffsetWidth,\n\t    'L', bgWidth, outlineOffsetWidth\n\t  ].join(' ');\n\t}\n\n\tmodule.exports = function (sceneGraph, renderSettings) {\n\t  var engineSettings = renderSettings.engineSettings;\n\t  var stylesheets = engineSettings.stylesheets;\n\t  var stylesheetXml = stylesheets.map(function (stylesheet) {\n\t    return '<?xml-stylesheet rel=\"stylesheet\" href=\"' + stylesheet + '\"?>';\n\t  }).join('\\n');\n\n\t  var holderId = 'holder_' + Number(new Date()).toString(16);\n\n\t  var root = sceneGraph.root;\n\t  var textGroup = root.children.holderTextGroup;\n\n\t  var css = '#' + holderId + ' text { ' + textCss(textGroup.properties) + ' } ';\n\n\t  // push text down to be equally vertically aligned with canvas renderer\n\t  textGroup.y += textGroup.textPositionData.boundingBox.height * 0.8;\n\n\t  var wordTags = [];\n\n\t  Object.keys(textGroup.children).forEach(function (lineKey) {\n\t    var line = textGroup.children[lineKey];\n\n\t    Object.keys(line.children).forEach(function (wordKey) {\n\t      var word = line.children[wordKey];\n\t      var x = textGroup.x + line.x + word.x;\n\t      var y = textGroup.y + line.y + word.y;\n\t      var wordTag = templates.element({\n\t        'tag': 'text',\n\t        'content': word.properties.text,\n\t        'x': x,\n\t        'y': y\n\t      });\n\n\t      wordTags.push(wordTag);\n\t    });\n\t  });\n\n\t  var text = templates.element({\n\t    'tag': 'g',\n\t    'content': wordTags\n\t  });\n\n\t  var outline = null;\n\n\t  if (root.children.holderBg.properties.outline) {\n\t    var outlineProperties = root.children.holderBg.properties.outline;\n\t    outline = templates.element({\n\t      'tag': 'path',\n\t      'd': outlinePath(root.children.holderBg.width, root.children.holderBg.height, outlineProperties.width),\n\t      'stroke-width': outlineProperties.width,\n\t      'stroke': outlineProperties.fill,\n\t      'fill': 'none'\n\t    });\n\t  }\n\n\t  var bg = convertShape(root.children.holderBg, 'rect');\n\n\t  var sceneContent = [];\n\n\t  sceneContent.push(bg);\n\t  if (outlineProperties) {\n\t    sceneContent.push(outline);\n\t  }\n\t  sceneContent.push(text);\n\n\t  var scene = templates.element({\n\t    'tag': 'g',\n\t    'id': holderId,\n\t    'content': sceneContent\n\t  });\n\n\t  var style = templates.element({\n\t    'tag': 'style',\n\t    //todo: figure out how to add CDATA directive\n\t    'content': css,\n\t    'type': 'text/css'\n\t  });\n\n\t  var defs = templates.element({\n\t    'tag': 'defs',\n\t    'content': style\n\t  });\n\n\t  var svg = templates.element({\n\t    'tag': 'svg',\n\t    'content': [defs, scene],\n\t    'width': root.properties.width,\n\t    'height': root.properties.height,\n\t    'xmlns': SVG_NS,\n\t    'viewBox': [0, 0, root.properties.width, root.properties.height].join(' '),\n\t    'preserveAspectRatio': 'none'\n\t  });\n\n\t  var output = shaven(svg);\n\n\t  if (/\\&amp;(x)?#[0-9A-Fa-f]/.test(output[0])) {\n\t    output[0] = output[0].replace(/&amp;#/gm, '&#');\n\t  }\n\t  \n\t  output = stylesheetXml + output[0];\n\n\t  var svgString = SVG.svgStringToDataURI(output, renderSettings.mode === 'background');\n\t  return svgString;\n\t};\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar escape = __webpack_require__(14)\n\n\t// TODO: remove namespace\n\n\tmodule.exports = function shaven (array, namespace, returnObject) {\n\n\t\t'use strict'\n\n\t\tvar i = 1\n\t\tvar doesEscape = true\n\t\tvar HTMLString\n\t\tvar attributeKey\n\t\tvar callback\n\t\tvar key\n\n\n\t\treturnObject = returnObject || {}\n\n\n\t\tfunction createElement (sugarString) {\n\n\t\t\tvar tags = sugarString.match(/^[\\w-]+/)\n\t\t\tvar element = {\n\t\t\t\ttag: tags ? tags[0] : 'div',\n\t\t\t\tattr: {},\n\t\t\t\tchildren: []\n\t\t\t}\n\t\t\tvar id = sugarString.match(/#([\\w-]+)/)\n\t\t\tvar reference = sugarString.match(/\\$([\\w-]+)/)\n\t\t\tvar classNames = sugarString.match(/\\.[\\w-]+/g)\n\n\n\t\t\t// Assign id if is set\n\t\t\tif (id) {\n\t\t\t\telement.attr.id = id[1]\n\n\t\t\t\t// Add element to the return object\n\t\t\t\treturnObject[id[1]] = element\n\t\t\t}\n\n\t\t\tif (reference)\n\t\t\t\treturnObject[reference[1]] = element\n\n\t\t\tif (classNames)\n\t\t\t\telement.attr.class = classNames.join(' ').replace(/\\./g, '')\n\n\t\t\tif (sugarString.match(/&$/g))\n\t\t\t\tdoesEscape = false\n\n\t\t\treturn element\n\t\t}\n\n\t\tfunction replacer (key, value) {\n\n\t\t\tif (value === null || value === false || value === undefined)\n\t\t\t\treturn\n\n\t\t\tif (typeof value !== 'string' && typeof value !== 'object')\n\t\t\t\treturn String(value)\n\n\t\t\treturn value\n\t\t}\n\n\t\tfunction escapeAttribute (string) {\n\t\t\treturn (string || string === 0) ?\n\t\t\t\tString(string)\n\t\t\t\t\t.replace(/&/g, '&amp;')\n\t\t\t\t\t.replace(/\"/g, '&quot;') :\n\t\t\t\t''\n\t\t}\n\n\t\tfunction escapeHTML (string) {\n\t\t\treturn String(string)\n\t\t\t\t.replace(/&/g, '&amp;')\n\t\t\t\t.replace(/\"/g, '&quot;')\n\t\t\t\t.replace(/'/g, '&apos;')\n\t\t\t\t.replace(/</g, '&lt;')\n\t\t\t\t.replace(/>/g, '&gt;')\n\t\t}\n\n\n\t\tif (typeof array[0] === 'string')\n\t\t\tarray[0] = createElement(array[0])\n\n\t\telse if (Array.isArray(array[0]))\n\t\t\ti = 0\n\n\t\telse\n\t\t\tthrow new Error(\n\t\t\t\t'First element of array must be a string, ' +\n\t\t\t\t'or an array and not ' + JSON.stringify(array[0])\n\t\t\t)\n\n\n\t\tfor (; i < array.length; i++) {\n\n\t\t\t// Don't render element if value is false or null\n\t\t\tif (array[i] === false || array[i] === null) {\n\t\t\t\tarray[0] = false\n\t\t\t\tbreak\n\t\t\t}\n\n\t\t\t// Continue with next array value if current value is undefined or true\n\t\t\telse if (array[i] === undefined || array[i] === true) {\n\t\t\t\tcontinue\n\t\t\t}\n\n\t\t\telse if (typeof array[i] === 'string') {\n\t\t\t\tif (doesEscape)\n\t\t\t\t\tarray[i] = escapeHTML(array[i])\n\n\t\t\t\tarray[0].children.push(array[i])\n\t\t\t}\n\n\t\t\telse if (typeof array[i] === 'number') {\n\n\t\t\t\tarray[0].children.push(array[i])\n\t\t\t}\n\n\t\t\telse if (Array.isArray(array[i])) {\n\n\t\t\t\tif (Array.isArray(array[i][0])) {\n\t\t\t\t\tarray[i].reverse().forEach(function (subArray) {\n\t\t\t\t\t\tarray.splice(i + 1, 0, subArray)\n\t\t\t\t\t})\n\n\t\t\t\t\tif (i !== 0)\n\t\t\t\t\t\tcontinue\n\t\t\t\t\ti++\n\t\t\t\t}\n\n\t\t\t\tshaven(array[i], namespace, returnObject)\n\n\t\t\t\tif (array[i][0])\n\t\t\t\t\tarray[0].children.push(array[i][0])\n\t\t\t}\n\n\t\t\telse if (typeof array[i] === 'function')\n\t\t\t\tcallback = array[i]\n\n\n\t\t\telse if (typeof array[i] === 'object') {\n\t\t\t\tfor (attributeKey in array[i])\n\t\t\t\t\tif (array[i].hasOwnProperty(attributeKey))\n\t\t\t\t\t\tif (array[i][attributeKey] !== null &&\n\t\t\t\t\t\t\tarray[i][attributeKey] !== false)\n\t\t\t\t\t\t\tif (attributeKey === 'style' &&\n\t\t\t\t\t\t\t\ttypeof array[i][attributeKey] === 'object')\n\t\t\t\t\t\t\t\tarray[0].attr[attributeKey] = JSON\n\t\t\t\t\t\t\t\t\t.stringify(array[i][attributeKey], replacer)\n\t\t\t\t\t\t\t\t\t.slice(2, -2)\n\t\t\t\t\t\t\t\t\t.replace(/\",\"/g, ';')\n\t\t\t\t\t\t\t\t\t.replace(/\":\"/g, ':')\n\t\t\t\t\t\t\t\t\t.replace(/\\\\\"/g, '\\'')\n\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tarray[0].attr[attributeKey] = array[i][attributeKey]\n\t\t\t}\n\n\t\t\telse\n\t\t\t\tthrow new TypeError('\"' + array[i] + '\" is not allowed as a value.')\n\t\t}\n\n\n\t\tif (array[0] !== false) {\n\n\t\t\tHTMLString = '<' + array[0].tag\n\n\t\t\tfor (key in array[0].attr)\n\t\t\t\tif (array[0].attr.hasOwnProperty(key))\n\t\t\t\t\tHTMLString += ' ' + key + '=\"' +\n\t\t\t\t\t\tescapeAttribute(array[0].attr[key]) + '\"'\n\n\t\t\tHTMLString += '>'\n\n\t\t\tarray[0].children.forEach(function (child) {\n\t\t\t\tHTMLString += child\n\t\t\t})\n\n\t\t\tHTMLString += '</' + array[0].tag + '>'\n\n\t\t\tarray[0] = HTMLString\n\t\t}\n\n\t\t// Return root element on index 0\n\t\treturnObject[0] = array[0]\n\n\t\tif (callback)\n\t\t\tcallback(array[0])\n\n\t\t// returns object containing all elements with an id and the root element\n\t\treturn returnObject\n\t}\n\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports) {\n\n\t/*!\n\t * escape-html\n\t * Copyright(c) 2012-2013 TJ Holowaychuk\n\t * Copyright(c) 2015 Andreas Lubbe\n\t * Copyright(c) 2015 Tiancheng \"Timothy\" Gu\n\t * MIT Licensed\n\t */\n\n\t'use strict';\n\n\t/**\n\t * Module variables.\n\t * @private\n\t */\n\n\tvar matchHtmlRegExp = /[\"'&<>]/;\n\n\t/**\n\t * Module exports.\n\t * @public\n\t */\n\n\tmodule.exports = escapeHtml;\n\n\t/**\n\t * Escape special characters in the given string of html.\n\t *\n\t * @param  {string} string The string to escape for inserting into HTML\n\t * @return {string}\n\t * @public\n\t */\n\n\tfunction escapeHtml(string) {\n\t  var str = '' + string;\n\t  var match = matchHtmlRegExp.exec(str);\n\n\t  if (!match) {\n\t    return str;\n\t  }\n\n\t  var escape;\n\t  var html = '';\n\t  var index = 0;\n\t  var lastIndex = 0;\n\n\t  for (index = match.index; index < str.length; index++) {\n\t    switch (str.charCodeAt(index)) {\n\t      case 34: // \"\n\t        escape = '&quot;';\n\t        break;\n\t      case 38: // &\n\t        escape = '&amp;';\n\t        break;\n\t      case 39: // '\n\t        escape = '&#39;';\n\t        break;\n\t      case 60: // <\n\t        escape = '&lt;';\n\t        break;\n\t      case 62: // >\n\t        escape = '&gt;';\n\t        break;\n\t      default:\n\t        continue;\n\t    }\n\n\t    if (lastIndex !== index) {\n\t      html += str.substring(lastIndex, index);\n\t    }\n\n\t    lastIndex = index + 1;\n\t    html += escape;\n\t  }\n\n\t  return lastIndex !== index\n\t    ? html + str.substring(lastIndex, index)\n\t    : html;\n\t}\n\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar DOM = __webpack_require__(9);\n\tvar utils = __webpack_require__(7);\n\n\tmodule.exports = (function() {\n\t    var canvas = DOM.newEl('canvas');\n\t    var ctx = null;\n\n\t    return function(sceneGraph) {\n\t        if (ctx == null) {\n\t            ctx = canvas.getContext('2d');\n\t        }\n\n\t        var dpr = utils.canvasRatio();\n\t        var root = sceneGraph.root;\n\t        canvas.width = dpr * root.properties.width;\n\t        canvas.height = dpr * root.properties.height ;\n\t        ctx.textBaseline = 'middle';\n\n\t        var bg = root.children.holderBg;\n\t        var bgWidth = dpr * bg.width;\n\t        var bgHeight = dpr * bg.height;\n\t        //todo: parametrize outline width (e.g. in scene object)\n\t        var outlineWidth = 2;\n\t        var outlineOffsetWidth = outlineWidth / 2;\n\n\t        ctx.fillStyle = bg.properties.fill;\n\t        ctx.fillRect(0, 0, bgWidth, bgHeight);\n\n\t        if (bg.properties.outline) {\n\t            //todo: abstract this into a method\n\t            ctx.strokeStyle = bg.properties.outline.fill;\n\t            ctx.lineWidth = bg.properties.outline.width;\n\t            ctx.moveTo(outlineOffsetWidth, outlineOffsetWidth);\n\t            // TL, TR, BR, BL\n\t            ctx.lineTo(bgWidth - outlineOffsetWidth, outlineOffsetWidth);\n\t            ctx.lineTo(bgWidth - outlineOffsetWidth, bgHeight - outlineOffsetWidth);\n\t            ctx.lineTo(outlineOffsetWidth, bgHeight - outlineOffsetWidth);\n\t            ctx.lineTo(outlineOffsetWidth, outlineOffsetWidth);\n\t            // Diagonals\n\t            ctx.moveTo(0, outlineOffsetWidth);\n\t            ctx.lineTo(bgWidth, bgHeight - outlineOffsetWidth);\n\t            ctx.moveTo(0, bgHeight - outlineOffsetWidth);\n\t            ctx.lineTo(bgWidth, outlineOffsetWidth);\n\t            ctx.stroke();\n\t        }\n\n\t        var textGroup = root.children.holderTextGroup;\n\t        ctx.font = textGroup.properties.font.weight + ' ' + (dpr * textGroup.properties.font.size) + textGroup.properties.font.units + ' ' + textGroup.properties.font.family + ', monospace';\n\t        ctx.fillStyle = textGroup.properties.fill;\n\n\t        for (var lineKey in textGroup.children) {\n\t            var line = textGroup.children[lineKey];\n\t            for (var wordKey in line.children) {\n\t                var word = line.children[wordKey];\n\t                var x = dpr * (textGroup.x + line.x + word.x);\n\t                var y = dpr * (textGroup.y + line.y + word.y + (textGroup.properties.leading / 2));\n\n\t                ctx.fillText(word.properties.text, x, y);\n\t            }\n\t        }\n\n\t        return canvas.toDataURL('image/png');\n\t    };\n\t})();\n\n/***/ })\n/******/ ])\n});\n;\n(function(ctx, isMeteorPackage) {\n    if (isMeteorPackage) {\n        Holder = ctx.Holder;\n    }\n})(this, typeof Meteor !== 'undefined' && typeof Package !== 'undefined');\n","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target, parent) {\n  if (parent){\n    return parent.querySelector(target);\n  }\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target, parent) {\n                // If passing function in options, then use it for resolve \"head\" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector(\"#foo\").shadowRoot }\n                // }\n                if (typeof target === 'function') {\n                        return target();\n                }\n                if (typeof memo[target] === \"undefined\") {\n\t\t\tvar styleTarget = getTarget.call(this, target, parent);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertAt.before, target);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\n\tif(options.attrs.nonce === undefined) {\n\t\tvar nonce = getNonce();\n\t\tif (nonce) {\n\t\t\toptions.attrs.nonce = nonce;\n\t\t}\n\t}\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction getNonce() {\n\tif (typeof __webpack_nonce__ === 'undefined') {\n\t\treturn null;\n\t}\n\n\treturn __webpack_nonce__;\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = typeof options.transform === 'function'\n\t\t ? options.transform(obj.css) \n\t\t : options.transform.default(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n","/*!\n * validate.js 0.13.1\n *\n * (c) 2013-2019 Nicklas Ansman, 2013 Wrapp\n * Validate.js may be freely distributed under the MIT license.\n * For all details and documentation:\n * http://validatejs.org/\n */\n\n(function(exports, module, define) {\n  \"use strict\";\n\n  // The main function that calls the validators specified by the constraints.\n  // The options are the following:\n  //   - format (string) - An option that controls how the returned value is formatted\n  //     * flat - Returns a flat array of just the error messages\n  //     * grouped - Returns the messages grouped by attribute (default)\n  //     * detailed - Returns an array of the raw validation data\n  //   - fullMessages (boolean) - If `true` (default) the attribute name is prepended to the error.\n  //\n  // Please note that the options are also passed to each validator.\n  var validate = function(attributes, constraints, options) {\n    options = v.extend({}, v.options, options);\n\n    var results = v.runValidations(attributes, constraints, options)\n      , attr\n      , validator;\n\n    if (results.some(function(r) { return v.isPromise(r.error); })) {\n      throw new Error(\"Use validate.async if you want support for promises\");\n    }\n    return validate.processValidationResults(results, options);\n  };\n\n  var v = validate;\n\n  // Copies over attributes from one or more sources to a single destination.\n  // Very much similar to underscore's extend.\n  // The first argument is the target object and the remaining arguments will be\n  // used as sources.\n  v.extend = function(obj) {\n    [].slice.call(arguments, 1).forEach(function(source) {\n      for (var attr in source) {\n        obj[attr] = source[attr];\n      }\n    });\n    return obj;\n  };\n\n  v.extend(validate, {\n    // This is the version of the library as a semver.\n    // The toString function will allow it to be coerced into a string\n    version: {\n      major: 0,\n      minor: 13,\n      patch: 1,\n      metadata: null,\n      toString: function() {\n        var version = v.format(\"%{major}.%{minor}.%{patch}\", v.version);\n        if (!v.isEmpty(v.version.metadata)) {\n          version += \"+\" + v.version.metadata;\n        }\n        return version;\n      }\n    },\n\n    // Below is the dependencies that are used in validate.js\n\n    // The constructor of the Promise implementation.\n    // If you are using Q.js, RSVP or any other A+ compatible implementation\n    // override this attribute to be the constructor of that promise.\n    // Since jQuery promises aren't A+ compatible they won't work.\n    Promise: typeof Promise !== \"undefined\" ? Promise : /* istanbul ignore next */ null,\n\n    EMPTY_STRING_REGEXP: /^\\s*$/,\n\n    // Runs the validators specified by the constraints object.\n    // Will return an array of the format:\n    //     [{attribute: \"<attribute name>\", error: \"<validation result>\"}, ...]\n    runValidations: function(attributes, constraints, options) {\n      var results = []\n        , attr\n        , validatorName\n        , value\n        , validators\n        , validator\n        , validatorOptions\n        , error;\n\n      if (v.isDomElement(attributes) || v.isJqueryElement(attributes)) {\n        attributes = v.collectFormValues(attributes);\n      }\n\n      // Loops through each constraints, finds the correct validator and run it.\n      for (attr in constraints) {\n        value = v.getDeepObjectValue(attributes, attr);\n        // This allows the constraints for an attribute to be a function.\n        // The function will be called with the value, attribute name, the complete dict of\n        // attributes as well as the options and constraints passed in.\n        // This is useful when you want to have different\n        // validations depending on the attribute value.\n        validators = v.result(constraints[attr], value, attributes, attr, options, constraints);\n\n        for (validatorName in validators) {\n          validator = v.validators[validatorName];\n\n          if (!validator) {\n            error = v.format(\"Unknown validator %{name}\", {name: validatorName});\n            throw new Error(error);\n          }\n\n          validatorOptions = validators[validatorName];\n          // This allows the options to be a function. The function will be\n          // called with the value, attribute name, the complete dict of\n          // attributes as well as the options and constraints passed in.\n          // This is useful when you want to have different\n          // validations depending on the attribute value.\n          validatorOptions = v.result(validatorOptions, value, attributes, attr, options, constraints);\n          if (!validatorOptions) {\n            continue;\n          }\n          results.push({\n            attribute: attr,\n            value: value,\n            validator: validatorName,\n            globalOptions: options,\n            attributes: attributes,\n            options: validatorOptions,\n            error: validator.call(validator,\n                value,\n                validatorOptions,\n                attr,\n                attributes,\n                options)\n          });\n        }\n      }\n\n      return results;\n    },\n\n    // Takes the output from runValidations and converts it to the correct\n    // output format.\n    processValidationResults: function(errors, options) {\n      errors = v.pruneEmptyErrors(errors, options);\n      errors = v.expandMultipleErrors(errors, options);\n      errors = v.convertErrorMessages(errors, options);\n\n      var format = options.format || \"grouped\";\n\n      if (typeof v.formatters[format] === 'function') {\n        errors = v.formatters[format](errors);\n      } else {\n        throw new Error(v.format(\"Unknown format %{format}\", options));\n      }\n\n      return v.isEmpty(errors) ? undefined : errors;\n    },\n\n    // Runs the validations with support for promises.\n    // This function will return a promise that is settled when all the\n    // validation promises have been completed.\n    // It can be called even if no validations returned a promise.\n    async: function(attributes, constraints, options) {\n      options = v.extend({}, v.async.options, options);\n\n      var WrapErrors = options.wrapErrors || function(errors) {\n        return errors;\n      };\n\n      // Removes unknown attributes\n      if (options.cleanAttributes !== false) {\n        attributes = v.cleanAttributes(attributes, constraints);\n      }\n\n      var results = v.runValidations(attributes, constraints, options);\n\n      return new v.Promise(function(resolve, reject) {\n        v.waitForResults(results).then(function() {\n          var errors = v.processValidationResults(results, options);\n          if (errors) {\n            reject(new WrapErrors(errors, options, attributes, constraints));\n          } else {\n            resolve(attributes);\n          }\n        }, function(err) {\n          reject(err);\n        });\n      });\n    },\n\n    single: function(value, constraints, options) {\n      options = v.extend({}, v.single.options, options, {\n        format: \"flat\",\n        fullMessages: false\n      });\n      return v({single: value}, {single: constraints}, options);\n    },\n\n    // Returns a promise that is resolved when all promises in the results array\n    // are settled. The promise returned from this function is always resolved,\n    // never rejected.\n    // This function modifies the input argument, it replaces the promises\n    // with the value returned from the promise.\n    waitForResults: function(results) {\n      // Create a sequence of all the results starting with a resolved promise.\n      return results.reduce(function(memo, result) {\n        // If this result isn't a promise skip it in the sequence.\n        if (!v.isPromise(result.error)) {\n          return memo;\n        }\n\n        return memo.then(function() {\n          return result.error.then(function(error) {\n            result.error = error || null;\n          });\n        });\n      }, new v.Promise(function(r) { r(); })); // A resolved promise\n    },\n\n    // If the given argument is a call: function the and: function return the value\n    // otherwise just return the value. Additional arguments will be passed as\n    // arguments to the function.\n    // Example:\n    // ```\n    // result('foo') // 'foo'\n    // result(Math.max, 1, 2) // 2\n    // ```\n    result: function(value) {\n      var args = [].slice.call(arguments, 1);\n      if (typeof value === 'function') {\n        value = value.apply(null, args);\n      }\n      return value;\n    },\n\n    // Checks if the value is a number. This function does not consider NaN a\n    // number like many other `isNumber` functions do.\n    isNumber: function(value) {\n      return typeof value === 'number' && !isNaN(value);\n    },\n\n    // Returns false if the object is not a function\n    isFunction: function(value) {\n      return typeof value === 'function';\n    },\n\n    // A simple check to verify that the value is an integer. Uses `isNumber`\n    // and a simple modulo check.\n    isInteger: function(value) {\n      return v.isNumber(value) && value % 1 === 0;\n    },\n\n    // Checks if the value is a boolean\n    isBoolean: function(value) {\n      return typeof value === 'boolean';\n    },\n\n    // Uses the `Object` function to check if the given argument is an object.\n    isObject: function(obj) {\n      return obj === Object(obj);\n    },\n\n    // Simply checks if the object is an instance of a date\n    isDate: function(obj) {\n      return obj instanceof Date;\n    },\n\n    // Returns false if the object is `null` of `undefined`\n    isDefined: function(obj) {\n      return obj !== null && obj !== undefined;\n    },\n\n    // Checks if the given argument is a promise. Anything with a `then`\n    // function is considered a promise.\n    isPromise: function(p) {\n      return !!p && v.isFunction(p.then);\n    },\n\n    isJqueryElement: function(o) {\n      return o && v.isString(o.jquery);\n    },\n\n    isDomElement: function(o) {\n      if (!o) {\n        return false;\n      }\n\n      if (!o.querySelectorAll || !o.querySelector) {\n        return false;\n      }\n\n      if (v.isObject(document) && o === document) {\n        return true;\n      }\n\n      // http://stackoverflow.com/a/384380/699304\n      /* istanbul ignore else */\n      if (typeof HTMLElement === \"object\") {\n        return o instanceof HTMLElement;\n      } else {\n        return o &&\n          typeof o === \"object\" &&\n          o !== null &&\n          o.nodeType === 1 &&\n          typeof o.nodeName === \"string\";\n      }\n    },\n\n    isEmpty: function(value) {\n      var attr;\n\n      // Null and undefined are empty\n      if (!v.isDefined(value)) {\n        return true;\n      }\n\n      // functions are non empty\n      if (v.isFunction(value)) {\n        return false;\n      }\n\n      // Whitespace only strings are empty\n      if (v.isString(value)) {\n        return v.EMPTY_STRING_REGEXP.test(value);\n      }\n\n      // For arrays we use the length property\n      if (v.isArray(value)) {\n        return value.length === 0;\n      }\n\n      // Dates have no attributes but aren't empty\n      if (v.isDate(value)) {\n        return false;\n      }\n\n      // If we find at least one property we consider it non empty\n      if (v.isObject(value)) {\n        for (attr in value) {\n          return false;\n        }\n        return true;\n      }\n\n      return false;\n    },\n\n    // Formats the specified strings with the given values like so:\n    // ```\n    // format(\"Foo: %{foo}\", {foo: \"bar\"}) // \"Foo bar\"\n    // ```\n    // If you want to write %{...} without having it replaced simply\n    // prefix it with % like this `Foo: %%{foo}` and it will be returned\n    // as `\"Foo: %{foo}\"`\n    format: v.extend(function(str, vals) {\n      if (!v.isString(str)) {\n        return str;\n      }\n      return str.replace(v.format.FORMAT_REGEXP, function(m0, m1, m2) {\n        if (m1 === '%') {\n          return \"%{\" + m2 + \"}\";\n        } else {\n          return String(vals[m2]);\n        }\n      });\n    }, {\n      // Finds %{key} style patterns in the given string\n      FORMAT_REGEXP: /(%?)%\\{([^\\}]+)\\}/g\n    }),\n\n    // \"Prettifies\" the given string.\n    // Prettifying means replacing [.\\_-] with spaces as well as splitting\n    // camel case words.\n    prettify: function(str) {\n      if (v.isNumber(str)) {\n        // If there are more than 2 decimals round it to two\n        if ((str * 100) % 1 === 0) {\n          return \"\" + str;\n        } else {\n          return parseFloat(Math.round(str * 100) / 100).toFixed(2);\n        }\n      }\n\n      if (v.isArray(str)) {\n        return str.map(function(s) { return v.prettify(s); }).join(\", \");\n      }\n\n      if (v.isObject(str)) {\n        if (!v.isDefined(str.toString)) {\n          return JSON.stringify(str);\n        }\n\n        return str.toString();\n      }\n\n      // Ensure the string is actually a string\n      str = \"\" + str;\n\n      return str\n        // Splits keys separated by periods\n        .replace(/([^\\s])\\.([^\\s])/g, '$1 $2')\n        // Removes backslashes\n        .replace(/\\\\+/g, '')\n        // Replaces - and - with space\n        .replace(/[_-]/g, ' ')\n        // Splits camel cased words\n        .replace(/([a-z])([A-Z])/g, function(m0, m1, m2) {\n          return \"\" + m1 + \" \" + m2.toLowerCase();\n        })\n        .toLowerCase();\n    },\n\n    stringifyValue: function(value, options) {\n      var prettify = options && options.prettify || v.prettify;\n      return prettify(value);\n    },\n\n    isString: function(value) {\n      return typeof value === 'string';\n    },\n\n    isArray: function(value) {\n      return {}.toString.call(value) === '[object Array]';\n    },\n\n    // Checks if the object is a hash, which is equivalent to an object that\n    // is neither an array nor a function.\n    isHash: function(value) {\n      return v.isObject(value) && !v.isArray(value) && !v.isFunction(value);\n    },\n\n    contains: function(obj, value) {\n      if (!v.isDefined(obj)) {\n        return false;\n      }\n      if (v.isArray(obj)) {\n        return obj.indexOf(value) !== -1;\n      }\n      return value in obj;\n    },\n\n    unique: function(array) {\n      if (!v.isArray(array)) {\n        return array;\n      }\n      return array.filter(function(el, index, array) {\n        return array.indexOf(el) == index;\n      });\n    },\n\n    forEachKeyInKeypath: function(object, keypath, callback) {\n      if (!v.isString(keypath)) {\n        return undefined;\n      }\n\n      var key = \"\"\n        , i\n        , escape = false;\n\n      for (i = 0; i < keypath.length; ++i) {\n        switch (keypath[i]) {\n          case '.':\n            if (escape) {\n              escape = false;\n              key += '.';\n            } else {\n              object = callback(object, key, false);\n              key = \"\";\n            }\n            break;\n\n          case '\\\\':\n            if (escape) {\n              escape = false;\n              key += '\\\\';\n            } else {\n              escape = true;\n            }\n            break;\n\n          default:\n            escape = false;\n            key += keypath[i];\n            break;\n        }\n      }\n\n      return callback(object, key, true);\n    },\n\n    getDeepObjectValue: function(obj, keypath) {\n      if (!v.isObject(obj)) {\n        return undefined;\n      }\n\n      return v.forEachKeyInKeypath(obj, keypath, function(obj, key) {\n        if (v.isObject(obj)) {\n          return obj[key];\n        }\n      });\n    },\n\n    // This returns an object with all the values of the form.\n    // It uses the input name as key and the value as value\n    // So for example this:\n    // <input type=\"text\" name=\"email\" value=\"foo@bar.com\" />\n    // would return:\n    // {email: \"foo@bar.com\"}\n    collectFormValues: function(form, options) {\n      var values = {}\n        , i\n        , j\n        , input\n        , inputs\n        , option\n        , value;\n\n      if (v.isJqueryElement(form)) {\n        form = form[0];\n      }\n\n      if (!form) {\n        return values;\n      }\n\n      options = options || {};\n\n      inputs = form.querySelectorAll(\"input[name], textarea[name]\");\n      for (i = 0; i < inputs.length; ++i) {\n        input = inputs.item(i);\n\n        if (v.isDefined(input.getAttribute(\"data-ignored\"))) {\n          continue;\n        }\n\n        var name = input.name.replace(/\\./g, \"\\\\\\\\.\");\n        value = v.sanitizeFormValue(input.value, options);\n        if (input.type === \"number\") {\n          value = value ? +value : null;\n        } else if (input.type === \"checkbox\") {\n          if (input.attributes.value) {\n            if (!input.checked) {\n              value = values[name] || null;\n            }\n          } else {\n            value = input.checked;\n          }\n        } else if (input.type === \"radio\") {\n          if (!input.checked) {\n            value = values[name] || null;\n          }\n        }\n        values[name] = value;\n      }\n\n      inputs = form.querySelectorAll(\"select[name]\");\n      for (i = 0; i < inputs.length; ++i) {\n        input = inputs.item(i);\n        if (v.isDefined(input.getAttribute(\"data-ignored\"))) {\n          continue;\n        }\n\n        if (input.multiple) {\n          value = [];\n          for (j in input.options) {\n            option = input.options[j];\n             if (option && option.selected) {\n              value.push(v.sanitizeFormValue(option.value, options));\n            }\n          }\n        } else {\n          var _val = typeof input.options[input.selectedIndex] !== 'undefined' ? input.options[input.selectedIndex].value : /* istanbul ignore next */ '';\n          value = v.sanitizeFormValue(_val, options);\n        }\n        values[input.name] = value;\n      }\n\n      return values;\n    },\n\n    sanitizeFormValue: function(value, options) {\n      if (options.trim && v.isString(value)) {\n        value = value.trim();\n      }\n\n      if (options.nullify !== false && value === \"\") {\n        return null;\n      }\n      return value;\n    },\n\n    capitalize: function(str) {\n      if (!v.isString(str)) {\n        return str;\n      }\n      return str[0].toUpperCase() + str.slice(1);\n    },\n\n    // Remove all errors who's error attribute is empty (null or undefined)\n    pruneEmptyErrors: function(errors) {\n      return errors.filter(function(error) {\n        return !v.isEmpty(error.error);\n      });\n    },\n\n    // In\n    // [{error: [\"err1\", \"err2\"], ...}]\n    // Out\n    // [{error: \"err1\", ...}, {error: \"err2\", ...}]\n    //\n    // All attributes in an error with multiple messages are duplicated\n    // when expanding the errors.\n    expandMultipleErrors: function(errors) {\n      var ret = [];\n      errors.forEach(function(error) {\n        // Removes errors without a message\n        if (v.isArray(error.error)) {\n          error.error.forEach(function(msg) {\n            ret.push(v.extend({}, error, {error: msg}));\n          });\n        } else {\n          ret.push(error);\n        }\n      });\n      return ret;\n    },\n\n    // Converts the error mesages by prepending the attribute name unless the\n    // message is prefixed by ^\n    convertErrorMessages: function(errors, options) {\n      options = options || {};\n\n      var ret = []\n        , prettify = options.prettify || v.prettify;\n      errors.forEach(function(errorInfo) {\n        var error = v.result(errorInfo.error,\n            errorInfo.value,\n            errorInfo.attribute,\n            errorInfo.options,\n            errorInfo.attributes,\n            errorInfo.globalOptions);\n\n        if (!v.isString(error)) {\n          ret.push(errorInfo);\n          return;\n        }\n\n        if (error[0] === '^') {\n          error = error.slice(1);\n        } else if (options.fullMessages !== false) {\n          error = v.capitalize(prettify(errorInfo.attribute)) + \" \" + error;\n        }\n        error = error.replace(/\\\\\\^/g, \"^\");\n        error = v.format(error, {\n          value: v.stringifyValue(errorInfo.value, options)\n        });\n        ret.push(v.extend({}, errorInfo, {error: error}));\n      });\n      return ret;\n    },\n\n    // In:\n    // [{attribute: \"<attributeName>\", ...}]\n    // Out:\n    // {\"<attributeName>\": [{attribute: \"<attributeName>\", ...}]}\n    groupErrorsByAttribute: function(errors) {\n      var ret = {};\n      errors.forEach(function(error) {\n        var list = ret[error.attribute];\n        if (list) {\n          list.push(error);\n        } else {\n          ret[error.attribute] = [error];\n        }\n      });\n      return ret;\n    },\n\n    // In:\n    // [{error: \"<message 1>\", ...}, {error: \"<message 2>\", ...}]\n    // Out:\n    // [\"<message 1>\", \"<message 2>\"]\n    flattenErrorsToArray: function(errors) {\n      return errors\n        .map(function(error) { return error.error; })\n        .filter(function(value, index, self) {\n          return self.indexOf(value) === index;\n        });\n    },\n\n    cleanAttributes: function(attributes, whitelist) {\n      function whitelistCreator(obj, key, last) {\n        if (v.isObject(obj[key])) {\n          return obj[key];\n        }\n        return (obj[key] = last ? true : {});\n      }\n\n      function buildObjectWhitelist(whitelist) {\n        var ow = {}\n          , lastObject\n          , attr;\n        for (attr in whitelist) {\n          if (!whitelist[attr]) {\n            continue;\n          }\n          v.forEachKeyInKeypath(ow, attr, whitelistCreator);\n        }\n        return ow;\n      }\n\n      function cleanRecursive(attributes, whitelist) {\n        if (!v.isObject(attributes)) {\n          return attributes;\n        }\n\n        var ret = v.extend({}, attributes)\n          , w\n          , attribute;\n\n        for (attribute in attributes) {\n          w = whitelist[attribute];\n\n          if (v.isObject(w)) {\n            ret[attribute] = cleanRecursive(ret[attribute], w);\n          } else if (!w) {\n            delete ret[attribute];\n          }\n        }\n        return ret;\n      }\n\n      if (!v.isObject(whitelist) || !v.isObject(attributes)) {\n        return {};\n      }\n\n      whitelist = buildObjectWhitelist(whitelist);\n      return cleanRecursive(attributes, whitelist);\n    },\n\n    exposeModule: function(validate, root, exports, module, define) {\n      if (exports) {\n        if (module && module.exports) {\n          exports = module.exports = validate;\n        }\n        exports.validate = validate;\n      } else {\n        root.validate = validate;\n        if (validate.isFunction(define) && define.amd) {\n          define([], function () { return validate; });\n        }\n      }\n    },\n\n    warn: function(msg) {\n      if (typeof console !== \"undefined\" && console.warn) {\n        console.warn(\"[validate.js] \" + msg);\n      }\n    },\n\n    error: function(msg) {\n      if (typeof console !== \"undefined\" && console.error) {\n        console.error(\"[validate.js] \" + msg);\n      }\n    }\n  });\n\n  validate.validators = {\n    // Presence validates that the value isn't empty\n    presence: function(value, options) {\n      options = v.extend({}, this.options, options);\n      if (options.allowEmpty !== false ? !v.isDefined(value) : v.isEmpty(value)) {\n        return options.message || this.message || \"can't be blank\";\n      }\n    },\n    length: function(value, options, attribute) {\n      // Empty values are allowed\n      if (!v.isDefined(value)) {\n        return;\n      }\n\n      options = v.extend({}, this.options, options);\n\n      var is = options.is\n        , maximum = options.maximum\n        , minimum = options.minimum\n        , tokenizer = options.tokenizer || function(val) { return val; }\n        , err\n        , errors = [];\n\n      value = tokenizer(value);\n      var length = value.length;\n      if(!v.isNumber(length)) {\n        return options.message || this.notValid || \"has an incorrect length\";\n      }\n\n      // Is checks\n      if (v.isNumber(is) && length !== is) {\n        err = options.wrongLength ||\n          this.wrongLength ||\n          \"is the wrong length (should be %{count} characters)\";\n        errors.push(v.format(err, {count: is}));\n      }\n\n      if (v.isNumber(minimum) && length < minimum) {\n        err = options.tooShort ||\n          this.tooShort ||\n          \"is too short (minimum is %{count} characters)\";\n        errors.push(v.format(err, {count: minimum}));\n      }\n\n      if (v.isNumber(maximum) && length > maximum) {\n        err = options.tooLong ||\n          this.tooLong ||\n          \"is too long (maximum is %{count} characters)\";\n        errors.push(v.format(err, {count: maximum}));\n      }\n\n      if (errors.length > 0) {\n        return options.message || errors;\n      }\n    },\n    numericality: function(value, options, attribute, attributes, globalOptions) {\n      // Empty values are fine\n      if (!v.isDefined(value)) {\n        return;\n      }\n\n      options = v.extend({}, this.options, options);\n\n      var errors = []\n        , name\n        , count\n        , checks = {\n            greaterThan:          function(v, c) { return v > c; },\n            greaterThanOrEqualTo: function(v, c) { return v >= c; },\n            equalTo:              function(v, c) { return v === c; },\n            lessThan:             function(v, c) { return v < c; },\n            lessThanOrEqualTo:    function(v, c) { return v <= c; },\n            divisibleBy:          function(v, c) { return v % c === 0; }\n          }\n        , prettify = options.prettify ||\n          (globalOptions && globalOptions.prettify) ||\n          v.prettify;\n\n      // Strict will check that it is a valid looking number\n      if (v.isString(value) && options.strict) {\n        var pattern = \"^-?(0|[1-9]\\\\d*)\";\n        if (!options.onlyInteger) {\n          pattern += \"(\\\\.\\\\d+)?\";\n        }\n        pattern += \"$\";\n\n        if (!(new RegExp(pattern).test(value))) {\n          return options.message ||\n            options.notValid ||\n            this.notValid ||\n            this.message ||\n            \"must be a valid number\";\n        }\n      }\n\n      // Coerce the value to a number unless we're being strict.\n      if (options.noStrings !== true && v.isString(value) && !v.isEmpty(value)) {\n        value = +value;\n      }\n\n      // If it's not a number we shouldn't continue since it will compare it.\n      if (!v.isNumber(value)) {\n        return options.message ||\n          options.notValid ||\n          this.notValid ||\n          this.message ||\n          \"is not a number\";\n      }\n\n      // Same logic as above, sort of. Don't bother with comparisons if this\n      // doesn't pass.\n      if (options.onlyInteger && !v.isInteger(value)) {\n        return options.message ||\n          options.notInteger ||\n          this.notInteger ||\n          this.message ||\n          \"must be an integer\";\n      }\n\n      for (name in checks) {\n        count = options[name];\n        if (v.isNumber(count) && !checks[name](value, count)) {\n          // This picks the default message if specified\n          // For example the greaterThan check uses the message from\n          // this.notGreaterThan so we capitalize the name and prepend \"not\"\n          var key = \"not\" + v.capitalize(name);\n          var msg = options[key] ||\n            this[key] ||\n            this.message ||\n            \"must be %{type} %{count}\";\n\n          errors.push(v.format(msg, {\n            count: count,\n            type: prettify(name)\n          }));\n        }\n      }\n\n      if (options.odd && value % 2 !== 1) {\n        errors.push(options.notOdd ||\n            this.notOdd ||\n            this.message ||\n            \"must be odd\");\n      }\n      if (options.even && value % 2 !== 0) {\n        errors.push(options.notEven ||\n            this.notEven ||\n            this.message ||\n            \"must be even\");\n      }\n\n      if (errors.length) {\n        return options.message || errors;\n      }\n    },\n    datetime: v.extend(function(value, options) {\n      if (!v.isFunction(this.parse) || !v.isFunction(this.format)) {\n        throw new Error(\"Both the parse and format functions needs to be set to use the datetime/date validator\");\n      }\n\n      // Empty values are fine\n      if (!v.isDefined(value)) {\n        return;\n      }\n\n      options = v.extend({}, this.options, options);\n\n      var err\n        , errors = []\n        , earliest = options.earliest ? this.parse(options.earliest, options) : NaN\n        , latest = options.latest ? this.parse(options.latest, options) : NaN;\n\n      value = this.parse(value, options);\n\n      // 86400000 is the number of milliseconds in a day, this is used to remove\n      // the time from the date\n      if (isNaN(value) || options.dateOnly && value % 86400000 !== 0) {\n        err = options.notValid ||\n          options.message ||\n          this.notValid ||\n          \"must be a valid date\";\n        return v.format(err, {value: arguments[0]});\n      }\n\n      if (!isNaN(earliest) && value < earliest) {\n        err = options.tooEarly ||\n          options.message ||\n          this.tooEarly ||\n          \"must be no earlier than %{date}\";\n        err = v.format(err, {\n          value: this.format(value, options),\n          date: this.format(earliest, options)\n        });\n        errors.push(err);\n      }\n\n      if (!isNaN(latest) && value > latest) {\n        err = options.tooLate ||\n          options.message ||\n          this.tooLate ||\n          \"must be no later than %{date}\";\n        err = v.format(err, {\n          date: this.format(latest, options),\n          value: this.format(value, options)\n        });\n        errors.push(err);\n      }\n\n      if (errors.length) {\n        return v.unique(errors);\n      }\n    }, {\n      parse: null,\n      format: null\n    }),\n    date: function(value, options) {\n      options = v.extend({}, options, {dateOnly: true});\n      return v.validators.datetime.call(v.validators.datetime, value, options);\n    },\n    format: function(value, options) {\n      if (v.isString(options) || (options instanceof RegExp)) {\n        options = {pattern: options};\n      }\n\n      options = v.extend({}, this.options, options);\n\n      var message = options.message || this.message || \"is invalid\"\n        , pattern = options.pattern\n        , match;\n\n      // Empty values are allowed\n      if (!v.isDefined(value)) {\n        return;\n      }\n      if (!v.isString(value)) {\n        return message;\n      }\n\n      if (v.isString(pattern)) {\n        pattern = new RegExp(options.pattern, options.flags);\n      }\n      match = pattern.exec(value);\n      if (!match || match[0].length != value.length) {\n        return message;\n      }\n    },\n    inclusion: function(value, options) {\n      // Empty values are fine\n      if (!v.isDefined(value)) {\n        return;\n      }\n      if (v.isArray(options)) {\n        options = {within: options};\n      }\n      options = v.extend({}, this.options, options);\n      if (v.contains(options.within, value)) {\n        return;\n      }\n      var message = options.message ||\n        this.message ||\n        \"^%{value} is not included in the list\";\n      return v.format(message, {value: value});\n    },\n    exclusion: function(value, options) {\n      // Empty values are fine\n      if (!v.isDefined(value)) {\n        return;\n      }\n      if (v.isArray(options)) {\n        options = {within: options};\n      }\n      options = v.extend({}, this.options, options);\n      if (!v.contains(options.within, value)) {\n        return;\n      }\n      var message = options.message || this.message || \"^%{value} is restricted\";\n      if (v.isString(options.within[value])) {\n        value = options.within[value];\n      }\n      return v.format(message, {value: value});\n    },\n    email: v.extend(function(value, options) {\n      options = v.extend({}, this.options, options);\n      var message = options.message || this.message || \"is not a valid email\";\n      // Empty values are fine\n      if (!v.isDefined(value)) {\n        return;\n      }\n      if (!v.isString(value)) {\n        return message;\n      }\n      if (!this.PATTERN.exec(value)) {\n        return message;\n      }\n    }, {\n      PATTERN: /^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])$/i\n    }),\n    equality: function(value, options, attribute, attributes, globalOptions) {\n      if (!v.isDefined(value)) {\n        return;\n      }\n\n      if (v.isString(options)) {\n        options = {attribute: options};\n      }\n      options = v.extend({}, this.options, options);\n      var message = options.message ||\n        this.message ||\n        \"is not equal to %{attribute}\";\n\n      if (v.isEmpty(options.attribute) || !v.isString(options.attribute)) {\n        throw new Error(\"The attribute must be a non empty string\");\n      }\n\n      var otherValue = v.getDeepObjectValue(attributes, options.attribute)\n        , comparator = options.comparator || function(v1, v2) {\n          return v1 === v2;\n        }\n        , prettify = options.prettify ||\n          (globalOptions && globalOptions.prettify) ||\n          v.prettify;\n\n      if (!comparator(value, otherValue, options, attribute, attributes)) {\n        return v.format(message, {attribute: prettify(options.attribute)});\n      }\n    },\n    // A URL validator that is used to validate URLs with the ability to\n    // restrict schemes and some domains.\n    url: function(value, options) {\n      if (!v.isDefined(value)) {\n        return;\n      }\n\n      options = v.extend({}, this.options, options);\n\n      var message = options.message || this.message || \"is not a valid url\"\n        , schemes = options.schemes || this.schemes || ['http', 'https']\n        , allowLocal = options.allowLocal || this.allowLocal || false\n        , allowDataUrl = options.allowDataUrl || this.allowDataUrl || false;\n      if (!v.isString(value)) {\n        return message;\n      }\n\n      // https://gist.github.com/dperini/729294\n      var regex =\n        \"^\" +\n        // protocol identifier\n        \"(?:(?:\" + schemes.join(\"|\") + \")://)\" +\n        // user:pass authentication\n        \"(?:\\\\S+(?::\\\\S*)?@)?\" +\n        \"(?:\";\n\n      var tld = \"(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff]{2,}))\";\n\n      if (allowLocal) {\n        tld += \"?\";\n      } else {\n        regex +=\n          // IP address exclusion\n          // private & local networks\n          \"(?!(?:10|127)(?:\\\\.\\\\d{1,3}){3})\" +\n          \"(?!(?:169\\\\.254|192\\\\.168)(?:\\\\.\\\\d{1,3}){2})\" +\n          \"(?!172\\\\.(?:1[6-9]|2\\\\d|3[0-1])(?:\\\\.\\\\d{1,3}){2})\";\n      }\n\n      regex +=\n          // IP address dotted notation octets\n          // excludes loopback network 0.0.0.0\n          // excludes reserved space >= 224.0.0.0\n          // excludes network & broacast addresses\n          // (first & last IP address of each class)\n          \"(?:[1-9]\\\\d?|1\\\\d\\\\d|2[01]\\\\d|22[0-3])\" +\n          \"(?:\\\\.(?:1?\\\\d{1,2}|2[0-4]\\\\d|25[0-5])){2}\" +\n          \"(?:\\\\.(?:[1-9]\\\\d?|1\\\\d\\\\d|2[0-4]\\\\d|25[0-4]))\" +\n        \"|\" +\n          // host name\n          \"(?:(?:[a-z\\\\u00a1-\\\\uffff0-9]-*)*[a-z\\\\u00a1-\\\\uffff0-9]+)\" +\n          // domain name\n          \"(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff0-9]-*)*[a-z\\\\u00a1-\\\\uffff0-9]+)*\" +\n          tld +\n        \")\" +\n        // port number\n        \"(?::\\\\d{2,5})?\" +\n        // resource path\n        \"(?:[/?#]\\\\S*)?\" +\n      \"$\";\n\n      if (allowDataUrl) {\n        // RFC 2397\n        var mediaType = \"\\\\w+\\\\/[-+.\\\\w]+(?:;[\\\\w=]+)*\";\n        var urlchar = \"[A-Za-z0-9-_.!~\\\\*'();\\\\/?:@&=+$,%]*\";\n        var dataurl = \"data:(?:\"+mediaType+\")?(?:;base64)?,\"+urlchar;\n        regex = \"(?:\"+regex+\")|(?:^\"+dataurl+\"$)\";\n      }\n\n      var PATTERN = new RegExp(regex, 'i');\n      if (!PATTERN.exec(value)) {\n        return message;\n      }\n    },\n    type: v.extend(function(value, originalOptions, attribute, attributes, globalOptions) {\n      if (v.isString(originalOptions)) {\n        originalOptions = {type: originalOptions};\n      }\n\n      if (!v.isDefined(value)) {\n        return;\n      }\n\n      var options = v.extend({}, this.options, originalOptions);\n\n      var type = options.type;\n      if (!v.isDefined(type)) {\n        throw new Error(\"No type was specified\");\n      }\n\n      var check;\n      if (v.isFunction(type)) {\n        check = type;\n      } else {\n        check = this.types[type];\n      }\n\n      if (!v.isFunction(check)) {\n        throw new Error(\"validate.validators.type.types.\" + type + \" must be a function.\");\n      }\n\n      if (!check(value, options, attribute, attributes, globalOptions)) {\n        var message = originalOptions.message ||\n          this.messages[type] ||\n          this.message ||\n          options.message ||\n          (v.isFunction(type) ? \"must be of the correct type\" : \"must be of type %{type}\");\n\n        if (v.isFunction(message)) {\n          message = message(value, originalOptions, attribute, attributes, globalOptions);\n        }\n\n        return v.format(message, {attribute: v.prettify(attribute), type: type});\n      }\n    }, {\n      types: {\n        object: function(value) {\n          return v.isObject(value) && !v.isArray(value);\n        },\n        array: v.isArray,\n        integer: v.isInteger,\n        number: v.isNumber,\n        string: v.isString,\n        date: v.isDate,\n        boolean: v.isBoolean\n      },\n      messages: {}\n    })\n  };\n\n  validate.formatters = {\n    detailed: function(errors) {return errors;},\n    flat: v.flattenErrorsToArray,\n    grouped: function(errors) {\n      var attr;\n\n      errors = v.groupErrorsByAttribute(errors);\n      for (attr in errors) {\n        errors[attr] = v.flattenErrorsToArray(errors[attr]);\n      }\n      return errors;\n    },\n    constraint: function(errors) {\n      var attr;\n      errors = v.groupErrorsByAttribute(errors);\n      for (attr in errors) {\n        errors[attr] = errors[attr].map(function(result) {\n          return result.validator;\n        }).sort();\n      }\n      return errors;\n    }\n  };\n\n  validate.exposeModule(validate, this, exports, module, define);\n}).call(this,\n        typeof exports !== 'undefined' ? /* istanbul ignore next */ exports : null,\n        typeof module !== 'undefined' ? /* istanbul ignore next */ module : null,\n        typeof define !== 'undefined' ? /* istanbul ignore next */ define : null);\n","module.exports = function() {\n\tthrow new Error(\"define cannot be used indirect\");\n};\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","'use strict';\n/* global ace */\n\nvar $ = require('jquery');\nvar minstatic = require('minstatic');\nvar url = '/static/vendor/ace/1.2.5/src-min-noconflict/ace.js';\n\nexports.loadEditor = loadEditor;\nfunction loadEditor() {\n  return minstatic.ui.assetLoader.loadAssets([url], 'ace')\n  .then(function(ace) {\n    ace.config.set('basePath', '/static/vendor/ace/1.2.5/src-min-noconflict');\n    return ace;\n  });\n};\n\nexports.initEditor = function(divId, config, done) {\n  loadEditor().then(function(ace) {\n    if (!ace) return done('null ace');\n    done(null, newEditor(divId, config));\n  }, done);\n};\n\n// this assumes ace ready  \nexports.newEditor = newEditor;\nfunction newEditor(divId, config) {\n  config = config || {};\n  var editor = ace.edit(divId);\n  editor.setOptions({\n    maxLines: config.maxLines || 1000,\n    minLines: config.minLines || 10,\n    fontSize: config.fontSize || \"12pt\",\n    readOnly: config.readOnly === true, \n    showLineNumbers: config.showLineNumbers !== false,\n    showGutter: config.showGutter !== false,\n  });\n  editor.$blockScrolling = Infinity;\n  var ss = editor.getSession();\n  var mode = config.mode || 'text';\n  if (mode === 'c' || mode === 'cpp') mode = 'c_cpp';\n  ss.setMode('ace/mode/' + mode);\n  if (config.softTab) {\n    ss.setUseSoftTabs(true);\n    ss.setTabSize(config.softTab);\n  }\n  if (mode === 'stone') {\n    editor.setTheme('ace/theme/darkstone');\n  } else {\n    editor.setTheme('ace/theme/monokai');\n  }\n\n  return editor;\n};\n","'use strict';\n\nvar ko = require('knockout');\nvar Komp = require('./komp');\n\nvar BaseEditor = Komp.subclass({\n  init(params, elem) {\n    Komp.init.call(this, params, elem);\n\n    this.profile = params.profile || {};\n    return this;\n  },\n\n  addTagsObservable: function(name, tags) {\n    var me = this;\n    me[name] = ko.observable(tags ? tags.join(',') : '');\n    me[name + 'List'] = ko.computed(function() {\n      var s = me[name]();\n      return s ? s.trim().split(',') : [];\n    });\n  },\n\n  applyTagsinput: function(sel, tags, opts) {\n    sel = sel || 'input[data-role=tagsinput]';\n    tags = typeof tags === 'string' ? tags : '';\n    opts = opts || {};\n    var $el = this.find(sel);\n    $el.tagsinput('add', tags);\n  },\n});\n\nmodule.exports = BaseEditor;\n","'use strict';\n/* global CKEDITOR */\n\nvar $ = require('jquery');\n\nvar { ui } = require('minstatic');\n\nexports.userConfig = {\n  customConfig: '',\n  scayt_autoStartup: false,\n  tartupFocus: false,\n\ttoolbarGroups: [\n\t\t{ name: 'clipboard',   groups: [ 'clipboard', 'undo' ] },\n\t\t{ name: 'editing',     groups: [ 'find', 'selection', 'spellchecker' ] },\n\t\t{ name: 'links' },\n\t\t{ name: 'insert' },\n\t\t{ name: 'forms' },\n\t\t{ name: 'tools' },\n\t\t{ name: 'document',\t   groups: [ 'mode', 'document', 'doctools' ] },\n\t\t{ name: 'others' },\n\t\t'/',\n\t\t{ name: 'basicstyles', groups: [ 'basicstyles', 'cleanup' ] },\n\t\t{ name: 'paragraph',   groups: [ 'list', 'indent', 'blocks', 'align', 'bidi' ] },\n\t\t{ name: 'styles' },\n\t\t{ name: 'colors' },\n\t\t//{ name: 'pbckcode' },\n\t\t{ name: 'about' }\n\t],\n\n\t// Remove some buttons provided by the standard plugins, which are\n\t// not needed in the Standard(s) toolbar.\n\tremoveButtons: 'Underline,Subscript,Superscript',\n\n\t// Set the most common block elements.\n\tformat_tags: 'p;h1;h2;h3;pre',\n\n\t// Simplify the dialog windows.\n\tremoveDialogTabs: 'image:advanced;link:advanced',\n\n  // disallowedContent: 'img{width,height}',\n  extraAllowedContent: 'div(row,col-*,gutter-*);img(pull-*)[width,height];',\n  extraPlugins: 'colorbutton,font,codesnippet',\n  //removePlugins: 'liststyle,tabletools,scayt,menubutton,contextmenu',\n  removePlugins: 'liststyle,scayt',\n  //fillEmptyBlocks: false,\n};\n\nexports.adminConfig = Object.assign({}, exports.userConfig, {\n  allowedContent: true,\n  //disallowedContent: 'img{width,height}',\n  extraAllowedContent: 'img(*)[*]{*};p(*)[*]{*};h1(*)[*]{*};h2(*)[*]{*};h3(*)[*]{*};span(*)[*]{*};div(*)[*]{*};a(*)[*]{*};table(*)[*]{*};pre(*)[*]{*};code(*)[*]{*};canvas(*)[*]{*};form(*)[*]{*};iframe(*)[*]{*};input(*)[*]{*};table(*)[*]{*};select(*)[*]{*};strong(*)[*]{*};',\n  extraPlugins: 'colorbutton,font,codesnippet'\n});\n\nexports.loadCkEditor = function(opts) {\n  return ui.assetLoader.loadAssets([\n    (opts && opts.url) || '//cdn.ckeditor.com/4.7.3/full-all/ckeditor.js'\n  ], 'CKEDITOR');\n};\n\nfunction addExternal(CKE, name, path, config) {\n  if (!CKE || !name || !config) return;\n  try {\n    CKE.plugins.addExternal(name, path);\n    exports.userConfig.extraPlugins += ',' + name;\n    exports.adminConfig.extraPlugins += ',' + name;\n    exports.userConfig[name]=  config;\n    exports.adminConfig[name] = config;\n  } catch(err) { console.error(err); }\n}\n\nexports.applyCkEditor = function(html, sel, config, done) {\n  sel = sel || 'textarea';\n\n  if (typeof config === 'function') {\n    done = config;\n    config = null; \n  }\n  config = config || {};\n\n  // a convenience hack, sorry\n  if (done && typeof done === 'object') done = exports.ckeditorSetter(done);\n\n  exports.loadCkEditor(config)\n  .then(function(CKE) {\n    if (!CKE) {\n      if (done) done('null CKEditor');\n    } else {\n      // external plugins\n      //addExternal(CKE, 'codemirror', '/bower_components/ckeditor-codemirror/codemirror/', { theme: 'blackboard' });\n      /*\n      addExternal(CKE, 'pbckcode', '/bower_components/PBCKCode/',{\n        cls: 'ace-ck-pre',\n        modes : [ \n          ['HTML', 'html'], \n          ['CSS', 'css'], \n          ['JS', 'javascript'],\n          ['PYTHON', 'python'],\n          ['JAVA', 'java'],\n        ],\n        theme : 'monokai',\n        tab_size : 2,\n        js : '/vendor/ace/1.2.5/src-min-noconflict/'\n      });\n      */\n\n      // prevent remove empty tags\n      CKE.dtd.$removeEmpty.span = 0;\n\n      var ckeditor = null;\n      var $el = sel.jquery ? sel : $(sel);\n      if ($el[0]) {\n        $el[0].value = html || '';\n        var cfg = !config.isAdmin ? \n          (config.ckConfig || exports.userConfig) : exports.adminConfig;\n        ckeditor = CKE.replace($el[0], cfg);\n      }\n      if (done) done(null, ckeditor);\n    }\n  }, function(err) {\n    if (done) done(err || 'null CKEditor');\n  });\n};\n\nexports.ckeditorSetter = function(host, fieldName) {\n  return function(err, ckeditor) {\n    if (err) console.error(err);\n    else host[fieldName || 'ckeditor'] = ckeditor;\n  };\n};\n","'use strict';\n\nconst ResizeSensor = require('css-element-queries/src/ResizeSensor');\n\nmodule.exports = function fitWindow(config) {\n  config.elem.style.width = config.width + 'px';\n  config.elem.style.height = config.height + 'px';\n\n  if (config.trimHeight === undefined && !config.container.offsetHeight) {\n    config.trimHeight = true;\n  }\n  config.pullLeft == !!config.pullLeft;\n\n  var style = document.body.style;\n  config.trans2d = 'WebkitTransform' in style ? 'WebkitTransform'\n    : ('MozTransform' in style ? 'MozTransform'\n    : ('msTransform' in style ? 'msTransform'\n    : ('OTransform' in style ? 'OTransform'\n    : 'transform')));\n  //var canZoom = ui.isChrome() && !ui.isMobile();\n  function resize() {\n    layout(config);\n  }\n  resize();\n  config.resize = resize;\n  //window.addEventListener('resize', resize, false);\n  //window.addEventListener('orientationchange', resize, false);\n  new ResizeSensor(config.container, resize);\n};\n\nfunction layout(config) {\n  var w = config.elem.offsetWidth;\n  var h = config.elem.offsetHeight;\n  var ratio = w / h;\n\n  var curW = config.container.offsetWidth || w;\n  var curH = config.container.offsetHeight;\n  var newH = config.trimHeight ? curW * h / w : (curH || h);\n  if (config.maxHeight > 0 && newH > config.maxHeight) newH = config.maxHeight;\n  var newRatio = curW / newH;\n  var scale = config.scale = newRatio > ratio ? (newH / h) : (curW / w);\n\n  if (config.trimHeight) {\n    var outerH = Math.floor(scale * h);\n    var diff = config.outer.offsetHeight - outerH;\n    if (diff > 20 || diff < -2) config.outer.style.height = outerH + 'px';\n  }\n\n  if (config.pullLeft) {\n    var v = config.outer.offsetWidth - config.elem.offsetWidth * scale;\n    config.outer.style.marginLeft = (-v/2) + 'px';\n  }\n\n  var style = config.elem.style;\n  //if (scale === 1) {\n  //  style.zoom = '';\n  //  style.left = style.top = style.bottom = style.right = '';\n  //  style[trans2d] = '';\n  //} else if (scale > 1 && canZoom) {\n  //  style.zoom = scale;\n  //  style.left = style.top = style.bottom = style.right = '';\n  //  style[trans2d] = '';\n  //} else {\n    style.left = style.top = '50%';\n    style.bottom = style.right = 'auto'; \n    var transform = 'translate(-50%, -50%) scale('+ scale +')';\n    style[config.trans2d] = transform;\n    //style.WebkitTransform = transform;\n    //style.MozTransform = transform;\n    //style.msTransform = transform;\n    //style.transform = transform;\n  //}\n};\n\n","\nconst { ui, assert, assign } = require('minstatic');\n\nconst forms = require('./forms');\n\nconst FormComp = ui.Comp.subclass({\n  // this assume form rendered already inside elem\n  _init0(opts) {\n    let { elem, form } = opts;\n    this.form = form ? ui.first(elem, form) : elem;\n    this._applyFormBindings(opts);\n  },\n\n  _applyFormBindings(opts) {\n    assign(this, opts, ['constraints', 'method', 'postUrl', 'successUrl', 'ckEditors', 'tagFields']);\n\n    let { form, constraints, ckEditors, tagFields } = this;\n    assert(form.nodeName === 'FORM' && constraints);\n\n    this.editorPairs = forms.applyFormBindings({ form, constraints, ckEditors, tagFields });\n    this._applyBindings();\n  },\n\n  submitForm() {\n    // let { form, constraints, ... } = this;\n    return forms.handleForm(this);\n  },\n  validateForm() {\n    return forms.validateForm(this.form, this.constraints, this.editorPairs);\n  },\n  postForm() {\n    // let { form, ... } = this;\n    return forms.postForm(this); \n  },\n  showErrors(errors) {\n    forms.showErrors(this.form, errors);\n  },\n});\n\nmodule.exports = FormComp;\n","\nconst validate = require('validate.js');\n\nconst { ui, each, errorMap } = require('minstatic');\nconst ckUtils = require('./ck-utils');\nconst tagUtils = require('./tag-utils');\n\n// TODO: using functions has limitation on customization\n//   like ckEditor-textarea pair\n\nmodule.exports = {\n  applyFormBindings,\n  handleForm,\n  validateForm,\n  postForm,\n  showErrors,\n};\n\nfunction applyFormBindings({form, constraints, method, postUrl, successUrl, ckEditors, tagFields}) {\n  ui.traverseForm(form, (name, val, field) => {\n    field.addEventListener('change', function(ev) {\n      var errors = validate(form, constraints) || {};\n      showErrorsForInput(field, errors[name]);\n    });\n  }, true);\n\n  each(tagFields, function(field) {\n    tagUtils.applyTagsinput(ui.first(form, `input[name=${field}]`));\n  });\n\n  let editorPairs = [];\n  each(ckEditors, async function(sel) {\n    let ta = typeof sel === 'string' ? ui.first(form, sel) : sel; \n    if (!ta) return;\n\n    let CKE = await ckUtils.loadCkEditor();\n    let editor = CKE.replace(ta, {\n      extraPlugins: 'sourcedialog,codesnippet'\n    });\n    editor.on('instanceReady', () => editor.setReadOnly(false));\n    editor.on('blur', () => {\n      editor.updateElement();\n      var errors = validate(form, constraints) || {};\n      showErrorsForInput(ta, errors[ta.name]);\n    });\n    editorPairs.push({ editor, ta });\n  });\n\n  if (typeof postUrl === 'string') {\n    form.addEventListener('submit', function(ev) {\n      ev.preventDefault();\n\n      handleForm({ form, method, postUrl, successUrl, editorPairs });\n    });\n  }\n\n  return editorPairs; // see limitation\n}\n\nasync function handleForm({ form, constraints, method, postUrl, successUrl, editorPairs }) {\n  each(editorPairs, ({ editor, ta }) => ta && editor.updateElement());\n\n  var errors = validate(form, constraints);\n  showErrors(form, errors);\n\n  if (errors) return { errors };\n  if (typeof postUrl === 'string') return postForm({form, method, postUrl, successUrl});\n  return {};\n}\n\nfunction validateForm(form, constraints, editorPairs) {\n  each(editorPairs, ({ editor, ta }) => ta && editor.updateElement());\n\n  var errors = validate(form, constraints);\n  showErrors(form, errors);\n  return errors;\n}\n\nasync function postForm({form, method, postUrl, successUrl}) {\n  let res = await fetch(postUrl || '', {\n    method: method || 'POST',\n    body: JSON.stringify(ui.formJson(form)),\n    headers: {\n      'Content-Type': 'application/json',\n    },\n  });\n  let text = await res.text();\n  let ret = JSON.parse(text);\n  let errors = errorMap(ret);\n  if (errors) {\n    showErrors(form, errors);\n  } else if (typeof successUrl === 'string') {\n    ui.visit(successUrl);\n  } else if (typeof successUrl === 'function') {\n    successUrl(ret);\n  }\n  return errors ? { errors } : ret;\n}\n\nfunction showErrors(form, errors) {\n  ui.traverseForm(form, (name, val, field) => {\n    showErrorsForInput(field, errors && errors[name]);\n  }, true);\n\n  let input = ui.first(form, 'input[data-errors]');\n  let fg = input && ui.closest(input, '.form-group');\n  if (fg) {\n    input.classList.remove('is-invalid');\n    resetFormGroup(fg);\n    each(errors, function(errs, name) {\n      if (!form.elements[name]) {\n        input.classList.add('is-invalid');\n        each(errs, function(err) {\n          addError(fg, err);\n        });\n      }\n    });\n  }\n}\n\nfunction showErrorsForInput(input, errors) {\n  var formGroup = ui.closest(input, '.form-group');\n  resetFormGroup(formGroup);\n  if (errors) {\n    input.classList.remove('is-valid');\n    input.classList.add('is-invalid');\n    each(errors, function(error) {\n      addError(formGroup, error);\n    });\n  } else {\n    input.classList.remove('is-invalid');\n    input.classList.add('is-valid');\n  }\n\n  // hack for ckEditor\n  let div = formGroup && ui.first(formGroup, 'div.cke');\n  if (div) {\n    if (!errors || input.classList.contains('is-valid')) {\n      div.classList.remove('border-danger');\n      div.classList.add('border', 'border-success');\n    } else {\n      div.classList.remove('border-success');\n      div.classList.add('border', 'border-danger');\n    }\n  }\n}\n\nfunction resetFormGroup(formGroup) {\n  ui.find(formGroup, '.invalid-feedback', function(el) {\n    el.parentNode.removeChild(el);\n  });\n}\n\nfunction addError(formGroup, error) {\n  var block = document.createElement('div');\n  block.classList.add('invalid-feedback');\n  block.innerText = error;\n  formGroup.appendChild(block);\n}\n\n","module.exports = global[\"minstatic_web_ui\"] = require(\"-!./index.js\");","'use strict';\n\nvar ko = require('knockout');\n\nexports.canValidateJSON = function(name) {\n  if (!ko.validation) return false;\n\n  name = name || 'isJSON';\n  if (!ko.validation.rules[name]) {\n    ko.validation.rules[name] = {\n      validator: function(val, opt) {\n        var orString = opt === 'orString';\n        if (!val) return !opt || orString;\n\n        if (typeof val !== 'string') return false;\n\n        if (orString && val[0] !== '{' && val[0] !== '[') return true;\n        try {\n          JSON.parse(val);\n          return true;\n        } catch (ex) {\n          return false;\n        }\n      },\n      message: 'The field must be JSON'\n    };\n    // assume registerExtenders option not set to false\n    ko.validation.registerExtenders();\n  }\n  return true;\n};\n\nexports.canValidateArrayLength = function() {\n  if (!ko.validation) return false;\n\n  var nameMin = 'minArrayLength';\n  if (!ko.validation.rules[nameMin]) {\n    ko.validation.rules[nameMin] = {\n      validator: function(val, minLength) {\n        if (!Array.isArray(val)) return false;\n        return val.length >= minLength;\n      },\n      message: 'Length must larger than {0}.'\n    };\n    // assume registerExtenders option not set to false\n    ko.validation.registerExtenders();\n  }\n  var nameMax = 'maxArrayLength';\n  if (!ko.validation.rules[nameMax]) {\n    ko.validation.rules[nameMax] = {\n      validator: function(val, maxLength) {\n        if (!Array.isArray(val)) return false;\n        return val.length <= maxLength;\n      },\n      message: 'Length must less than {0}.'\n    };\n    // assume registerExtenders option not set to false\n    ko.validation.registerExtenders();\n  }\n  return true;\n};\n\n","'use strict';\n/* global document */\n\nvar $ = require('jquery');\nvar ko = require('knockout');\nconst { each, ui, klass, Emitter } = require('minstatic');\n\nvar Komp = klass(Emitter, {\n  init: function(params, elem) {\n    var cntx = params.cntx;\n    if (typeof cntx === 'string') cntx = ko.contextFor(elem)[cntx];\n\n    this.cntx = cntx;\n    if (!cntx) {\n      var c = ko.contextFor(elem);\n      this.cntx = c && (c.$component || c.$root) || {};\n    }\n    this.elem = elem;\n    this.hideClass = null;\n  },\n\n  cntxEmit: function() {\n    if (typeof this.cntx.emit === 'function') {\n      this.cntx.emit.apply(this.cntx, arguments);\n    }\n  },\n\n  finder: function() {\n    return this.$finder || (this.$finder = $(this.elem || 'body'));\n  },\n\n  find: function(sel) {\n    return this.finder().find(sel);\n  },\n\n  first: function(sel) {\n    return ui.first(this.elem || document, sel);\n  },\n\n  showCardBefore: function(comp, params, target, id) {\n    this.showCard(comp, params, target, id, true);\n  },\n\n  showCardAfter: function(comp, params, target, id) {\n    this.showCard(comp, params, target, id, true, true);\n  },\n\n  showCard: function(comp, params, target, id, noHide, after) {\n    if (!comp || !target) return;\n\n    var $target = Komp.isJQuery(target) ? target : $(target);\n    if (!$target[0]) return;\n\n    if (!noHide) {\n      if (this.hideClass) $target.addClass(this.hideClass);\n      else $target.hide();\n    }\n\n    var cards = this._cards || (this._cards = {});\n    var cardId = id || target.toString();\n    var card = cards[cardId];\n    if (card) {\n      card.$comp.show();\n    } else {\n      params = params ? ' params=\"' + params + '\"' : '';\n      var $comp = $('<' + comp + params + '></' + comp + '>');\n      $comp.data('card-id', cardId);\n      card = cards[cardId] = {\n        id: cardId,\n        type: comp,\n        $comp: $comp,\n        hiding: noHide ? null : target\n      };\n      ko.applyBindings(this, $comp[0]);\n      if (after) {\n        $comp.insertAfter($target[0]);\n      } else {\n        $comp.insertBefore($target[0]);\n      }\n    }\n    return cardId;\n  },\n\n  appendCard: function(comp, params, target, id) {\n    if (!comp || !target) return;\n\n    var $target = Komp.isJQuery(target) ? target : $(target);\n    if (!$target[0]) return;\n\n    var cards = this._cards || (this._cards = {});\n    var cardId = id || target.toString();\n    var card = cards[cardId];\n    if (card) {\n      card.$comp.show();\n    } else {\n      params = params ? ' params=\"' + params + '\"' : '';\n      var $comp = $('<' + comp + params + '></' + comp + '>');\n      $comp.data('card-id', cardId);\n      card = cards[cardId] = {\n        id: cardId,\n        type: comp,\n        $comp: $comp,\n        hiding: null\n      };\n      ko.applyBindings(this, $comp[0]);\n      $comp.appendTo($target[0]);\n    }\n  },\n\n  hideCard: function(cardId) {\n    if (typeof cardId !== 'string') {\n      cardId = cardId.elem && $(cardId.elem).data('card-id');\n    }\n    if (!cardId) return;\n\n    var card = this._cards && this._cards[cardId];\n    if (card) {\n      card.$comp.hide();\n      if (card.hiding) {\n        if (this.hideClass) $(card.hiding).removeClass(this.hideClass);\n        else $(card.hiding).show();\n      }\n    }\n  },\n\n  resetCards: function() {\n    each(this._cards, function(card) {\n      if (card.$comp) card.$comp.remove();\n    });\n    this._cards = null;\n  },\n\n  clearCard: function(id) {\n    if (id && this._cards) {\n      var card = this._cards[id];\n      if (card && card.$comp) card.$comp.remove();\n      delete this._cards[id];\n    }\n  },\n\n  cancel: function() {\n    this.cntxEmit('cancel', this);\n  },\n  done: function() {\n    this.cntxEmit('done', this);\n  },\n\n  tagName: function() {\n    return Komp.TagName(this);\n  },\n\n  mixin: function(features) {\n    return Komp.Mixin(this, features);\n  },\n\n  register: function(name, komp) {\n    if (name && komp && !ko.components.isRegistered(name)) {\n      ko.components.register(name, komp);\n    }\n  },\n\n  viewModelFactory: function(Cls) {\n    return {\n      createViewModel: function(params, compInfo) {\n        return Cls.instance(params, compInfo.element);\n      }\n    };\n  },\n\n  applyBindings: function(vm, el) {\n    el = ui.first(el);\n    if (el) ko.applyBindings(vm, el);\n    return vm;\n  },\n\n\n  closest: function(evt, sel) {\n    return $(evt.target).closest(sel);\n  },\n\n  closestData: function(evt, name) {\n    if (evt && evt.target && name) {\n      var field = 'data-' + name;\n      return $(evt.target).closest('[' + field + ']').attr(field);\n    }\n  },\n\n  isJQuery: function(data) {\n    return !!(data && data.jquery);\n  },\n});\n\nfunction identity(x) { return x; }\n\nKomp.nls = identity;\nKomp.setNls = function(nls) {\n  Komp.nls = nls || identity;\n};\n\nKomp.replaceWithTurbolinks = function(html) {\n  if (Komp.Turbolinks && html) {\n    var s = html.match(/<body[^>]*>([\\s\\S]*?)<\\/body>/i)[1];\n    document.body.innerHTML = s;\n    Komp.Turbolinks.dispatch('turbolinks:load');\n    var arr = document.body.getElementsByTagName('script');\n    for (var i=0; i<arr.length; i++) {\n      eval(arr[i].innerHTML);\n    }\n  }\n};\n\n// ko utils here for now\nKomp.setErrors = function(vm, errors) {\n  var alerts = [];\n  each(errors, function(err, key) { // for both error map and array\n    if (typeof key === 'number') {\n      key = err && (err.property || err.name || err.clientPath || err.path);\n      err = err && err.message;\n    }\n\n    var ob = err && key && vm[key];\n    if (ob && ob.setError && ob.isModified) {\n      ob.setError(err);\n      ob.isModified(true);\n    } else {\n      alerts.push(key + ' ' + err);\n    }\n  });\n  if (alerts.length) alert(alerts.join('\\n'));\n};\n\nKomp.showErrors = showErrors;\nfunction showErrors(json, vm) {\n  if (!json) return;\n\n  if (vm && json.errors) {\n    Komp.setErrors(vm, json.errors);\n  } else if (json.status && json.statusText) {\n    alert('Error ' + json.status + ': ' + json.statusText);\n  } else {\n    console.error(json.errors || json.message || json.error || json);\n  }\n}\nKomp.postPjax = function(q, vm, hdl, opts) {\n  return q.done(function(ret) {\n    if (ret && ret.errors) {\n      showErrors(ret, vm);\n      return false;\n    } else if (hdl) {\n      if (typeof hdl === 'function') {\n        hdl();\n      } else {\n        ui.visit(hdl, opts);\n      }\n      return true;\n    }\n  }).fail(function(err) {\n    showErrors(err, vm);\n  });\n};\n\nKomp.visit = ui.visit;\n\nKomp.validateExtendOptions = function(exts) {\n  var opts = {};\n  if (exts) {\n    Object.keys(exts).forEach(function(key) {\n      opts[key] = {\n        create: function(opt) {\n          return ko.observable(opt.data).extend(exts[key]);\n        }\n      };\n    });\n  }\n  return opts; \n};\n\nKomp.tagName = function(comp) {\n  var nm = comp && comp.elem && comp.elem.nodeName;\n  return typeof nm === 'string' ?  nm.toLowerCase() : '';\n};\n\nmodule.exports = Komp;\n","\nvar _curUrl = null;\nvar _handlers = [];\n\nfunction curUrl() {\n  if (!_curUrl) {\n    _curUrl = window.location.pathname;\n    document.addEventListener(\"turbolinks:load\", function(evt) {\n      updateUrl(window.location.pathname);\n    });\n  }\n  return _curUrl;\n}\n\nfunction updateUrl(url) {\n  var oldUrl = _curUrl;\n  if (!url || oldUrl === url) return;\n\n  _curUrl = url;\n  for (var i=0, n=_handlers.length; i<n; i++) {\n    var h = _handlers[i];\n    var pat = h.opts.pattern;\n    var leave = h.opts.onLeave;\n    if (pat) {\n      var mat = leave && oldUrl.match(pat);\n      if (mat) leave(oldUrl, mat);\n\n      if (mat = url.match(pat)) h.cb(url, mat);\n    } else {\n      if (leave) leave(oldUrl);\n      h.cb(url);\n    }\n  }\n}\n\nvar states = {\n  curUrl: curUrl,\n  onEnter: function(cb, opts) {\n    if (typeof cb !== 'function') return;\n    if (_handlers.find(h => h.cb === cb)) return;\n\n    curUrl();\n    _handlers.push({ cb: cb, opts: opts || {} });\n  },\n  offEnter: function(cb) {\n    if (cb) _handlers = _handlers.filter(h => h.cb === cb);\n  },\n};\n\nmodule.exports = states;\n","'use strict';\n\nconst $ = require('jquery');\n\nexports.applyTagsinput = function(sel, tags='', opts={}) {\n  sel = sel || 'input[data-role=tagsinput]';\n  var $el = sel.jquery ? sel : $(sel);\n  tags = Array.isArray(tags) ? tags.join(',') : tags;\n  $el.tagsinput('add', tags);\n};\n\n","\nimport './scss/site.scss';\nimport './scss/admin.scss';\n\nimport '../../web/ui';\n\nconst { ui } = require('minstatic');\n\nui.register('Holder', require('holderjs'));\n\nconst { profile, xbarc } = ui.modules;\nif (profile.mode !== 'static') xbarc.connect();\n","\nvar content = require(\"!!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/src/index.js??ref--6-3!../../../node_modules/sass-loader/dist/cjs.js!./admin.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/src/index.js??ref--6-3!../../../node_modules/sass-loader/dist/cjs.js!./admin.scss\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/src/index.js??ref--6-3!../../../node_modules/sass-loader/dist/cjs.js!./admin.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","\nvar content = require(\"!!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/src/index.js??ref--6-3!../../../node_modules/sass-loader/dist/cjs.js!./site.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/src/index.js??ref--6-3!../../../node_modules/sass-loader/dist/cjs.js!./site.scss\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/src/index.js??ref--6-3!../../../node_modules/sass-loader/dist/cjs.js!./site.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","module.exports = jQuery;","module.exports = ko;","module.exports = minstatic;"],"sourceRoot":""}