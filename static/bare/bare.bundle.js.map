{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:////Users/pikachu/ws/aliceart/lib/access.js","webpack:////Users/pikachu/ws/aliceart/lib/app-mixin.js","webpack:////Users/pikachu/ws/aliceart/lib/array-like.js","webpack:////Users/pikachu/ws/aliceart/lib/assert.js","webpack:////Users/pikachu/ws/aliceart/lib/assign.js","webpack:////Users/pikachu/ws/aliceart/lib/assure.js","webpack:////Users/pikachu/ws/aliceart/lib/clone.js","webpack:////Users/pikachu/ws/aliceart/lib/define.js","webpack:////Users/pikachu/ws/aliceart/lib/each.js","webpack:////Users/pikachu/ws/aliceart/lib/emitter.js","webpack:////Users/pikachu/ws/aliceart/lib/ensure.js","webpack:////Users/pikachu/ws/aliceart/lib/env.js","webpack:////Users/pikachu/ws/aliceart/lib/error-map.js","webpack:////Users/pikachu/ws/aliceart/lib/find-index.js","webpack:////Users/pikachu/ws/aliceart/lib/for-own.js","webpack:////Users/pikachu/ws/aliceart/lib/includes-all.js","webpack:////Users/pikachu/ws/aliceart/lib/index.js","webpack:////Users/pikachu/ws/aliceart/lib/is-object.js","webpack:////Users/pikachu/ws/aliceart/lib/klass.js","webpack:////Users/pikachu/ws/aliceart/lib/map.js","webpack:////Users/pikachu/ws/aliceart/lib/match.js","webpack:////Users/pikachu/ws/aliceart/lib/named-list.js","webpack:////Users/pikachu/ws/aliceart/lib/omit.js","webpack:////Users/pikachu/ws/aliceart/lib/pick.js","webpack:////Users/pikachu/ws/aliceart/lib/plug.js","webpack:////Users/pikachu/ws/aliceart/lib/preorder.js","webpack:////Users/pikachu/ws/aliceart/lib/simple-app.js","webpack:////Users/pikachu/ws/aliceart/lib/to-map.js","webpack:////Users/pikachu/ws/aliceart/lib/tree.js","webpack:////Users/pikachu/ws/aliceart/lib/ui/asset-loader.js","webpack:////Users/pikachu/ws/aliceart/lib/ui/cards.js","webpack:////Users/pikachu/ws/aliceart/lib/ui/comp.js","webpack:////Users/pikachu/ws/aliceart/lib/ui/dom.js","webpack:////Users/pikachu/ws/aliceart/lib/ui/event-source.js","webpack:////Users/pikachu/ws/aliceart/lib/ui/index.js","webpack:////Users/pikachu/ws/aliceart/lib/ui/loadjs.js","webpack:////Users/pikachu/ws/aliceart/lib/utils.js","webpack:////Users/pikachu/ws/aliceart/lib/xbarc.js","webpack:///./scss/custom.scss?62cf","webpack:////Users/pikachu/ws/aliceart/node_modules/style-loader/lib/addStyles.js","webpack:////Users/pikachu/ws/aliceart/node_modules/style-loader/lib/urls.js","webpack:////Users/pikachu/ws/aliceart/node_modules/turbolinks/dist/turbolinks.js","webpack:///(webpack)/buildin/global.js","webpack:////Users/pikachu/ws/aliceart/xbar/xbars/client/xbars-app.js","webpack:///./client.js","webpack:///./scss/custom.scss?8d9c","webpack:///external \"ko\""],"names":["module","exports","access","path","otherwise","obj","obtain","value","undefined","split","name","child","last","length","i","get","set","map","arr","item","find","val","n","joinTree","tree","join","emit","event","src","fn","NAME","replace","apply","Array","prototype","slice","call","arguments","onEvent","on_fusing","plug","apps","spec","need","on_token","token","accept","toString","Object","arrayLike","isArray","assert","b","Error","isObject","require","pick","isIn","key","indexOf","hasKey","keys","same","k","assign","data","fields","excepts","len","assure","from","names","args","clone","depth","ret","forEach","define","prop","target","mthd","defineProperty","forward","delegate","renames","field","each","me","Emitter","mixin","on","addEventListener","_callbacks","push","once","off","removeListener","removeAllListeners","removeEventListener","callbacks","cb","splice","listeners","hasListeners","ensure","_init","parent","base","env","create","Env","root","values","_pick","to","opts","pop","pushEnv","error","errors","err","property","msg","message","_push","findIndex","forOwn","includesAll","vals","every","global","klass","subclass","asclass","subobject","arg","init","Function","bind","instance","writable","__class","derived","nonNull","filter","match","argn","pat","j","matcher","NamedList","keyName","items","allowNullKey","nullKey","factory","itemMap","reset","add","promote","idx","unshift","getAt","update","updateAt","move","setAll","isFn","it","old","remove","removeAll","truncate","limit","retainAll","delKeys","rename","oldKey","newKey","size","isEmpty","has","Math","floor","isFinite","tmp","first","exclude","concat","its","kn","interset","inverse","union","obtainAttr","attr","listAttr","listAttrGet","setAttr","newSet","mapAttr","newMap","arrayAttr","newArray","arrayAttrMerge","objs","Set","Map","omit","omits","picked","Plug","app","SPEC","role","appType","type","forType","for","localDecls","local","xbarDecls","xbar","needs","info","setTree","emitApp","_invokeApp","kind","askApp","callApp","xemitApp","xaskApp","fusing0","plugs","closestPlugs","p","fusing","unplugging","unplugged","ancester","fused","defusing","detaching","detached","hasRole","onPlug","offerPlug","preorder","host","AppMixin","toMap","isFun","DEBUG","Tree","locals","Namespace","namespace","_ns","_trees","_plugs","_fused","isRoot","isDetached","isFused","children","childAt","addChild","removeChild","callPlugPreOrder","replaceChild","lookup","isDev","NODE_ENV","plugIn","unplug","_insertPlug","plugApp","collectPlugs","collectPlugMap","skip","specifics","fuse","es","_fusedEvents","emitPreOrder","defuse","newPlug","func","ex","console","emitAfterFused","xemit","xemitPreOrder","callAppPreOrder","askPreOrder","xask","askPlugPreOrder","xaskPreOrder","callPreOrder","rets","noSkip","callPreOrderWaiting","Promise","all","callEach","callChildren","ch","loadAsset","asset","varName","checkHeader","window","resolve","test","isCss","tname","head","document","getElementsByTagName","elems","getAttribute","tag","createElement","setAttribute","async","onreadystatechange","onload","state","readyState","appendChild","loadAssets","assets","loadIt","previous","then","dom","Comp","_init0","extra","outer","targetSel","_cards","_target","_findTarget","_outer","origH","offsetHeight","_extra","_card","c","cardId","elem","inst","hasCard","showCard","cardCls","params","show","obtainCard","card","isBody","body","before","after","classList","parentNode","insertAfter","insertBefore","cntx","hideCard","on_cancel","sel","newVal","html","_applyBindings","events","_bounded","ApplyBindings","_joinPage","pageInfo","ptree","cntxEmit","evt","cancel","vm","closestData","koShowCardBefore","ko","comp","id","koShowCard","koShowCardAfter","noHide","$target","jquery","$","hideClass","addClass","hide","cards","$comp","hiding","applyBindings","koHideCard","removeClass","_turbolinks","x","ready","closest","elev","selector","matchesSelector","matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","parentElement","selFn","charAt","found","getElementById","substr","classes","getElementsByClassName","querySelectorAll","el","hasAttribute","innerHTML","traverseForm","form","nodeName","elements","selected","toLowerCase","disabled","options","option","checked","formData","s","encodeURIComponent","formJson","elemId","fn2","noPrevent","e","preventDefault","stopProp","stopPropagation","dataset","setTurbolinks","turbolinks","visit","url","location","pathname","reload","replaceWithTurbolinks","dispatch","eval","EventSource","_EventSource","RECONNECT","reTrim","eventsource","xhrTimeout","activityTimeout","interval","lastEventId","cache","SyntaxError","URL","CONNECTING","_pollTimer","_xhr","pollAgain","intv","setTimeout","poll","CLOSED","xhr","XMLHttpRequest","open","setRequestHeader","tick","timeout","status","OPEN","dispatchEvent","responseText","parts","eventType","line","retry","parseInt","isNaN","MessageEvent","send","checkActivity","abort","close","clearTimeout","handlers","handler","onerror","onmessage","onopen","origin","ui","assetLoader","eventSource","Cards","rd","rdall","_mods","_modules","_waits","loadjs","modules","modName","mod","loaded","result","load","rdload","prdload","arg0","rest","q","waits","register","log","wait","scriptId","querySelector","utils","BASE16","BASE62","BASE64","randomString","letters","Number","random","randomHex","transfilter","trans","noFilter","pickAll","noUndef","key2","$set","$unset","$push","$pull","at","$currentDate","arrayToObject","endsWith","str","suffix","slen","array","serialize","sort","JSON","stringify","trim","sep","ell","hashCode","hash","chr","charCodeAt","hashString","nseg","seg","ceil","start","hashColor","min","g","r","rgb","rgbToHex","componentToHex","hex","timestamp","NaN","ts","Date","parse","getTimestamp","getTime","valueOf","toDate","epochDates","date","epochSeconds","utcDateString","includesTime","getUTCFullYear","y","m","getUTCMonth","d","getUTCDate","h","getUTCHours","getUTCMinutes","getUTCSeconds","randomObjectId","seed","msecs","dateObjectId","offset","dates","prefix","secondsObjectId","secs","range","step","a","extname","lastIndexOf","substring","testAll","identity","re","RegExp","hasNull","hasTags","tags","rejects","containsTags","filterTags","tagsChecker","arr2","intersection","RESERVED","config","connected","disconnected","Xbarc","fetch","_connId","_listeners","onMessage","onOpen","onError","_fetch","_clientId","clientId","_clientSecret","clientSecret","_xbarId","xbarId","_eventSource","_headers","headers","_tokenField","tokenField","_ajaxHeaders","_resolve","connId","_rejectFn","_resolveFn","_events","tap","listener","parseAndEmit","_es","connect","_waitConnId","reject","ls","disconnect","toggle","getConnId","_getAjaxHeaders","authToken","localStorage","getItem","post","req","verb","method","res","text","postApp","appName","pushApp","ask","json","xbarc","xbars","updateListeners","aname","minstatic","profile","PROFILE","mode","bindingHandlers","stopBinding","controlsDescendantBindings","virtualElements","allowedBindings","HttpRequest","requestLoaded","endRequest","code","requestCompletedWithResponse","getResponseHeader","failed","requestFailedWithStatusCode","_curUrl","updateUrl","oldUrl"],"mappings":"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A;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;;AAEA,cAAc,mBAAO,CAAC,2DAAQ;;AAE9B;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA,iBAAiB,mBAAmB;AACpC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,iBAAiB,sBAAsB;AACvC;;AAEA;AACA,mBAAmB,2BAA2B;;AAE9C;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB,mBAAmB;AACnC;AACA;;AAEA;AACA;;AAEA,iBAAiB,2BAA2B;AAC5C;AACA;;AAEA,QAAQ,uBAAuB;AAC/B;AACA;AACA,GAAG;AACH;;AAEA,iBAAiB,uBAAuB;AACxC;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA;;AAEA,gBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA;AACA,cAAc;;AAEd,kDAAkD,sBAAsB;AACxE;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA,KAAK,KAAwC,EAAE,EAE7C;;AAEF,QAAQ,sBAAiB;AACzB;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;;AAEA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uDAAuD;AACvD;;AAEA,6BAA6B,mBAAmB;;AAEhD;;AAEA;;AAEA;AACA;;;;;;;;;;;;;AC9YA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,WAAW,EAAE;AACrD,wCAAwC,WAAW,EAAE;;AAErD;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,sCAAsC;AACtC,GAAG;AACH;AACA,8DAA8D;AAC9D;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;AACA;;;;;;;;;;;;ACxFA;AACA;AACA;AACA;AACA,YAAY,WAAW,YAAY,YAAY,iBAAiB,qBAAqB,yGAAyG,uBAAuB,+BAA+B,uBAAuB,iCAAiC,iCAAiC,6CAA6C,aAAa,UAAU,mBAA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","file":"bare.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","\nmodule.exports = access;\n\nfunction access(path, otherwise, obj, obtain, value) {\n  if (typeof path === 'function') {\n    obj = path(obj);\n    return obj === undefined ? otherwise : obj;\n  }\n\n  if (!obj || typeof obj !== 'object') return otherwise;\n    \n  if (typeof path === 'string') path = path.split('.');\n\n  var name, child, last = path.length-1;\n  if (last < 0) return obj;\n\n  for (var i=0; i<last; i++) {\n    name = path[i];\n    child = obj[name];\n    if (child === undefined) {\n      if (!obtain) return otherwise;\n\n      obj = (obj[name] = {});\n    } else if (child && typeof child === 'object') {\n      obj = child;\n    } else {\n      return otherwise; \n    }\n  }\n\n  name = path[last];\n  child = obj[name];\n  if (obtain && value !== undefined) {\n    obj[name] = value;\n  }\n  return child === undefined ? otherwise : child;\n}\n\naccess.get = function(obj, path, otherwise) {\n  return access(path, otherwise, obj);\n};\n\naccess.obtain = function(obj, path, otherwise) {\n  return access(path, otherwise, obj, true);\n};\naccess.set = function(obj, path, value) {\n  return access(path, undefined, obj, true, value);\n};\n\naccess.map = function(arr, path, otherwise) {\n  if (typeof path === 'string') path = path.split('.');\n  return arr.map(function(item) {\n    return access(path, otherwise, item);\n  }); \n};\n\naccess.find = function(arr, path, val) {\n  if (!arr || !path) return;\n\n  if (typeof path === 'string') path = path.split('.');\n\n  for (var i=0, n=arr.length; i<n; i++) {\n    var obj = arr[i];\n    if (access(path, undefined, obj) === val) return obj;\n  }\n};\n\n\n","'use strict';\n\nmodule.exports = {\n  joinTree: function(tree) {\n    this.tree = tree;\n    tree.join(this);\n  },\n\n  emit(event, src) {\n    let fn;\n    if (src && src.NAME) {\n      let name = src.NAME.replace(/[-\\/\\.]/g, '_');\n      fn = this[`on_${event}_${name}`];\n    }\n    fn = fn || this[`on_${event}`];\n\n    if (typeof fn === 'function') {\n      return fn.apply(this, Array.prototype.slice.call(arguments, 1));\n    } else if (typeof (fn = this.onEvent) === 'function') {\n      return fn.apply(this, arguments);\n    }\n  },\n\n  on_fusing: function(plug, apps, spec) {\n    if (!apps[0]) return;\n\n    var need = spec.need.replace(/[-\\/\\.]/g, '_');\n    var fn = this['need_' + need];\n    if (typeof fn === 'function') fn.call(this, apps[0], spec, plug);\n  },\n\n  on_token: function(plug, token, spec) {\n    var accept = spec.accept.replace(/[-\\/\\.]/g, '_');\n    var fn = this['accept_' + accept];\n    if (typeof fn === 'function') fn.call(this, token, spec, plug);\n  },\n};\n\n","'use strict';\n\nvar toString = Object.prototype.toString;\nmodule.exports = function arrayLike(obj) {\n  return Array.isArray(obj)\n      || !!obj && typeof obj === 'object' && toString.call(obj) === '[object Arguments]';\n};\n","'use strict';\n\nmodule.exports = function assert(b) {\n  if (b) return;\n  if (arguments.length === 1) throw Error('ERROR'); \n\n  throw Error([].slice.call(arguments, 1).join(' '));\n};\n","'use strict';\n\nvar isObject = require('./is-object');\nvar pick = require('./pick');\n\nfunction isIn(arr) {\n  return function(key) { return arr.indexOf(key) >= 0; }\n}\nfunction hasKey(keys) {\n  return function(key) { return keys[key]; }\n}\nfunction same(k) {\n  return function(key) { return k === key; }\n}\n\nfunction assign(obj, data, fields, excepts) {\n  if (!obj || !data) return obj;\n  if (typeof obj !== 'object' || !isObject(data)) return obj;\n  if (!fields && !excepts) return Object.assign(obj, data);\n\n  var keys = Array.isArray(fields) ? fields : Object.keys(data);\n  var len = keys.length;\n  if (len === 0) return obj;\n\n  var fn = !excepts ? false\n    : (typeof excepts === 'string' ? same(excepts)\n    : (typeof excepts === 'function' ? excepts \n    : (Array.isArray(excepts) ? isIn(excepts) : hasKey(excepts))));\n\n  for (var i=0; i<len; i++) {\n    var key = keys[i];\n    if (!fn || !fn(key)) {\n      var val = data[key];\n      if (val !== undefined) obj[key] = val; \n    }\n  }\n  return obj;\n}\n\nmodule.exports = assign;\n","\nvar arrayLike = require('./array-like');\n\nmodule.exports = function assure(obj, from, names) {\n  var i = arrayLike(names) ? 0 : 2;\n  var args = i === 0 ? names : arguments;\n  for (var n=args.length; i<n; i++) {\n    var name = args[i];\n    var val = from[name];\n    if (val == null) throw Error('missing ' + name);\n    obj[name] = val;\n  }\n  return obj;\n};\n\n","'use strict';\n\nconst arrayLike = require('./array-like');\n\nfunction clone(obj, fn, depth) {\n  depth = depth >= 0 ? depth : 10;\n  if (depth === 0) return;\n\n  if (fn) obj = fn(obj);\n\n  if (typeof obj === 'function') return;\n\n  if (!obj || typeof obj !== 'object') return obj;\n\n  if (arrayLike(obj)) {\n    return Array.prototype.map.call(obj, function(item) {\n      return clone(item, fn, depth-1);\n    });\n  }\n\n  let ret = {};\n  Object.keys(obj).forEach(function(key) {\n    ret[key] = clone(obj[key], fn, depth-1);\n  });\n  return ret;\n}\n\nmodule.exports = clone;\n","'use strict';\n\nfunction define(obj, prop, target, mthd, args) {\n  if (typeof target === 'string') {\n    args = mthd;\n    mthd = target;\n    target = obj;\n  }\n  args = args || [];\n  var fn = target[mthd];\n  var ret;\n  Object.defineProperty(obj, prop, {\n    get: function() { return ret === undefined ? (ret = fn.apply(target, args)) : ret; }\n  });\n  return obj;\n}\n\ndefine.forward = function delegate(obj, fields, target, renames) {\n  fields.forEach(function(field) {\n    var name = renames && renames[field] || field; \n    Object.defineProperty(obj, field, {\n      get: function() { return target[name]; }\n    });\n  });\n  return obj;\n};\n\nmodule.exports = define;\n","'use strict';\n\nvar arrayLike = require('./array-like');\n\nmodule.exports = function each(obj, fn, me) {\n  if (!obj || typeof obj !== 'object') return;\n\n  if (arrayLike(obj)) {\n    for (var i=0, n=obj.length; i<n; i++) {\n      fn.call(me, obj[i], i);\n    }\n  } else {\n    Object.keys(obj).forEach(function(key) {\n      fn.call(me, obj[key], key);\n    });\n  }\n};\n","// https://github.com/component/emitter \n// Copyright (c) 2014 Component contributors <dev@component.io>\n\n/**\n * Expose `Emitter`.\n */\n\nif (typeof module !== 'undefined') {\n  module.exports = Emitter;\n}\n\n/**\n * Initialize a new `Emitter`.\n *\n * @api public\n */\n\nfunction Emitter(obj) {\n  if (obj) return mixin(obj);\n};\n\n/**\n * Mixin the emitter properties.\n *\n * @param {Object} obj\n * @return {Object}\n * @api private\n */\n\nfunction mixin(obj) {\n  for (var key in Emitter.prototype) {\n    obj[key] = Emitter.prototype[key];\n  }\n  return obj;\n}\n\n/**\n * Listen on the given `event` with `fn`.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.on =\nEmitter.prototype.addEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\n    .push(fn);\n  return this;\n};\n\n/**\n * Adds an `event` listener that will be invoked a single\n * time then automatically removed.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.once = function(event, fn){\n  function on() {\n    this.off(event, on);\n    fn.apply(this, arguments);\n  }\n\n  on.fn = fn;\n  this.on(event, on);\n  return this;\n};\n\n/**\n * Remove the given callback for `event` or all\n * registered callbacks.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.off =\nEmitter.prototype.removeListener =\nEmitter.prototype.removeAllListeners =\nEmitter.prototype.removeEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n\n  // all\n  if (0 == arguments.length) {\n    this._callbacks = {};\n    return this;\n  }\n\n  // specific event\n  var callbacks = this._callbacks['$' + event];\n  if (!callbacks) return this;\n\n  // remove all handlers\n  if (1 == arguments.length) {\n    delete this._callbacks['$' + event];\n    return this;\n  }\n\n  // remove specific handler\n  var cb;\n  for (var i = 0; i < callbacks.length; i++) {\n    cb = callbacks[i];\n    if (cb === fn || cb.fn === fn) {\n      callbacks.splice(i, 1);\n      break;\n    }\n  }\n\n  // Remove event specific arrays for event types that no\n  // one is subscribed for to avoid memory leak.\n  if (callbacks.length === 0) {\n    delete this._callbacks['$' + event];\n  }\n\n  return this;\n};\n\n/**\n * Emit `event` with the given args.\n *\n * @param {String} event\n * @param {Mixed} ...\n * @return {Emitter}\n */\n\nEmitter.prototype.emit = function(event){\n  this._callbacks = this._callbacks || {};\n  var args = [].slice.call(arguments, 1)\n    , callbacks = this._callbacks['$' + event];\n\n  if (callbacks) {\n    callbacks = callbacks.slice(0);\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\n      callbacks[i].apply(this, args);\n    }\n  }\n\n  return this;\n};\n\n/**\n * Return array of callbacks for `event`.\n *\n * @param {String} event\n * @return {Array}\n * @api public\n */\n\nEmitter.prototype.listeners = function(event){\n  this._callbacks = this._callbacks || {};\n  return this._callbacks['$' + event] || [];\n};\n\n/**\n * Check if this emitter has `event` handlers.\n *\n * @param {String} event\n * @return {Boolean}\n * @api public\n */\n\nEmitter.prototype.hasListeners = function(event){\n  return !! this.listeners(event).length;\n};\n","\nvar arrayLike = require('./array-like');\n\nmodule.exports = function ensure(obj, names) {\n  var i = arrayLike(names) ? 0 : 1;\n  var args = i === 0 ? names : arguments;\n  for (var n=args.length; i<n; i++) {\n    var name = args[i];\n    if (obj[name] == null) throw Error('missing ' + name);\n  }\n  return obj;\n};\n\n","'use strict';\n\nvar ensure = require('./ensure');\nvar arrayLike = require('./array-like');\nvar slice = Array.prototype.slice;\n\nfunction _init(parent, base, args, i) {\n  var env = Object.create(Env);\n  env.parent = parent;\n  env.root = parent ? parent.root: env;\n  env.values = parent ? Object.create(parent.values)\n    : (base ? Object.create(base.values) : {});\n\n  if (base) env.base = base;\n  if (args) {\n    for (var n=args.length; i<n; i++) {\n      env.set(args[i]);\n    }\n  }\n  return env;\n}\n\nfunction _pick(obj, names, i, to) { //, to2) {\n  for (var n=names.length; i<n; i++) {\n    var name = names[i];\n    var val = obj[name];\n    if (val !== undefined) {\n      to[name] = val;\n      //if (to2) to2[name] = val;\n    }\n  }\n  return to;\n}\n\nvar Env = {\n  push: function(opts, names) {\n    var env = _init(this);\n    if (typeof opts === 'string') {\n      env.set(opts, names);\n    } else if (arguments.length < 2) {\n      if (opts) env.set(opts);\n    } else {\n      var i = arrayLike(names) ? 0 : 1;\n      var args = i === 0 ? names : arguments;\n      _pick(opts, args, i, env.values);\n    }\n    return env;\n  },\n  pop: function() {\n    return this.parent;\n  },\n  set: function(key, val) {\n    var values = this.values;\n    if (typeof key === 'string') {\n      if (val !== undefined) values[key] = val;\n    } else if (key) {\n      Object.keys(key).forEach(function(name) {\n        val = key[name];\n        if (val !== undefined) values[name] = val;\n      });\n    }\n    return this;\n  },\n  get: function(name) {\n    return this.values[name];\n  },\n  pick: function(names) {\n    var args = arrayLike(names) ? names : arguments;\n    return _pick(this.values, args, 0, {});\n  },\n  ensure: function(names) {\n    var args = arrayLike(names) ? names : arguments;\n    return ensure.call(null, this.values, args);\n  },\n  pushEnv: function(env, names) {\n    var args = arrayLike(names) ? names : slice.call(arguments, 1);\n    return this.push(env.values, args);\n  },\n  //frame: function() {\n  //  return _init(null, this, arguments, 0);\n  //},\n};\n\nmodule.exports = function(base) {\n  return _init(null, base, arguments, 1); \n};\n","\nmodule.exports = function(ret) {\n  if (!ret || (!ret.error && !ret.errors)) return null; \n\n  if (ret.error) return { error: [ret.error] };\n\n  var errors = ret.errors;\n  var map = {}; \n  if (Array.isArray(errors)) {\n    errors.forEach(function(err) {\n      var name = err && (err.property || err.path || err.name);\n      var msg = err.message || err.error;\n      if (name) {\n        if (err.property) msg = name + ' ' + msg; \n        _push(map, name, msg);\n      }\n    });\n  } else {\n    Object.keys(errors).forEach(function(key) {\n      var err = errors[key];\n      if (Array.isArray(err)) map[key] = err;\n      else _push(map, key, err);\n    });\n  }\n  return map;\n}\n\nfunction _push(map, name, msg){\n  if (name && msg) {\n    var arr = map[name] || (map[name] = []);\n    arr.push(msg);\n  }\n}\n\n","'use strict';\n\nfunction findIndex (arr, key, val) {\n  for (var i=0, n=arr.length; i<n; i++) {\n    var obj = arr[i];\n    if (obj && obj[key] === val) return i;\n  }\n  return -1;\n}\n\nmodule.exports = findIndex;\n","\nmodule.exports = function forOwn(obj, fn, me) {\n  if (!obj) return;\n  if (Array.isArray(obj)) return obj.forEach(fn, me);\n  if (typeof obj === 'object') {\n    Object.keys(obj).forEach(key => fn(obj[key], key, me));\n  }\n}\n","'use strict';\n\nmodule.exports = function includesAll(arr, vals) {\n  if (!arr) return false;\n  if (!Array.isArray(vals)) return arr.indexOf(vals) >= 0;\n\n  var len = vals.length;\n  if (len === 0) return true;\n  if (len === 1) return arr.indexOf(vals[0]) >= 0;\n  return vals.every(function (val) { return arr.indexOf(val) >= 0; });\n};\n\n","module.exports = global[\"minstatic\"] = require(\"-!./index.js\");","'use strict';\n\nmodule.exports = function isObject(val) {\n  return val != null && typeof val === 'object' && Array.isArray(val) === false;\n};\n","'use strict';\n\nmodule.exports = function() {\n  var klass = {\n    subclass: subclass,\n    asclass: asclass,\n    subobject: subobject,\n  };\n\n  Array.prototype.forEach.call(arguments, function(arg) {\n    if (typeof arg === 'function') {\n      if (!klass.init) {\n        // just override init, subclass, instance, ...\n        klass = Object.assign(Object.create(arg.prototype), klass);\n        klass.init = function() {\n          return new (Function.prototype.bind.apply(arg, arguments));\n        };\n      } else {\n        // no effect if arg is ES6 class\n        Object.assign(klass, arg.prototype);\n      }\n    } else {\n      Object.assign(klass, arg);\n    }\n  });\n\n  klass.instance = instance.bind(klass);\n  Object.defineProperty(klass, 'klass', {\n    value: klass,\n    writable: false\n  });\n\n  return klass;\n};\n\nfunction asclass() {\n  if (arguments.length > 0) { // shorthand of subclass(...).asclass()\n    return subclass.apply(this, arguments).asclass();\n  }\n\n  if (!this.__class) { // this is klass\n    this.__class = function() {\n      if (this.init) this.init.apply(this, arguments);\n    }.bind(this);\n    this.__class.prototype = this;\n  }\n  return this.__class;\n}\n\nfunction subclass() {\n  var derived = Object.create(this); // this is klass, so is derived\n  for (var i=0, n=arguments.length; i<n; i++) {\n    Object.assign(derived, arguments[i]);\n  }\n\n  derived.instance = instance.bind(derived);\n  Object.defineProperty(derived, 'klass', {\n    value: derived,\n    writable: false\n  });\n  return derived;\n}\n\nfunction instance() {\n  var obj = Object.create(this); // this is klass\n  return this.init && this.init.apply(obj, arguments) || obj;\n}\n\nfunction subobject() { // inherit instance\n  var obj = Object.create(this); // this is instance\n  for (var i=0, n=arguments.length; i<n; i++) {\n    Object.assign(obj, arguments[i]);\n  }\n  return obj;\n}\n\n","'use strict';\n\nvar arrayLike = require('./array-like');\nvar access = require('./access');\n\nfunction nonNull(obj) { return obj != null; }\n\nmodule.exports = function map(obj, fn, me, filter) {\n  if (typeof fn === 'string' || arrayLike(fn)) {\n    fn = access.bind(null, fn, undefined);\n  }\n  if (filter && typeof filter !== 'function') filter = nonNull;\n\n  var ret, val, i, n;\n  if (arrayLike(obj)) {\n    ret = [];\n    for (i=0, n=obj.length; i<n; i++) {\n      val = fn.call(me, obj[i], i, obj);\n      if (!filter || filter(val, i, obj)) ret.push(val);\n    }\n  } else {\n    ret = {};\n    var keys = Object.keys(obj);\n    for (i=0, n=keys.length; i<n; i++) {\n      var key = keys[i];\n      val = fn.call(me, obj[key], key, obj);\n      if (!filter || filter(val, key, obj)) ret[key] = val;\n    }\n  }\n  return ret;\n};\n\n","'use strict';\n\nfunction match (obj) {\n  if (!obj || typeof obj !== 'object') return false;\n\n  for (var i = 1, argn = arguments.length; i < argn; i++) {\n    var pat = arguments[i];\n    var keys = Object.keys(pat);\n    for (var j = 0, n = keys.length; j < n; j++) {\n      var key = keys[j];\n      var val = pat[key];\n      if (val !== undefined && obj[key] !== val) return false;\n    }\n  }\n  return true;\n}\n\nmatch.matcher = matcher;\nfunction matcher() {\n  var args = arguments;\n  return function (obj) {\n    return match.bind(null, obj).apply(null, args);\n  };\n}\n\nmatch.filter = function(arr, opts) {\n  return !arr ? [] : arr.filter(typeof opts === 'function' ? opts : matcher(opts));\n};\n\nmodule.exports = match;\n","'use strict';\n\nvar assign = require('./assign');\nvar map = require('./map');\nvar matcher = require('./match').matcher;\nvar findIndex = require('./find-index');\nvar arrayLike = require('./array-like');\n\n// array of objects with null or unique-key field and filtering utilities\nvar NamedList = {\n  //INCR_ATTR: function incrAttr(key, old, item) {},\n\n  instance: function(opts, keyName) {\n    return Object.create(NamedList).init(opts, keyName);\n  },\n\n  init: function(opts, keyName) {\n    if (typeof opts === 'string') {\n      opts = { key: opts };\n    } else if (Array.isArray(opts)) {\n      opts = { items: opts, key: keyName }\n    } else {\n      opts = opts || {};\n    }\n\n    this.allowNullKey = !!opts.nullKey; // default false\n    this.keyName = opts.key || 'name';\n    this.factory = opts.factory;\n    this.items = [];\n    this.itemMap = {};\n    this.reset(opts.items);\n    return this;\n  },\n\n  reset: function(items) {\n    this.items.length = 0;\n    this.itemMap = {};\n    if (Array.isArray(items)) {\n      for (var i=0; i<items.length; i++) {\n        this.add(items[i]);\n      }\n    }\n  },\n  get: function(key) {\n    if (key != null) return this.itemMap[key];\n  },\n  obtain: function(key, promote) {\n    if (key == null) return;\n    var item = this.itemMap[key];\n    if (item) {\n      if (promote && this.items[0] !== item) {\n        var idx = this.items.indexOf(item);\n        this.items.splice(idx, 1);\n        this.items.unshift(item);\n      }\n    } else {\n      item = this.factory ? this.factory() : {};\n      item[this.keyName] = key;\n      this.itemMap[key] = item;\n      if (promote) {\n        this.items.unshift(item);\n      } else {\n        this.items.push(item);\n      }\n    }\n    return item;\n  },\n  getAt: function(idx) {\n    return this.items[idx];\n  },\n  update: function(key, data, fields) {\n    return assign(this.get(key), data, fields, this.keyName);\n  },\n  updateAt: function(idx, data, fields) {\n    return assign(this.items[idx], data, fields, this.keyName);\n  },\n\n  add: function(item, replace) {\n    if (!item) return this;\n\n    var key = item[this.keyName];\n    if (key != null) {\n      if (this.itemMap[key]) {\n        if (!replace) throw Error('item ' + key + ' exists');\n\n        var idx = findIndex(this.items, this.keyName, key);\n        this.items[idx] = item;\n      } else {\n        this.items.push(item);\n      }\n      this.itemMap[key] = item;\n    } else if (this.allowNullKey) {\n      this.items.push(item);\n    }\n    return this;\n  },\n\n  set: function(item, idx) {\n    this.add(item, true);\n    if (arguments.length > 1) this.move(item, idx);\n    return this;\n  },\n  setAll: function(items, fn) { // falsy fn - overwrite\n    var me = this, isFn = typeof fn === 'function';\n    items.forEach(function(it) {\n      var key = it[me.keyName];\n      if (key) {\n        var old = me.get(key);\n        if (isFn) {\n          var obj = fn(key, old, it);\n          if (obj) me.set(obj);\n        } else if (!fn) {\n          me.add(it, true);\n        }\n      }\n    });\n  },\n  remove: function(item) {\n    var key = typeof item === 'string' ? item : (item && item[this.keyName]);\n\n    if (key != null) {\n      if (this.itemMap[key]) {\n        var idx = findIndex(this.items, this.keyName, key);\n        this.items.splice(idx, 1);\n        delete this.itemMap[key];\n      }\n    } else if (item && this.allowNullKey) {\n      for (var i=this.items.length; i>= 0; i--) {\n        if (this.items[i] === item) this.items.splice(i, 1);\n      }\n    }\n    return this;\n  },\n\n  removeAll: function(keys) {\n    var map = this.itemMap, keyName = this.keyName;\n    keys.forEach(function(key) { delete map[key]; });\n    this.items = this.items.filter(function(it) {\n      return !(keyName in it) || map[it[keyName]];\n    });\n    return this;\n  },\n\n  pop: function() {\n    var last = this.items.pop();\n    if (last && this.keyName in last) {\n      delete this.itemMap[last[this.keyName]];\n    }\n    return last;\n  },\n\n  truncate: function(limit) {\n    var len = this.items.length;\n    if (len <= limit) return;\n\n    var map = this.itemMap, keyName = this.keyName;\n    this.items.forEach(function(it) {\n      if (keyName in it) delete map[it[keyName]];\n    });\n    this.items.length = limit;\n    return this;\n  },\n\n  retainAll: function(keys) {\n    var map = this.itemMap;\n    var delKeys = keys.filter(function(key) { return !map[key]; });\n    this.removeAll(delKeys);\n    return this;\n  },\n\n  rename: function(oldKey, newKey) {\n    if (typeof oldKey !== 'string' || typeof newKey !== 'string') return false;\n\n    var old = this.get(oldKey);\n    if (!old) return false;\n\n    if (oldKey === newKey) return true;\n\n    if (this.itemMap[newKey]) return false; \n\n    old[this.keyName] = newKey;\n    delete this.itemMap[oldKey];\n    this.itemMap[newKey] = old;\n    return true;\n  },\n\n  size: function() {\n    return this.items.length;\n  },\n\n  isEmpty: function() {\n    return this.items.length === 0;\n  },\n\n  indexOf: function(item) {\n    return item ? this.items.indexOf(item) : -1;\n  },\n\n  has: function(item) {\n    return typeof item === 'string' ? item in this.itemMap : this.indexOf(item) >= 0;\n  },\n\n  move: function(item, idx) {\n    idx = Math.floor(idx);\n    if (!isFinite(idx)) return -1;\n\n    var items = this.items, len = items.length;\n    if (len === 0) return -1;\n\n    if (typeof item === 'string') item = this.itemMap[item];\n    if (!item) return -1;\n\n    var old = this.indexOf(item);\n    if (old < 0) return -1;\n\n    if (idx < 0) idx = len + idx;\n    idx = idx < 0 ? 0 : (idx >= len ? len - 1 : idx);\n    if (old === idx) return idx;\n\n    var tmp = items[idx];\n    items[idx] = item;\n    items[old] = tmp;\n    return idx;\n  },\n\n  keys: function() {\n    return Object.keys(this.itemMap);\n  },\n  each: function(fn, me) {\n    this.items.forEach(fn, me);\n  },\n  map: function(fn, me, filter) {\n    return map(this.items, fn, me, filter);\n  },\n\n  filter: function(opts, me) {\n    if (!opts) return this.items;\n\n    var fn = typeof opts === 'function' ? opts : matcher(opts);\n    return this.items.filter(fn, me === undefined ? this : me);\n  },\n\n  first: function(opts, me) {\n    if (!opts) return this.items[0];\n\n    var fn = typeof opts === 'function' ? opts : matcher(opts);\n    return this.items.find(fn, me === undefined ? this : me);\n  },\n\n  exclude: function(items) {\n    if (items.length === 0) return this.items.concat();\n\n    var its = this.items, kn = this.keyName;\n    return typeof items[0] === 'string'\n      ? its.filter(function(key) { return items.indexOf(key) < 0; })\n      : its.filter(function(it) { return findIndex(items, kn, it[kn]) < 0; });\n  },\n  interset: function(items, inverse) {\n    var me = this, kn = this.keyName;\n    return items.filter(function(it) {\n      var key = typeof it === 'string' ? it : it[kn];\n      return me.get(key) ? !inverse : inverse;\n    });\n  },\n  union: function(items) {\n    return this.items.concat(this.interset(items, true));\n  },\n\n  obtainAttr: function(name, attr, factory) {\n    var ret, item = factory ? this.obtain(name) : this.get(name);\n    if (item) {\n      if (attr in item) {\n        ret = item[attr];\n      } else if (factory) {\n        ret = item[attr] = factory() || {};\n      }\n    }\n    return ret;\n  },\n\n  listAttr: function(name, attr, opts) {\n    return this.obtainAttr(name, attr, NamedList.instance.bind(null, opts));\n  },\n  listAttrGet: function(name, attr, key) { \n    var item = this.get(name);\n    return item && item[attr] && item[attr].get(key);\n  },\n  setAttr: function(name, attr) {\n    return this.obtainAttr(name, attr, newSet);\n  },\n  mapAttr: function(name, attr) {\n    return this.obtainAttr(name, attr, newMap);\n  },\n  arrayAttr: function(name, attr) {\n    return this.obtainAttr(name, attr, newArray);\n  },\n  arrayAttrMerge: function(name, attr, objs) {\n    var arr = this.arrayAttr(name, attr);\n    if (arrayLike(objs)) {\n      for (var i=0, n=objs.length; i<n; i++) {\n        if (arr.indexOf(objs[i]) < 0) arr.push(objs[i]);\n      }\n    } else if (objs !== undefined) {\n      if (arr.indexOf(objs) < 0) arr.push(objs);\n    }\n    return arr;\n  },\n};\n\nfunction newSet() { return new Set(); }\nfunction newMap() { return new Map(); }\nfunction newArray() { return []; }\n\nmodule.exports = NamedList;\n","'use strict';\n\nvar assign = require('./assign');\n\nmodule.exports = function omit(obj, omits) {\n  return assign({}, obj, null, omits);\n};\n","'use strict';\n\nvar arrayLike = require('./array-like');\n\nfunction pick(obj, names) {\n  var picked = {};\n  if (!obj || typeof obj !== 'object') return picked;\n\n  var i = arrayLike(names) ? 0 : 1;\n  var args = i === 0 ? names : arguments;\n  for (var len = args.length; i < len; i++) {\n    var val, name = args[i];\n    if (typeof name === 'string') {\n      val = obj[name];\n    } else {\n      val = undefined;\n      Object.keys(name).forEach(function(key) {\n        if (key in obj) {\n          val = val || {};\n          val[key] = pick(obj[key], name[key]);\n        }\n      });\n    }\n    if (val !== undefined) picked[name] = val;\n  }\n  return picked;\n}\n\nmodule.exports = pick;\n","'use strict'\n\nvar klass = require('./klass')\nvar assign = require('./assign');\nvar pick = require('./pick');\nvar slice = Array.prototype.slice;\n\nvar Plug = klass({\n  init: function (app, opts) {\n    var spec = app.SPEC ? Object.assign({}, app.SPEC) : {};\n    if (opts) Object.assign(spec, opts);\n\n    this.app = app\n    this.name = spec.name || app.name || null;\n    this.role = spec.role || app.role || null;\n    this.appType = spec.type || app.type || null;\n    this.forType = spec.for || null;\n    this.localDecls = spec.local || [];\n    this.xbarDecls = spec.xbar || [];\n    this.needs = {};\n  },\n\n  info: function () {\n    var info = assign({}, this, null, ['tree', 'app']);\n    var app = this.app;\n    info.app = typeof app.info === 'function' ? app.info()\n      : pick(app, 'name', 'role', 'SPEC');\n    return info;\n  },\n\n  setTree: function(tree) {\n    this.tree = tree;\n    this.emitApp('join', this, tree);\n  },\n\n  _invokeApp: function(kind, event) {\n    var app = this.app;\n    var fn = app[kind ? kind + '_' + event : event];\n    if (typeof fn === 'function') {\n      return fn.apply(app, slice.call(arguments, 2));\n    }\n  },\n\n  emitApp: function() {\n    return this._invokeApp.apply(this, ['on'].concat(slice.call(arguments)));\n  },\n\n  askApp: function() {\n    return this._invokeApp.apply(this, ['ask'].concat(slice.call(arguments)));\n  },\n  callApp: function() {\n    return this._invokeApp.apply(this, [null].concat(slice.call(arguments)));\n  },\n  xemitApp: function() {\n    return this._invokeApp.apply(this, ['xon'].concat(slice.call(arguments)));\n  },\n\n  xaskApp: function() {\n    return this._invokeApp.apply(this, ['xask'].concat(slice.call(arguments)));\n  },\n\n  /*emitApp: function(event) {\n    var app = this.app;\n    //TODO may skip this to avoid accidents\n    if (typeof app.emit === 'function') {\n      return app.emit.apply(app, arguments);\n    }\n\n    var fn = app['on_' + event];\n    if (typeof fn === 'function') {\n      return fn.apply(app, slice.call(arguments, 1));\n    }\n  },\n\n  askApp: function(event) {\n    var app = this.app;\n    var fn = app['ask_' + event];\n    if (typeof fn === 'function') {\n      return fn.apply(app, slice.call(arguments, 1));\n    }\n  },\n\n  callApp: function(mthd) {\n    var fn = typeof mthd === 'string' ? this.app[mthd] : mthd;\n    if (typeof fn === 'function') {\n      return fn.apply(this.app, slice.call(arguments, 1));\n    }\n  },\n  */\n\n  fusing0: function() {\n    var me = this;\n    me.localDecls.forEach(function(spec) {\n      var plugs = me.tree.closestPlugs(spec, me.appType);\n      if (plugs) {\n        var apps = plugs.map(function (p) { return p.app });\n        // maybe empty (for update later)\n        me.emitApp('fusing', me, apps, spec);\n      }\n    });\n  },\n\n  fusing: function() {\n    var me = this;\n    me.localDecls.forEach(function(spec) {\n      if (spec.name) {\n        var plugs = me.tree.closestPlugs(spec, me.appType);\n        if (plugs && plugs[0]) {\n          var app = me.needs[spec.name] = plugs[0].app;\n          var need = spec.need.replace(/[-\\/\\.]/g, '_');\n          me.callApp('fusing_' + need, me, app, spec);\n        }\n      } else {\n        var plugs = me.tree.closestPlugs(spec, me.appType);\n        if (plugs) {\n          var apps = plugs.map(function (p) { return p.app });\n          // maybe empty (for update later)\n          me.emitApp('fusing', me, apps, spec);\n        }\n      }\n    });\n  },\n\n  unplugging: function() {\n    this.emitApp('unplugging', this);\n  },\n  unplugged: function(ancester) {\n    this.emitApp('unplugged', this);\n  },\n  fused: function () {\n    this.emitApp('fused', this);\n  },\n  defusing: function () {\n    this.emitApp('defusing', this);\n  },\n  detaching: function(ancester) {\n    this.emitApp('detaching', this, ancester);\n  },\n  detached: function(ancester) {\n    this.emitApp('detached', this, ancester);\n  },\n\n  hasRole: function(role) {\n    return !!this.role && (typeof role === 'string' ?  this.role === role\n      : role.indexOf(this.role) >= 0);\n  },\n\n  // TODO: gone\n  /*onToken: function (token) {\n    var me = this\n    me.xbarDecls.forEach(function (spec) {\n      if (spec.accept === token.type) {\n        me.emitApp('token', me, token, spec);\n      }\n    });\n  },\n  */\n\n  // from local context\n  onPlug: function (offerPlug) {\n    var me = this\n    me.localDecls.forEach(function (spec) {\n      if (offerPlug.appType === spec.need) {\n        if (!offerPlug.forType || offerPlug.forType === me.appType) {\n          me.emitApp('plug', me, offerPlug, spec);\n        }\n      }\n    });\n  },\n})\n\nmodule.exports = Plug;\n","\nconst forOwn = require('./for-own');\n\nfunction preorder(obj, fn, depth, key, host) {\n  fn(obj, key, host);\n\n  if (depth > 0) {\n    forOwn(obj, (val, key) => preorder(val, fn, depth-1, key, obj));\n  }\n}\nmodule.exports = function(obj, fn, depth) {\n  depth = depth >= 0 ? depth : 10;\n  preorder(obj, fn, depth);\n};\n\n","'use strict';\n\nvar klass = require('./klass');\nvar AppMixin = require('./app-mixin');\n\nmodule.exports = klass(AppMixin, {\n  init: function(tree) {\n    tree && this.joinTree(tree); \n\n    this._init.apply(this, arguments);\n  },\n  _init: function() {},\n});\n\n","'use strict';\n\nmodule.exports = function toMap(arr, prop) {\n  var map = {};\n  if (!arr) return map;\n\n  var isFun = typeof prop === 'function';\n  for (var i=0, n=arr.length; i<n; i++) {\n    var item = arr[i], key = null;\n    if (isFun) { // skip null and undefined item\n      if (item != null) key = prop(item);\n    } else if (typeof item === 'string') {\n      key = item;\n      item = prop === undefined ? null : prop;\n    } else {\n      if (item && typeof item === 'object') key = item[prop];\n    }\n    if (key !== null) map[key] = item;\n  }\n  return map;\n};\n\n","'use strict'\n\nvar klass = require('./klass');\nvar assert = require('./assert');\nvar NamedList = require('./named-list');\nvar Plug = require('./plug')\nvar Env = require('./env');\n\nvar DEBUG = true;\n\nvar Tree = klass({\n  values: null,\n  locals: null,\n  root: null,\n\n  Namespace: function(name) {\n    if (name in this) throw Error(name + ' exists');\n\n    var derived = this.subclass();\n    Object.defineProperty(derived, name, {\n      get: function() { return this.namespace(name); }\n    });\n    return derived;\n  },\n\n  init: function(parent, name, opts) {\n    assert(!parent || parent.root , 'parent missing root');\n    assert(!parent || name, 'missing name');\n\n    this.parent = parent || null\n    this.root = parent ? parent.root : this;\n    this.name = name || '';\n    this.path = parent ? parent.path.concat([name]) : [];\n\n    this.values = parent ? Object.create(parent.values) : {};\n    this.locals = opts ? Object.assign({}, opts) : {};\n    if (opts) Object.assign(this.values, this.locals);\n\n    this._ns = {}; \n    this._trees = NamedList.instance({ key: 'name', nullKey: false });\n    this._plugs = NamedList.instance({ key: 'name', nullKey: true });\n    this._fused = false;\n  },\n\n  namespace: function(name) {\n    return this._ns[name] || (this._ns[name] = !this.parent ? {}\n      : Object.create(this.parent.namespace(name)));\n  },\n  isRoot: function() {\n    return this.root === this;\n  },\n  isDetached: function() {\n    return !this.parent && this.root !== this;\n  },\n\n  isFused: function() {\n    return this._fused;\n  },\n\n  children: function() {\n    return this._trees.items;\n  },\n\n  child: function(name) {\n    return this._trees.get(name);\n  },\n\n  childAt: function(idx) {\n    return this._trees.getAt(idx);\n  },\n\n  addChild: function(name, opts) {\n    assert(name && !this.child(name), 'child exists');\n    var child = this.klass.instance(this, name, opts);\n    this._trees.add(child);\n    return child;\n  },\n\n  removeChild: function(name) {\n    var old = this.child(name);\n    if (old) {\n      old.callPlugPreOrder('detaching', [this]);\n      old.parent = null;\n      this._trees.remove(old);\n      old.callPlugPreOrder('detached', [this]);\n    }\n    return old;\n  },\n\n  replaceChild: function(name, opts) {\n    assert(name, 'missing name');\n\n    var child = this.klass.instance(this, name, opts);\n    var old = this.child(name);\n    if (old) {\n      old.callPlugPreOrder('detaching', [this]);\n      old.parent = null;\n      this._trees.add(child, true);\n      old.callPlugPreOrder('detached', [this]);\n    } else {\n      this._trees.add(child);\n    }\n    return child;\n  },\n\n  set: function(opts) {\n    if (opts) {\n      Object.assign(this.locals, opts);\n      Object.assign(this.values, opts);\n    }\n    return this;\n  },\n\n  get: function(name) {\n    return this.locals[name];\n  },\n\n  lookup: function(name) {\n    return this.values[name];\n  },\n\n  // tree is essential for uvw app building\n  isDev: function() {\n    return this.values.NODE_ENV !== 'production';\n  },\n\n  join: function(app, spec) {\n    return this.plugIn(Plug.instance(app, spec));\n  },\n\n  unplug: function(name) { //TODO: unnamed\n    var plug = this.plug(name);\n    if (plug) {\n      plug.unplugging();\n      this._plugs.remove(name);\n      plug.unplugged();\n    }\n  },\n\n  plugIn: function(plug) {\n    if (this._plugs.has(plug)) return plug;\n\n    plug.setTree(this);\n    this._plugs.add(plug);\n\n    if (this._fused) this._insertPlug(plug);\n    return plug;\n  },\n\n  plugs: function(role) {\n    var plugs = this._plugs.items;\n    if (plugs.length === 0 || !role) return plugs;\n    var fn = typeof role === 'function' ? role : function(p) { return p.hasRole(role); };\n    return plugs.filter(fn);\n  },\n\n  plug: function(name) {\n    return this._plugs.get(name);\n  },\n\n  plugApp: function(name) {\n    let plug = this._plugs.get(name);\n    return plug && plug.app;\n  },\n\n  collectPlugs: function(role, arr) {\n    return collectPlugs(this, role, arr || []);\n  },\n  collectPlugMap: function(role, map, skip) {\n    return collectPlugMap(this, role, map || {}, skip || false);\n  },\n\n  closestPlugs: function(spec, appType) {\n    var plugs = this._plugs.filter(function(p) {\n      return p.forType !== 'none' && p.appType === spec.need\n    })\n\n    if (plugs.length && appType) {\n      var specifics = plugs.filter(function(p) {\n        return p.forType === appType\n      })\n      plugs = specifics.length ? specifics : plugs.filter(function(p) { return !p.forType })\n    }\n\n    return plugs.length ? plugs : (this.parent && this.parent.closestPlugs(spec, appType))\n  },\n\n  fuse: function() {\n    if (!this._fused) {\n      // all plugs in place, start fulfilling needs\n      this.callPlugPreOrder('fusing', []);\n\n      this._fused = true;\n\n      this.callPlugPreOrder('fused', []); // synchronous, each plug expects others fused\n\n      var es = this._fusedEvents;\n      if (es) {\n        this._fusedEvents = null;\n        es.forEach(function(arr) {\n          this.emitPreOrder(arr[0], arr[1], arr[2]);\n        }.bind(this));\n      }\n    }\n    return this;\n  },\n\n  defuse: function() {\n    if (this._fused) {\n      this.callPlugPreOrder('defusing', []);\n      this._fused = false;\n    }\n    return this;\n  },\n\n  //TODO: gone\n  //pushToken: function(token) {\n  //  this.root.callPlugPreOrder('onToken', [token]);\n  //},\n\n  _insertPlug: function(newPlug) {\n    newPlug.fusing(); // note that newPlug see tree._fused true\n    newPlug.fused();\n    //this.callPlugPreOrder('onPlug', [newPlug]);\n  },\n\n  env: function(opts) {\n    return Env(this, opts);\n  },\n\n  callPlugPreOrder: function(func, args, role) {\n    try {\n      callPlugPreOrder(this, func, args, role);\n    } catch(ex) {\n      if (DEBUG) console.error(ex);\n      throw ex;\n    }\n  },\n\n  emitAfterFused: function(event, args, role) {\n    if (this._fused) {\n      this.emitPreOrder(event, args, role);\n    } else {\n      var es = this._fusedEvents || (this._fusedEvents = []);\n      es.push([event, args, role]);\n    }\n  },\n\n  emitPreOrder: function(event, args, role, xemit) {\n    args = args ? [event].concat(args) : [event];\n    this.callPlugPreOrder(xemit ? 'xemitApp' : 'emitApp', args, role);\n  },\n  xemitPreOrder: function(event, args, role) {\n    return this.emitPreOrder(event, args, role, true);\n  },\n\n  callAppPreOrder: function(mthd, args, role) {\n    args = args ? [mthd].concat(args) : [mthd];\n    this.callPlugPreOrder('callApp', args, role);\n  },\n\n  askPreOrder: function(event, args, role, xask) {\n    try {\n      args = args ? [event].concat(args) : [event];\n      return askPlugPreOrder(this, xask ? 'xaskApp' : 'askApp', args, role);\n    } catch(ex) {\n      if (DEBUG) console.error(ex);\n      throw ex;\n    }\n  },\n  xaskPreOrder: function(event, args, role) {\n    return this.askPreOrder(event, args, role, true);\n  },\n\n  // NOTE: collect non-null results in array rets if rets is given\n  //  - bypass plug, plug.app may not hav func\n  callPreOrder: function(func, args, role, rets, noSkip) {\n    try {\n      callPreOrder(this, func, args, role, rets, noSkip);\n      return rets;\n    } catch(ex) {\n      if (DEBUG) console.error(ex);\n      throw ex;\n    }\n  },\n  callPreOrderWaiting: function(func, args, role, noSkip) {\n    try {\n      var rets = [];\n      callPreOrder(this, func, args, role, rets, noSkip);\n      return Promise.all(rets);\n    } catch(ex) {\n      if (DEBUG) console.error(ex);\n      throw ex;\n    }\n  },\n  callEach: function(func, args, role, rets, noSkip) {\n    try {\n      callEach(this, func, args, role, rets, noSkip);\n    } catch(ex) {\n      if (DEBUG) console.error(ex);\n      throw ex;\n    }\n  },\n  callChildren: function(func, args, role, rets, noSkip) {\n    this.children().forEach(function(ch) {\n      callEach(ch, func, args, role, rets, noSkip);\n    });\n  },\n});\n\n// plug must have mthd (the plug contract)\nfunction callPlugPreOrder(tree, mthd, args, role) {\n  tree.plugs(role).forEach(function(plug) {\n    plug[mthd].apply(plug, args);\n  });\n  tree.children().forEach(function(child) {\n    callPlugPreOrder(child, mthd, args, role);\n  });\n}\n\n// plug must have mthd\nfunction askPlugPreOrder(tree, mthd, args, role, rets) {\n  rets = rets || [];\n  var plugs = tree.plugs(role);\n  var ret, i, n;\n  for (i=0, n=plugs.length; i<n; i++) {\n    ret = plugs[i][mthd].apply(plugs[i], args);\n    if (ret != null) rets.push(ret);\n  }\n\n  var children = tree.children();\n  for (i=0, n=children.length; i<n; i++) {\n    askPlugPreOrder(children[i], mthd, args, role, rets);\n    if (ret != null) rets.push(ret);\n  }\n  return rets;\n}\n\nfunction callEach(tree, func, args, role, rets, noSkip) {\n  args = args || [];\n  tree.plugs(role).forEach(function(plug) {\n    var fn = typeof func === 'string' ? plug.app[func] : func;\n    if (!noSkip && typeof fn !== 'function') return;\n    var ret = fn.apply(plug.app, args);\n    if (rets && ret != null) rets.push(ret);\n  });\n}\n\nfunction callPreOrder(tree, func, args, role, rets, noSkip) {\n  args = args || [];\n\n  callEach(tree, func, args, role, rets, noSkip);\n\n  tree.children().forEach(function(ch) {\n    callPreOrder(ch, func, args, role, rets, noSkip);\n  });\n}\n\nfunction collectPlugs(tree, role, arr) {\n  tree.plugs(role).forEach(function(plug) { arr.push(plug); });\n  tree.children().forEach(function(ch) {\n    collectPlugs(ch, role, arr);\n  });\n  return arr;\n}\nfunction collectPlugMap(tree, role, map, skip) {\n  tree.plugs(role).forEach(function(plug) {\n    if (!skip && map[plug.name]) throw Error('plug ' + plug.name + ' exists');\n    map[plug.name] = plug;\n  });\n\n  tree.children().forEach(function(ch) {\n    collectPlugMap(ch, role, map, skip);\n  });\n  return map;\n}\n\nmodule.exports = Tree;\n","'use strict';\n/* global document, window */\n\nfunction loadAsset (asset, varName, checkHeader) {\n  if (varName && typeof window[varName] !== 'undefined') {\n    return Promise.resolve(window[varName]);\n  }\n\n  if (typeof asset === 'string') {\n    if (/\\.css$/.test(asset)) {\n      asset = { src: asset, type: 'css' };\n    } else {\n      asset = { src: asset };\n    }\n  }\n\n  var isCss = asset.type === 'css';\n\n  if (checkHeader && asset.src) {\n    var tname = isCss ? 'link' : 'script'; \n    var attr = isCss ? 'href' : 'src';\n    var head = document.getElementsByTagName('head')[0];\n    var elems = head.getElementsByTagName(tname);\n    for (var i=0; i<elems.length; i++) {\n      if (elems[i].getAttribute(attr) === asset.src) {\n        return Promise.resolve(!isCss && varName ? window[varName] : undefined);\n      }\n    }\n  }\n\n  var tag;\n  if (isCss) {\n    tag = document.createElement('link');\n    tag.setAttribute('rel', 'stylesheet');\n    tag.setAttribute('href', asset.src);\n  } else {\n    tag = document.createElement('script');\n    tag.setAttribute('type', 'text/javascript');\n    tag.setAttribute('src', asset.src);\n  }\n\n  return new Promise(function (resolve) {\n    tag.async = true;\n    tag.onreadystatechange = tag.onload = function () {\n      var state = tag.readyState;\n      if (!state || /loaded|complete/.test(state)) {\n        resolve(varName ? window[varName] : undefined);\n      }\n    };\n    document.getElementsByTagName('head')[0].appendChild(tag);\n  });\n}\n\nfunction loadAssets (assets, varName, checkHeader) {\n  if (varName && typeof window[varName] !== 'undefined') {\n    return Promise.resolve(window[varName]);\n  }\n\n  function loadIt (previous, assets, i) {\n    return previous.then(function () {\n      return loadAsset(assets[i], null, checkHeader);\n    });\n  }\n\n  var previous = Promise.resolve();\n  for (var i = 0; i < assets.length; i++) {\n    previous = loadIt(previous, assets, i);\n  }\n\n  return !varName ? previous : previous.then(function () {\n    return window[varName];\n  });\n}\n\nexports.loadAsset = loadAsset;\nexports.loadAssets = loadAssets;\n","\nconst dom = require('./dom');\nconst Comp = require('./comp');\n\nmodule.exports = Comp.subclass({\n  _init0({ extra, outer, targetSel }) {\n    this._cards = [];\n    this._target = this._findTarget(targetSel);\n    this._outer = outer || {\n      origH: this._target.offsetHeight\n    };\n    this._extra = extra || {};\n  },\n  _card(obj) {\n    return this._cards.find(c => c.cardId === obj || c.elem === obj || c.inst === obj);\n  },\n\n  _findTarget(targetSel) {\n    return !targetSel ? this.elem\n      : (typeof targetSel === 'string' ? dom.first(targetSel) : targetSel);\n  },\n\n  hasCard(cardId) {\n    return !!this._card(cardId);\n  },\n\n  showCard: function(cardId, cardCls, params, opts) {\n    opts = opts || {};\n    opts.show = true;\n    return this.obtainCard(cardId, cardCls, params, opts);\n  },\n  obtainCard: function(cardId, cardCls, params, opts) {\n    opts = opts || {};\n\n    if (!cardId) return;\n\n    var card = this._card(cardId);\n    if (!card && !cardCls) return;\n\n    var target = this._target;\n    var isBody = target === document.body;\n    var show = !!opts.show;\n    var before = !!opts.before;\n    var after = !!opts.after;\n    if (show && !isBody && (before || after)) {\n      target.classList.remove('show');\n    }\n\n    if (card) {\n      if (show) card.elem.classList.add('show');\n    } else {\n      var elem = document.createElement('div');\n      elem.classList.add('collapse');\n      if (show) elem.classList.add('show');\n\n      if (isBody) {\n        target.appendChild(elem);\n      } else if (after) {\n        target.parentNode.insertAfter(elem, target);\n      } else {\n        target.parentNode.insertBefore(elem, target);\n      }\n\n      let { _extra, _outer } = this;\n      this._cards.push(card = {\n        ..._extra,\n        cardId, elem, target, params, outer: _outer,\n      });\n      card.inst = (cardCls.instance || cardCls)({ ...card, cntx: this });\n    }\n\n    return card;\n  },\n\n  hideCard: function(obj) {\n    var isBody = this._target === document.body;\n    if (obj) {\n      let card = this._card(obj);\n      if (card) {\n        card.elem.classList.remove('show');\n        if (!isBody) this._target.classList.add('show');\n      }\n    } else {\n      this._cards.forEach(card => card.elem.classList.remove('show'));\n      if (!isBody) this._target.classList.add('show');\n    }\n  },\n\n  on_cancel(src) {\n    this.hideCard(src);\n  },\n});\n\n\n","\nconst klass = require('../klass');\nconst AppMixin = require('../app-mixin');\nconst dom = require('./dom');\n\nconst Comp = klass(AppMixin, {\n  init({cntx, elem}) {\n    this.cntx = cntx;\n    this.elem = elem;\n    this._init0.apply(this, arguments);\n    this._init.apply(this, arguments);\n  },\n  _init0() {},\n  _init() {},\n\n  find(sel, fn) {\n    return dom.find(this.elem, sel, fn);\n  },\n  first(sel, fn) {\n    return dom.first(this.elem, sel, fn);\n  },\n  attr(sel, name) {\n    return dom.attr(this.elem, sel, name);\n  },\n  val(sel, newVal) {\n    return dom.val(this.elem, sel, newVal);\n  },\n  html(sel) {\n    return dom.html(this.elem, sel);\n  },\n\n  _applyBindings(events=['click', 'submit']) {\n    if (this._bounded) return; // called once\n\n    this._bounded = true;\n    Comp.ApplyBindings(this, this.elem, events);\n  },\n\n  _joinPage: function(root, pageInfo) {\n    root.set({ pageInfo });\n    var ptree = root.replaceChild('page');\n    this.tree = ptree;\n    ptree.join(this);\n    ptree.fuse();\n    root.emitPreOrder('page_replaced', [pageInfo, this]);\n  },\n\n  cntxEmit(evt) {\n    let emit = this.cntx && this.cntx.emit;\n    if (typeof emit === 'function') emit.apply(this.cntx, arguments);\n  },\n\n  cancel() {\n    this.cntxEmit('cancel', this);\n  },\n\n  ApplyBindings(vm, elem, events) {\n    events.forEach(event => {\n      dom.delegate(event, elem, `[data-${event}]`, (evt) => {\n        let mthd = dom.closestData(evt, event);\n        mthd && vm[mthd] && vm[mthd].call(vm, evt);\n      });\n    });\n  },\n\n  //TOGO\n  koShowCardBefore: function(ko, comp, params, target, id) {\n    this.koShowCard(ko, comp, params, target, id, true);\n  },\n  koShowCardAfter: function(ko, comp, params, target, id) {\n    this.koShowCard(ko, comp, params, target, id, true, true);\n  },\n  koShowCard: function(ko, comp, params, target, cardId, noHide, after) {\n    if (typeof target === 'string') {\n      if (!cardId) cardId = target;\n      target = this.first(target);\n    }\n    if (!comp || !target || !cardId) return;\n\n    var $target = target.jquery ? target : $(target);\n    if (!$target[0]) return;\n\n    if (!noHide) {\n      if (this.hideClass) $target.addClass(this.hideClass);\n      else $target.hide();\n    }\n\n    var cards = this._cards || (this._cards = {});\n    var card = cards[cardId];\n    if (card) {\n      card.$comp.show();\n    } else {\n      params = params ? ' params=\"' + params + '\"' : '';\n      var $comp = $('<' + comp + params + '></' + comp + '>');\n      $comp.data('card-id', cardId);\n      card = cards[cardId] = {\n        id: cardId,\n        type: comp,\n        $comp: $comp,\n        hiding: noHide ? null : target\n      };\n      ko.applyBindings(this, $comp[0]);\n      if (after) {\n        $comp.insertAfter($target[0]);\n      } else {\n        $comp.insertBefore($target[0]);\n      }\n    }\n    return cardId;\n  },\n\n  koHideCard: function(cardId) {\n    if (typeof cardId !== 'string') {\n      cardId = cardId.elem && $(cardId.elem).data('card-id');\n    }\n    if (!cardId) return;\n\n    var card = this._cards && this._cards[cardId];\n    if (card) {\n      card.$comp.hide();\n      if (card.hiding) {\n        if (this.hideClass) $(card.hiding).removeClass(this.hideClass);\n        else $(card.hiding).show();\n      }\n    }\n  },\n\n  on_cancel: function(src) {\n    this.koHideCard(src);\n  },\n});\n\nmodule.exports = Comp;\n\n","'use strict';\n/* global document, window, eval */\n\nvar each = require('../each');\nvar isArray = Array.isArray;\nvar slice = Array.prototype.slice;\nvar filter = Array.prototype.filter;\n\nvar _turbolinks = null;\n\nfunction isFn(x) {\n  return typeof x === 'function';\n}\n\nvar dom = {\n  ready: function(x) {\n    if (document.readyState === 'complete' || document.readyState !== 'loading') {\n      return Promise.resolve(x);\n    }\n    return new Promise(function(resolve) {\n      document.addEventListener('DOMContentLoaded', function() { resolve(x); });\n    });\n  },\n\n  filter: function(x, fn, me) { return x ? filter.call(x, fn, me) : []; },\n  each: each,\n\n  closest: function(elev, selector) {\n    var elem = elev.target || elev; // elev can be event\n\n    if (isFn(elem.closest)) return elem.closest(selector);\n\n    var matchesSelector = elem.matches || elem.webkitMatchesSelector ||\n      elem.mozMatchesSelector || elem.msMatchesSelector;\n    while (elem) {\n      if (matchesSelector.call(elem, selector)) {\n        return elem;\n      } else {\n        elem = elem.parentElement;\n      }\n    }\n    return null;\n  },\n\n  // REF: http://ryanmorr.com/abstract-away-the-performance-faults-of-queryselectorall/\n  find: function(elem, selector, fn) {\n    var selFn = isFn(selector);\n    if (!selector || selFn) {\n      fn = selFn ? selector : fn;\n      selector = elem;\n      elem = document;\n    }\n\n    if (typeof elem === 'string') {\n      elem = dom.find(elem)[0];\n    }\n\n    if (!elem) return [];\n\n    var ret;\n    if (!selector) {\n      ret = [elem];\n    } else if (typeof selector !== 'string') {\n      ret = [selector];\n    } else if (/^(#?[\\w-]+|\\.[\\w-.]+)$/.test(selector)) {\n      var ch = selector.charAt(0);\n      if (ch === '#') {\n        var found = document.getElementById(selector.substr(1));\n        ret = found ? [found] : [];\n      } else if (ch === '.') {\n        var classes = selector.substr(1).replace(/\\./g, ' ');\n        ret = slice.call(elem.getElementsByClassName(classes));\n      } else {\n        ret = slice.call(elem.getElementsByTagName(selector));\n      }\n    } else {\n      ret = slice.call(elem.querySelectorAll(selector));\n    }\n\n    if (ret.length && isFn(fn)) ret.forEach(fn); \n\n    return ret;\n  },\n\n  first: function(elem, selector, fn) {\n    var selFn = isFn(selector);\n    var ret = dom.find(elem, selFn ? null : selector)[0];\n    if (ret && isFn(fn = selFn ? selector : fn)) fn(ret);\n    return ret;\n  },\n\n  attr: function(elem, selector, name) {\n    var len = arguments.length;\n    var el = len < 3 ? dom.first(elem) : dom.first(elem, selector);\n    if (el) {\n      name = len < 3 ? selector : name;\n      if (name && el.hasAttribute(name)) return el.getAttribute(name) || '';\n    }\n  },\n  /*attr: function(elem, selector, name) {\n    var el = dom.first(elem, selector);\n    if (el && name && el.hasAttribute(name)) return el.getAttribute(name) || '';\n  }, */\n\n  html: function(elem, selector) {\n    var el = dom.first(elem, selector);\n    return el && el.innerHTML || undefined;\n  },\n  val: function(elem, selector, newVal) {\n    var el = dom.first(elem, selector);\n    if (el && 'value' in el) {\n      var ret = el.value;\n      if (typeof newVal === 'string') el.value = newVal; \n      return ret || '';\n    }\n  },\n\n  traverseForm: function(form, fn, all) {\n    if (typeof form !== 'object' || form.nodeName !== 'FORM') return;\n\n    each(form.elements, function(field) {\n      var b = false, selected;\n      if (field.name) {\n        if (all) {\n          b = isArray(all) ? all.indexOf(field.nodeName.toLowerCase()) >= 0 : true;\n        } else if (!field.disabled && field.type !== 'file'\n          && field.type !== 'reset' && field.type !== 'submit' && field.type !== 'button')\n        {\n          if (field.type === 'select-multiple') {\n            b = true;\n            selected = filter\n              .call(field.options, function(option) { return option.selected; })\n              .map(function(option) { return option.value; });\n          } else if ((field.type !== 'checkbox' && field.type !== 'radio') || field.checked) {\n            b = true;\n          }\n        }\n      }\n      if (b) fn(field.name, selected || field.value, field);\n    });\n  },\n\n  formData: function(form) {\n    var s = [];\n    dom.traverseForm(form, function(name, value) {\n      name = encodeURIComponent(name) ;\n      if (isArray(value)) {\n        value.forEach(function(val) {\n          s[s.length] = name + \"=\" + encodeURIComponent(val);\n        });\n      } else {\n        s[s.length] = name + \"=\" + encodeURIComponent(value);\n      }\n    });\n    return s.join('&').replace(/%20/g, '+');\n  },\n  formJson: function(form) {\n    var ret = {};\n    if (arguments.length > 1) {\n      var args = isArray(arguments[1]) ? arguments[1] : slice.call(arguments, 1);\n      args.forEach(function(arg) {\n        var el = form.elements[arg];\n        if (el) ret[arg] = el.value;\n      });\n    } else {\n      dom.traverseForm(form, function(name, value) { ret[name] = value; });\n    }\n    return ret;\n  },\n\n  elem: function(elemId) {\n    return document.getElementById(elemId);\n  },\n\n  on: function(evt, elem, selector, fn, opts) {\n    if (!elem) return;\n\n    var elems;\n    if (isFn(selector)) {\n      opts = fn;\n      fn = selector;\n      elems = dom.find(elem);\n    } else {\n      elems = dom.find(elem, selector);\n    }\n    opts = opts || {};\n    var fn2 = opts.noPrevent ? fn : function(e) {\n      e.preventDefault();\n      opts.stopProp && e.stopPropagation();\n      return fn(e);\n    };\n    elems.forEach(function(el) {\n      el.addEventListener(evt, fn2.bind(el), false);\n    });\n    return dom;\n  },\n\n  delegate: function(evt, elem, selector, fn) {\n    elem = dom.first(elem);\n    elem.addEventListener(evt, function(e) {\n      for (var target=e.target; target && target!==this; target=target.parentNode) {\n        if (target.matches(selector)) {\n          e.preventDefault();\n          //e.stopPropagation();\n          if (fn.call(target, e) === false) {\n            e.stopPropagation();\n          }\n        }\n      }\n    }, false);\n\n    return dom;\n  },\n\n  data: function(elev, name) {\n    var elem = elev && elev.target || elev;\n    return name && elem && elem.dataset[name] || undefined;\n  },\n  closestData: function(elev, name) {\n    if (elev && name) {\n      var elem = dom.closest(elev, '[data-' + name + ']');\n      return dom.data(elem, name);\n    }\n  },\n\n  setTurbolinks: function(turbolinks) {\n    _turbolinks = turbolinks;\n  },\n\n  visit: function(url, opts) {\n    if (_turbolinks) {\n      if (url && typeof url === 'object') {\n        opts = url;\n        url = null;\n      }\n      if (url && typeof url === 'string') {\n        _turbolinks.visit(url, opts);\n      } else {\n        url = window.location.pathname;\n        _turbolinks.visit(url, opts || { replace: true });\n      }\n    } else if (typeof url === 'string') {\n      window.location = url;\n    } else {\n      window.location.reload();\n    }\n  },\n\n  replaceWithTurbolinks: function(html) {\n    if (_turbolinks && html) {\n      var s = html.match(/<body[^>]*>([\\s\\S]*?)<\\/body>/i)[1];\n      document.body.innerHTML = s;\n      _turbolinks.dispatch('turbolinks:load');\n      var arr = document.body.getElementsByTagName('script');\n      for (var i=0; i<arr.length; i++) {\n        eval(arr[i].innerHTML);\n      }\n    }\n  },\n};\n\nmodule.exports = dom;\n","'use strict';\n\nmodule.exports = function(url) {\n  return new (window.EventSource || _EventSource)(url);\n};\n\n// https://github.com/remy/polyfills/blob/master/EventSource.js\n// - MIT license https://rem.mit-license.org/\n\nvar RECONNECT = false;\nvar reTrim = /^(\\s|\\u00A0)+|(\\s|\\u00A0)+$/g;\n\nvar _EventSource = function (url) {\n  var eventsource = this,  \n      xhrTimeout = 6000000,\n      activityTimeout = 24000,\n      interval = 5000, // polling interval\n      lastEventId = null,\n      cache = '';\n\n  if (!url || typeof url != 'string') {\n    throw new SyntaxError('Not enough arguments');\n  }\n\n  this.URL = url;\n  this.readyState = this.CONNECTING;\n  this._pollTimer = null;\n  this._xhr = null;\n  \n  function pollAgain(intv) {\n    eventsource._pollTimer = setTimeout(function () {\n      poll.call();\n    }, intv);\n  }\n  \n  function poll() {\n    try { // force hiding of the error message... insane?\n      if (eventsource.readyState == eventsource.CLOSED) return;\n\n      // NOTE: IE7 and upwards support\n      var xhr = new XMLHttpRequest();\n      xhr.open('GET', eventsource.URL, true);\n      xhr.setRequestHeader('Accept', 'text/event-stream');\n      xhr.setRequestHeader('Cache-Control', 'no-cache');\n      // we must make use of this on the server side if we're working with Android - because they don't trigger \n      // readychange until the server connection is closed\n      xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n\n      if (lastEventId != null) xhr.setRequestHeader('Last-Event-ID', lastEventId);\n      cache = '';\n    \n      var tick = 1;\n      xhr.timeout = xhrTimeout;\n      xhr.onreadystatechange = function () {\n        if (this.readyState == 3 || (this.readyState == 4 && this.status == 200)) {\n          // on success\n          if (eventsource.readyState == eventsource.CONNECTING) {\n            eventsource.readyState = eventsource.OPEN;\n            eventsource.dispatchEvent('open', { type: 'open' });\n          }\n\n          var responseText = '';\n          try {\n            responseText = this.responseText || '';\n          } catch (e) {}\n        \n          // process this.responseText\n          var parts = responseText.substr(cache.length).split(\"\\n\"),\n              eventType = 'message',\n              data = [],\n              i = 0,\n              line = '';\n            \n          cache = responseText;\n        \n          // TODO handle 'event' (for buffer name), retry\n          for (; i < parts.length; i++) {\n            line = parts[i].replace(reTrim, '');\n            if (line.indexOf('event') == 0) {\n              eventType = line.replace(/event:?\\s*/, '');\n            } else if (line.indexOf('retry') == 0) {                           \n              var retry = parseInt(line.replace(/retry:?\\s*/, ''));\n              if(!isNaN(retry)) { interval = retry; }\n            } else if (line.indexOf('data') == 0) {\n              data.push(line.replace(/data:?\\s*/, ''));\n            } else if (line.indexOf('id:') == 0) {\n              lastEventId = line.replace(/id:?\\s*/, '');\n            } else if (line.indexOf('id') == 0) { // this resets the id\n              lastEventId = null;\n            } else if (line == '') {\n              if (data.length) {\n                var event = new MessageEvent(data.join('\\n'), eventsource.url, lastEventId);\n                eventsource.dispatchEvent(eventType, event);\n                data = [];\n                eventType = 'message';\n              }\n            }\n          }\n\n          if (this.readyState == 4) pollAgain(interval);\n          // don't need to poll again, because we're long-loading\n          else { tick++; }\n        } else if (eventsource.readyState !== eventsource.CLOSED) {\n          if (this.readyState == 4) { // and some other status\n            if (RECONNECT) {\n              // dispatch error\n              eventsource.readyState = eventsource.CONNECTING;\n              eventsource.dispatchEvent('error', { type: 'error' });\n              pollAgain(interval);\n            } else {\n              eventsource.readyState = eventsource.CLOSED;\n              eventsource.dispatchEvent('error', { type: 'error' });\n            }\n          } else if (this.readyState == 0) { // likely aborted\n            pollAgain(interval);\n          } else {\n          }\n        }\n      };\n    \n      xhr.send();\n    \n      setTimeout(checkActivity, activityTimeout);\n      function checkActivity() {\n        if (xhr.readyState === 3) { // still loading\n          if (tick > 0) {\n            tick = 0;\n            setTimeout(checkActivity, activityTimeout);\n          } else {\n            xhr.abort();\n          }\n        }\n      }\n      eventsource._xhr = xhr;\n    \n    } catch (e) { // in an attempt to silence the errors\n      eventsource.dispatchEvent('error', { type: 'error', data: e.message }); // ???\n    } \n  };\n  \n  poll(); // init now\n}\n\n_EventSource.prototype = {\n  close: function () {\n    // closes the connection - disabling the polling\n    this.readyState = this.CLOSED;\n    clearTimeout(this._pollTimer);\n    this._xhr.abort();\n  },\n  CONNECTING: 0,\n  OPEN: 1,\n  CLOSED: 2,\n  dispatchEvent: function (type, event) {\n    var handlers = this['_' + type + 'Handlers'];\n    if (handlers) {\n      for (var i = 0; i < handlers.length; i++) {\n        handlers[i].call(this, event);\n      }\n    }\n\n    if (this['on' + type]) {\n      this['on' + type].call(this, event);\n    }\n  },\n  addEventListener: function (type, handler) {\n    if (!this['_' + type + 'Handlers']) {\n      this['_' + type + 'Handlers'] = [];\n    }\n    \n    this['_' + type + 'Handlers'].push(handler);\n  },\n  removeEventListener: function (type, handler) {\n    var handlers = this['_' + type + 'Handlers'];\n    if (!handlers) {\n      return;\n    }\n    for (var i = handlers.length - 1; i >= 0; --i) {\n      if (handlers[i] === handler) {\n        handlers.splice(i, 1);\n        break;\n      }\n    }\n  },\n  onerror: null,\n  onmessage: null,\n  onopen: null,\n  readyState: 0,\n  URL: ''\n};\n\nvar MessageEvent = function (data, origin, lastEventId) {\n  this.data = data;\n  this.origin = origin;\n  this.lastEventId = lastEventId || '';\n};\n\nMessageEvent.prototype = {\n  data: null,\n  type: 'message',\n  lastEventId: '',\n  origin: ''\n};\n\n","'use strict';\n\nvar ui = Object.assign({\n  assetLoader: require('./asset-loader'),\n  eventSource: require('./event-source'),\n  Comp: require('./comp'),\n  Cards: require('./cards'),\n  rd: function() {\n    var n = arguments.length, fn = arguments[n-1];\n    ui.rdall([].slice.call(arguments, 0, n-1)).then(function(args) {\n      fn.apply(null, args);\n    });\n  },\n}, require('./loadjs'), require('./dom'));\n\nmodule.exports = ui;\n","'use strict';\n/* global document, window */\n\nvar ready = require('./dom').ready;\nvar assetLoader = require('./asset-loader');\nvar slice = Array.prototype.slice;\nvar bind = Function.prototype.bind;\nvar isArray = Array.isArray;\n\nvar _mods = {};\nvar _modules = {};\nvar _waits = {};\n\nvar loadjs = {\n  modules: _modules,\n  module: function(modName) {\n    var mod = _mods[modName];\n    return mod && mod.loaded ? mod.result : undefined;\n  },\n\n  rdall: function() {\n    var args = isArray(arguments[0]) ? arguments[0] : slice.call(arguments);\n    return ready().then(function() {\n      return Promise.all(args.map(function(arg) {\n        return typeof arg === 'string' ? loadjs.load(arg) : arg;\n      }));\n    });\n  },\n\n  rdload: function() {\n    return ready(arguments).then(function(args) {\n      return loadjs.load.apply(null, args);\n    });\n  },\n  prdload: function() {\n    return ready(arguments).then(function(args) {\n      var arg0 = args[0];\n      var rest = slice.call(args, 1);\n      var name = rest[0];\n      var q = !arg0 || typeof name === 'string' && name in _modules\n            ? Promise.resolve()\n            : assetLoader.loadAssets(isArray(arg0) ? arg0 : [arg0], null, true);\n        \n      return q.then(function() { return loadjs.load.apply(null, rest); });\n    });\n  },\n\n  load: function(modName, mthd) {\n    if (isArray(modName)) { //TODO: maybe remove this\n      return Promise.all(modName.map(loadjs.load))\n      .then(function(vals) {\n        if (typeof mthd === 'function') mthd.apply(null, vals);\n        return vals;\n      });\n    }\n\n    var mod = _mods[modName], ret;\n    if (!mod) {\n      ret = new Promise(function(resolve) {\n        var waits = _waits[modName] || (_waits[modName] = []);\n        waits.push({ resolve: resolve });\n      });\n    } else if (mod.loaded) {\n      ret = Promise.resolve(mod.result);\n    } else if (mod.varName && mod.varName in window) {\n      mod.result = window[mod.varName];\n      mod.loaded = true;\n      _modules[mod.name] = mod.result;\n      ret = Promise.resolve(mod.result);\n    } else {\n      ret = assetLoader.loadAssets(mod.assets, mod.varName)\n      .then(function(obj) {\n        mod.loaded = true;\n        return mod.result = obj;\n      });\n    }\n\n    if (!mthd) return ret;\n\n    var args = arguments;\n    return ret.then(function(obj) {\n      if (typeof obj === 'function' && mthd === 'new') {\n        return new (bind.apply(obj, slice.call(args, 1)));\n      } else {\n        return obj[mthd].apply(obj, slice.call(args, 2));\n      }\n    });\n  },\n\n  register: function(mod, obj) {\n    if (typeof mod === 'string') {\n      mod = { name: mod, loaded: true, result: obj };\n    }\n\n    var modName = mod.name;\n\n    if (!modName || (!mod.loaded && !mod.assets)) {\n      throw Error('missing name or assets'); \n    }\n\n    if (_mods[modName]) {\n      console.log('WARNING: re-register module ' + modName);\n      return _mods[modName];\n    }\n\n    _mods[modName] = mod;\n    if (mod.loaded) _modules[modName] = mod.result;\n\n    var waits = _waits[modName];\n    if (waits) {\n      delete _waits[modName];\n\n      loadjs.load(modName).then(function(result) {\n        waits.forEach(function(wait) {\n          wait.resolve(result);\n        });\n      });\n    }\n\n    return mod;\n  },\n\n  // utils\n\n  wait: function(scriptId, varName) {\n    if (varName && varName in window) return Promise.resolve(window[varName]);\n\n    return new Promise(function(resolve) {\n      document.querySelector('#' + scriptId).addEventListener('load', function() {\n        resolve(varName ? window[varName] : undefined);\n      });\n    });\n  },\n};\n\nmodule.exports = loadjs;\n","var access = require('./access');\n\nvar utils = {\n  BASE16: '0123456789abcdef',\n  BASE62: '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ',\n  BASE64: '0123456789-abcdefghijklmnopqrstuvwxyz_ABCDEFGHIJKLMNOPQRSTUVWXYZ',\n};\n\nutils.randomString = function(len, letters) {\n  letters = letters || utils.BASE64;\n  var arr = Array(len = Number(len));\n  for (var i=0; i<len; i++) {\n    arr[i] = letters.charAt(Math.floor(Math.random() * letters.length));\n  }\n  return arr.join('');\n};\n\nutils.randomHex = function(len) {\n  return utils.randomString(len, utils.BASE16);\n};\n\nutils.transfilter = function(arr, trans, noFilter) {\n  if (!arr || !arr.length) return [];\n\n  if (typeof trans === 'string') {\n    trans = access.bind(null, trans.split('.'), undefined);\n  }\n  var fn = typeof noFilter === 'function' ? noFilter : false;\n\n  var ret = [];\n  for (var i=0, n=arr.length; i<n; i++) {\n    var val = arr[i];\n    if (trans) val = trans(val);\n\n    var b = fn ? fn(val) : (noFilter || val != null);\n    if (b) ret.push(val);\n  }\n  return ret;\n};\n\nutils.pickAll = function(obj, keys, noUndef) {\n  var val, picked = {};\n  if (keys && keys.length) {\n    for (var i=0; i<keys.length; i++) {\n      val = obj ? obj[keys[i]] : undefined;\n      if (val !== undefined || !noUndef) {\n        picked[keys[i]] = val;\n      }\n    }\n  }\n  return picked;\n};\n\nfunction set(key, obj, key2, val) {\n  return (obj[key] || (obj[key] = {}))[key2] = val;\n}\nutils.set = set;\nutils.$set = set.bind(null, '$set');\nutils.$unset = set.bind(null, '$unset');\nutils.$push = set.bind(null, '$push');\nutils.$pull = function(update, name, key, val) {\n  var at = {};\n  at[key] = val;\n  set('$pull', update, name, at);\n};\nutils.$currentDate = function(update, name, spec) {\n  set('$currentDate', update, name, spec || true);\n};\n\nutils.arrayToObject = arrayToObject;\nfunction arrayToObject(arr, depth) {\n  var obj = {};\n  if (!arr || !arr.length) return obj;\n\n  for (var i=0; i<arr.length; i+= 2) {\n    var attr = arr[i];\n    if (arr && typeof attr === 'string') {\n      var val = arr[i+1];\n      if (depth > 0 && Array.isArray(val)) {\n        val = arrayToObject(val, depth-1);\n      }\n      if (val !== undefined) obj[attr] = val;\n    }\n  }\n  return obj;\n};\n\nutils.endsWith = function(str, suffix) {\n  var len = str.length, slen = suffix.length;\n  if (!slen) return true;\n  if (len < slen) return false;\n  return str.indexOf(suffix, len - slen) !== -1; \n};\n \nutils.find = function(array, path, val) {\n  if (!array || !path) return;\n\n  if (typeof path === 'string') path = path.split('.');\n\n  for (var i=0, n=array.length; i<n; i++) {\n    var obj = array[i];\n    if (access(path, undefined, obj) === val) return obj;\n  }\n};\n\nutils.serialize = function(obj) {\n  if (obj && typeof obj === 'object') {\n    var keys = Object.keys(obj);\n    if (keys.length > 0) {\n      keys.sort();\n      return JSON.stringify(obj, keys);\n    }\n  }\n  return JSON.stringify(obj);\n};\n\nutils.trim = function(arr, sep) {\n  if (!arr) return [];\n\n  if (typeof arr === 'string') arr = arr.split(sep || ',');\n\n  var ret = [], item;\n  for (var i=0, n=arr.length; i<n; i++) {\n    if ((item = arr[i]) && (item = item.trim())) {\n      ret.push(item);\n    }\n  }\n  return ret;\n};\n\nutils.truncate = function(s, n, ell) {\n  return !s ? '' : (s.length <= n ? s : s.slice(0, n) + (ell || '...'));\n};\n\nutils.hashCode = hashCode;\nfunction hashCode(s) {\n  var hash = 0, i, chr, len;\n  if (s.length === 0) return hash;\n  for (i = 0, len = s.length; i < len; i++) {\n    chr = s.charCodeAt(i);\n    hash  = ((hash << 5) - hash) + chr;\n    //hash |= 0; // Convert to 32bit integer\n    hash = hash >>> 0; // Convert to unsigned 32bit integer\n  }\n  return hash;\n};\n\nutils.hashString = function(s, nseg) {\n  var len = s.length;\n  var seg = len > 0 && nseg > 1 ? Math.ceil(len / nseg) : 0;\n  if (seg < 1) return hashCode(s).toString(36);\n\n  var start = 0, ret = '';\n  while (start < len) {\n    ret = ret + hashCode(s.substr(start, seg)).toString(36);\n    start += seg;\n  }\n  return ret;\n};\n\nutils.hashColor = function(str, min) {\n  min = min > 192 ? 192 : (min >= 0 ? min : 192);\n  var hash = utils.hashCode(str);\n  var b = hash % 64 + 192;\n  var g = (hash >> 6) % 64 + 192; //jshint ignore: line\n  var r = (hash >> 12) % 64 + 192; //jshint ignore: line\n  var rgb = '#' + utils.rgbToHex(r, g, b);\n  return [rgb, r, g, b];\n};\n\nutils.componentToHex = componentToHex;\nfunction componentToHex(c) {\n  c = (c < 0 ? -c : c) % 256;\n  var hex = c.toString(16);\n  return hex.length === 1 ? '0' + hex : hex;\n}\nutils.rgbToHex = rgbToHex;\nfunction rgbToHex(r, g, b) {\n  return componentToHex(r) + componentToHex(g) + componentToHex(b);\n}\n\n// https://github.com/darkskyapp/string-hash/blob/master/index.js\nutils.hash = function(str) {\n  var hash = 5381,\n      i    = str.length;\n\n  while(i) {\n    hash = (hash * 33) ^ str.charCodeAt(--i);\n  }\n\n  /* JavaScript does bitwise operations (like XOR, above) on 32-bit signed\n   * integers. Since we want the results to be always positive, convert the\n   * signed int to an unsigned by doing an unsigned bitshift. */\n  return hash >>> 0;\n};\n\nutils.timestamp = timestamp;\nfunction timestamp(obj) {\n  if (typeof obj === 'number') {\n    return obj;\n  } else if (!obj) {\n    return Number.NaN;\n  } else if (typeof obj === 'string') {\n    var ts = Number(obj);\n    return isFinite(ts) ? ts : Date.parse(obj); // this is UTC\n  } else if (obj.getTimestamp) { // well mongo ObjectID here\n    return obj.getTimestamp().getTime();\n  } else if (obj.valueOf) {\n    return obj.valueOf();\n  } else {\n    return Number.NaN;\n  }\n}\n\nutils.toDate = function(obj) {\n  return obj instanceof Date ? obj : new Date(timestamp(obj));\n};\n\nutils.epochDates = epochDates;\nfunction epochDates(date) {\n  return Math.floor(timestamp(date) / 86400000);\n}\n\nutils.epochSeconds = epochSeconds;\nfunction epochSeconds(date) {\n  return Math.floor(timestamp(date) / 1000);\n}\n\nutils.utcDateString = function(date, includesTime) {\n  if (!date.getUTCFullYear) date = new Date(timestamp(date));\n  var y = date.getUTCFullYear();\n  var m = date.getUTCMonth() + 1;\n  var d = date.getUTCDate();\n  if (m < 10) m = '0' + m;\n  if (d < 10) d = '0' + d;\n  var ret = y + '-' + m + '-' + d;\n  if (includesTime) {\n    var h = date.getUTCHours();\n    var n = date.getUTCMinutes();\n    var s = date.getUTCSeconds();\n    if (h < 10) h = '0' + h;\n    if (n < 10) n = '0' + n;\n    if (s < 10) s = '0' + s;\n    ret = ret + ' ' + h + ':' + n + ':' + s;\n  }\n  return ret;\n};\n\nutils.randomObjectId = function(date, seed) {\n  var msecs = date ? date.getTime() + (seed >= 0 ? seed % 86400000 : 86400000 * Math.random()) :\n    946656000000 + (5000 * 86400000 * Math.random());\n  var hex = ('00000000' + Math.floor(msecs/1000).toString(16)).substr(-8);\n  if (seed >= 0) {\n    return hex + ('0000000000000000' + seed.toString(16)).substr(-16);\n  } else {\n    return hex + utils.randomHex(16);\n  }\n};\n\nutils.dateObjectId = function(date, offset) {\n  var dates = epochDates(date);\n  if (dates >= 0) {\n    if (isFinite(offset)) dates += Math.floor(offset);\n    var prefix = ('00000000' + (dates * 86400).toString(16)).substr(-8);\n    return prefix + '0000000000000000';\n  }\n  // otherwise undefined\n};\n\nutils.secondsObjectId = function(date, msecs) {\n  var secs = epochSeconds(date);\n  if (secs >= 0) { \n    var prefix = ('00000000' + secs.toString(16)).substr(-8);\n    msecs = msecs > 0 ? Math.floor(msecs) : 0;\n    if (msecs > 0 && msecs < 1000) {\n      return prefix + ('000' + msecs).substr(-3) + '0000000000000';\n    } else {\n      return prefix + '0000000000000000';\n    }\n  }\n  // otherwise undefined\n};\n\nutils.range = function(from, to, step) {\n  step = step || 1;\n  var a = [];\n  for (var i=from; i<to; i+=step) { a.push(i); }\n  return a;\n};\n\nutils.extname = function(s, sep) {\n  var i = s.lastIndexOf(sep);\n  return i < 0 ? s : s.substring(i+1);\n};\n\nutils.testAll = function(arr, func) {\n  func = func || (func === null ? nonNull : identity);\n  var re = func instanceof RegExp;\n  for (var i=0, n=arr.length; i<n; i++) {\n    var obj = arr[i];\n    if (re && !func.test(obj) || !re && !func(obj)) return false;\n  }\n  return true;\n};\n\nutils.hasNull = function(items) {\n  return items.length === 0 ? false : (items.indexOf(null) >= 0 || items.indexOf(undefined) >= 0);\n};\n\nutils.hasTags = hasTags;\nfunction hasTags(obj, field, tags, rejects) {\n  if (!obj || field == null) return false;\n  return containsTags(obj[field], tags, rejects);\n}\n\nutils.filterTags = function(objs, field, tags, rejects) {\n  return utils.transfilter(objs, function(obj) {\n    return hasTags(obj, field, tags, rejects) ? obj : null;\n  });\n};\nutils.tagsChecker = function(field, tags, rejects) {\n  return function(obj) { return hasTags(obj, field, tags, rejects); };\n};\n\n// assuming arr uniq\nutils.union = function(arr, arr2) {\n  return !arr2 ? arr.concat() : arr.concat(arr2.filter(function(it) {\n    return arr.indexOf(it) < 0;\n  }));\n};\n\n// assume arr uniq\nutils.intersection = function(arr, arr2) {\n  return !arr2 ? [] : arr.filter(function(it) {\n    return arr2.indexOf(it) >= 0;\n  });\n};\n\nmodule.exports = utils;\n","'use strict';\n\nvar assert = require('./assert');\nvar klass = require('./klass');\nvar Emitter = require('./emitter');\n\nvar RESERVED = {\n  message: true,\n  open: true,\n  error: true,\n  config: true,\n  connected: true,\n  disconnected: true,\n};\n\n// xbars client\nvar Xbarc = klass(Emitter.prototype, {\n  init: function(opts) {\n    assert(opts.fetch, 'missing fetch');\n    assert(opts.eventSource, 'missing eventSource');\n    this.url = opts.url;\n    this._connId = null;\n    this._listeners = {\n      message: onMessage.bind(this),\n      open: onOpen.bind(this),\n      error: onError.bind(this),\n    };\n    this._fetch = opts.fetch;\n    this._clientId = opts.clientId;\n    this._clientSecret = opts.clientSecret;\n    this._xbarId = opts.xbarId;\n    this._eventSource = opts.eventSource;\n    this._headers = opts.headers || null;\n    this._tokenField = opts.tokenField;\n    this._ajaxHeaders = {\n      'Content-Type': 'application/json',\n      'X-Requested-With': 'XMLHttpRequest',\n      //'Accept': 'application/json',\n    };\n    if (this._headers) {\n      this._ajaxHeaders = Object.assign({}, this._headers, this._ajaxHeaders);\n    }\n    if (this._clientId) {\n      this._ajaxHeaders['X-Xbarx-Client-Id'] = this._clientId;\n      this._ajaxHeaders['X-Xbarx-Client-Secret'] = this._clientSecret;\n      this._ajaxHeaders['X-Xbarx-Xbar-Id'] = this._xbarId;\n    }\n  },\n  _resolve: function(connId, err) {\n    var fn = err ? this._rejectFn : this._resolveFn;\n    this._resolveFn = this._rejectFn = null;\n    if (fn) fn(err || connId);\n  },\n  _events: function() {\n    return Object.keys(this._listeners);\n  },\n  apps: function() {\n    return this._events().filter(function(e) {\n      return !RESERVED[e]\n    });\n  },\n  tap(app) {\n    if (RESERVED[app]) return this;\n\n    if (!this._listeners[app]) {\n      var listener = this._listeners[app] = function(e) {\n        parseAndEmit(this, app, e.data);\n      }.bind(this);\n\n      if (this._es) this._es.addEventListener(app, listener);\n      this.emit('config', 'tap', app);\n    }\n    return this;\n  },\n\n  connect: function() {\n    var headers = this._headers;\n    return this._waitConnId || (this._waitConnId = new Promise(function(resolve, reject) {\n      this._resolveFn = resolve;\n      this._rejectFn = reject;\n\n      var opts = this._clientId && {\n        headers: {\n          'X-Xbarx-Client-Id': this._clientId,\n          'X-Xbarx-Client-Secret': this._clientSecret,\n          'X-Xbarx-Xbar-Id': this._xbarId,\n        }\n      };\n      if (opts && headers) {\n        opts.headers = Object.assign({}, headers, opts.headers);\n      }\n      var es = this._es = opts ? this._eventSource(this.url, opts) : this._eventSource(this.url);\n      var ls = this._listeners;\n      Object.keys(ls).forEach(function(key) {\n        es.addEventListener(key, ls[key]);\n      });\n    }.bind(this)));\n  },\n\n  disconnect: function(err) {\n    var es = this._es;\n    if (es) {\n      var ls = this._listeners;\n      Object.keys(ls).forEach(function(key) {\n        es.removeEventListener(key, ls[key]);\n      });\n      es.close();\n    }\n\n    var connId = this._connId;\n    this._connId = this._es = this._waitConnId = null;\n    if (this._resolveFn) this._resolve(null, Error(err && err.message || 'abort'));\n\n    if (connId) this.emit('disconnected', connId);\n  },\n\n  toggle: function() {\n    this._waitConnId ? this.disconnect() : this.connect();\n  },\n\n  connected: function() {\n    return !!this._connId;\n  },\n\n  getConnId: function() {\n    return this._connId;\n  },\n\n  _getAjaxHeaders: function(opts) {\n    var authToken = this._tokenField && localStorage.getItem(this._tokenField);\n    var headers = authToken && { 'X-Access-Token': authToken };\n    if (opts && opts.headers) headers = Object.assign(headers || {}, opts.headers);\n    return headers ? Object.assign(headers, this._ajaxHeaders) : this._ajaxHeaders;\n  },\n\n  post: function(data, opts) {\n    if (!this._connId) return Promise.reject('not connected');\n\n    opts = opts || {};\n    var req = { connId: this._connId, data: data };\n    if (opts.app) req.app = opts.app;\n    if (opts.verb) req.verb = opts.verb;\n\n    return this._fetch(this.url, {\n      method: 'POST',\n      body: JSON.stringify(req),\n      headers: this._getAjaxHeaders(),\n    }).then(function(res) {\n      return res.text();\n    }).then(function(text) {\n      console.log(\"POST\", data, opts, \"GOT\", text);\n\n      if (text === 'undefined') return undefined;\n      try {\n        return JSON.parse(text);\n      } catch(ex) {\n        return Promise.reject(ex);\n      }\n    });\n  },\n\n  postApp: function(appName, data, opts) {\n    assert(appName && data, 'missing appName or data');\n    if (!opts) {\n      opts = { app: appName };\n    } else if (typeof opts === 'string') {\n      opts = { app: appName, verb: opts };\n    } else {\n      opts = Object.assign({}, opts, { app: appName });\n    }\n    return this.post(data, opts);\n  },\n\n  pushApp: function(appName, data) {\n    return this.postApp(appName, data, 'push');\n  },\n\n  ask: function(data, opts) {\n    if (!this._connId) return Promise.reject('not connected');\n\n    opts = opts || {};\n    var req = { connId: this._connId, data: data };\n    if (opts.app) req.app = opts.app;\n    if (opts.verb) req.verb = opts.verb;\n\n    return this._fetch(this.url + '/ask', {\n      method: 'POST',\n      body: JSON.stringify(req),\n      headers: this._getAjaxHeaders(),\n    }).then(function(res) {\n      return res.text();\n    }).then(function(text) {\n      console.log(\"ASK\", data, opts, \"GOT\", text);\n\n      if (text === 'undefined') return undefined;\n      try {\n        return JSON.parse(text);\n      } catch(ex) {\n        return Promise.reject(ex);\n      }\n    });\n  },\n\n  askApp: function(appName, data, opts) {\n    assert(appName && data, 'missing appName or data');\n    if (!opts) {\n      opts = { app: appName };\n    } else if (typeof opts === 'string') {\n      opts = { app: appName, verb: opts };\n    } else {\n      opts = Object.assign({}, opts, { app: appName });\n    }\n    return this.ask(data, opts);\n  },\n});\n\nfunction parseAndEmit(me, app, data) {\n  var json;\n  try {\n    json = JSON.parse(data);\n  } catch(ex) {\n    return me.emit('error', ex); // no disconnect\n  }\n  me.emit(app, json);\n}\n\nfunction onMessage(e) {\n  if (e.data.indexOf('connId ') === 0) {\n    if (this._connId) console.error('receiving multiple connId');\n\n    this._connId = e.data.substr(7);\n    this._resolve(this._connId);\n\n    this.emit('connected', this._connId);\n  } else {\n    parseAndEmit(this, 'message', e.data);\n  }\n}\n\nfunction onOpen(e) {\n  this.emit('open', e);\n}\n\nfunction onError(e) {\n  //this.disconnect(e);\n  this.emit('error', this._connId, e);\n  this._connId = null;\n}\n\nmodule.exports = Xbarc;\n\n","// extracted by mini-css-extract-plugin","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target, parent) {\n  if (parent){\n    return parent.querySelector(target);\n  }\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target, parent) {\n                // If passing function in options, then use it for resolve \"head\" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector(\"#foo\").shadowRoot }\n                // }\n                if (typeof target === 'function') {\n                        return target();\n                }\n                if (typeof memo[target] === \"undefined\") {\n\t\t\tvar styleTarget = getTarget.call(this, target, parent);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertAt.before, target);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\n\tif(options.attrs.nonce === undefined) {\n\t\tvar nonce = getNonce();\n\t\tif (nonce) {\n\t\t\toptions.attrs.nonce = nonce;\n\t\t}\n\t}\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction getNonce() {\n\tif (typeof __webpack_nonce__ === 'undefined') {\n\t\treturn null;\n\t}\n\n\treturn __webpack_nonce__;\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = typeof options.transform === 'function'\n\t\t ? options.transform(obj.css) \n\t\t : options.transform.default(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n","/*\nTurbolinks 5.2.0\nCopyright  2018 Basecamp, LLC\n */\n(function(){var t=this;(function(){(function(){this.Turbolinks={supported:function(){return null!=window.history.pushState&&null!=window.requestAnimationFrame&&null!=window.addEventListener}(),visit:function(t,r){return e.controller.visit(t,r)},clearCache:function(){return e.controller.clearCache()},setProgressBarDelay:function(t){return e.controller.setProgressBarDelay(t)}}}).call(this)}).call(t);var e=t.Turbolinks;(function(){(function(){var t,r,n,o=[].slice;e.copyObject=function(t){var e,r,n;r={};for(e in t)n=t[e],r[e]=n;return r},e.closest=function(e,r){return t.call(e,r)},t=function(){var t,e;return t=document.documentElement,null!=(e=t.closest)?e:function(t){var e;for(e=this;e;){if(e.nodeType===Node.ELEMENT_NODE&&r.call(e,t))return e;e=e.parentNode}}}(),e.defer=function(t){return setTimeout(t,1)},e.throttle=function(t){var e;return e=null,function(){var r;return r=1<=arguments.length?o.call(arguments,0):[],null!=e?e:e=requestAnimationFrame(function(n){return function(){return e=null,t.apply(n,r)}}(this))}},e.dispatch=function(t,e){var r,o,i,s,a,u;return a=null!=e?e:{},u=a.target,r=a.cancelable,o=a.data,i=document.createEvent(\"Events\"),i.initEvent(t,!0,r===!0),i.data=null!=o?o:{},i.cancelable&&!n&&(s=i.preventDefault,i.preventDefault=function(){return this.defaultPrevented||Object.defineProperty(this,\"defaultPrevented\",{get:function(){return!0}}),s.call(this)}),(null!=u?u:document).dispatchEvent(i),i},n=function(){var t;return t=document.createEvent(\"Events\"),t.initEvent(\"test\",!0,!0),t.preventDefault(),t.defaultPrevented}(),e.match=function(t,e){return r.call(t,e)},r=function(){var t,e,r,n;return t=document.documentElement,null!=(e=null!=(r=null!=(n=t.matchesSelector)?n:t.webkitMatchesSelector)?r:t.msMatchesSelector)?e:t.mozMatchesSelector}(),e.uuid=function(){var t,e,r;for(r=\"\",t=e=1;36>=e;t=++e)r+=9===t||14===t||19===t||24===t?\"-\":15===t?\"4\":20===t?(Math.floor(4*Math.random())+8).toString(16):Math.floor(15*Math.random()).toString(16);return r}}).call(this),function(){e.Location=function(){function t(t){var e,r;null==t&&(t=\"\"),r=document.createElement(\"a\"),r.href=t.toString(),this.absoluteURL=r.href,e=r.hash.length,2>e?this.requestURL=this.absoluteURL:(this.requestURL=this.absoluteURL.slice(0,-e),this.anchor=r.hash.slice(1))}var e,r,n,o;return t.wrap=function(t){return t instanceof this?t:new this(t)},t.prototype.getOrigin=function(){return this.absoluteURL.split(\"/\",3).join(\"/\")},t.prototype.getPath=function(){var t,e;return null!=(t=null!=(e=this.requestURL.match(/\\/\\/[^\\/]*(\\/[^?;]*)/))?e[1]:void 0)?t:\"/\"},t.prototype.getPathComponents=function(){return this.getPath().split(\"/\").slice(1)},t.prototype.getLastPathComponent=function(){return this.getPathComponents().slice(-1)[0]},t.prototype.getExtension=function(){var t,e;return null!=(t=null!=(e=this.getLastPathComponent().match(/\\.[^.]*$/))?e[0]:void 0)?t:\"\"},t.prototype.isHTML=function(){return this.getExtension().match(/^(?:|\\.(?:htm|html|xhtml))$/)},t.prototype.isPrefixedBy=function(t){var e;return e=r(t),this.isEqualTo(t)||o(this.absoluteURL,e)},t.prototype.isEqualTo=function(t){return this.absoluteURL===(null!=t?t.absoluteURL:void 0)},t.prototype.toCacheKey=function(){return this.requestURL},t.prototype.toJSON=function(){return this.absoluteURL},t.prototype.toString=function(){return this.absoluteURL},t.prototype.valueOf=function(){return this.absoluteURL},r=function(t){return e(t.getOrigin()+t.getPath())},e=function(t){return n(t,\"/\")?t:t+\"/\"},o=function(t,e){return t.slice(0,e.length)===e},n=function(t,e){return t.slice(-e.length)===e},t}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};e.HttpRequest=function(){function r(r,n,o){this.delegate=r,this.requestCanceled=t(this.requestCanceled,this),this.requestTimedOut=t(this.requestTimedOut,this),this.requestFailed=t(this.requestFailed,this),this.requestLoaded=t(this.requestLoaded,this),this.requestProgressed=t(this.requestProgressed,this),this.url=e.Location.wrap(n).requestURL,this.referrer=e.Location.wrap(o).absoluteURL,this.createXHR()}return r.NETWORK_FAILURE=0,r.TIMEOUT_FAILURE=-1,r.timeout=60,r.prototype.send=function(){var t;return this.xhr&&!this.sent?(this.notifyApplicationBeforeRequestStart(),this.setProgress(0),this.xhr.send(),this.sent=!0,\"function\"==typeof(t=this.delegate).requestStarted?t.requestStarted():void 0):void 0},r.prototype.cancel=function(){return this.xhr&&this.sent?this.xhr.abort():void 0},r.prototype.requestProgressed=function(t){return t.lengthComputable?this.setProgress(t.loaded/t.total):void 0},r.prototype.requestLoaded=function(){return this.endRequest(function(t){return function(){var e;return 200<=(e=t.xhr.status)&&300>e?t.delegate.requestCompletedWithResponse(t.xhr.responseText,t.xhr.getResponseHeader(\"Turbolinks-Location\")):(t.failed=!0,t.delegate.requestFailedWithStatusCode(t.xhr.status,t.xhr.responseText))}}(this))},r.prototype.requestFailed=function(){return this.endRequest(function(t){return function(){return t.failed=!0,t.delegate.requestFailedWithStatusCode(t.constructor.NETWORK_FAILURE)}}(this))},r.prototype.requestTimedOut=function(){return this.endRequest(function(t){return function(){return t.failed=!0,t.delegate.requestFailedWithStatusCode(t.constructor.TIMEOUT_FAILURE)}}(this))},r.prototype.requestCanceled=function(){return this.endRequest()},r.prototype.notifyApplicationBeforeRequestStart=function(){return e.dispatch(\"turbolinks:request-start\",{data:{url:this.url,xhr:this.xhr}})},r.prototype.notifyApplicationAfterRequestEnd=function(){return e.dispatch(\"turbolinks:request-end\",{data:{url:this.url,xhr:this.xhr}})},r.prototype.createXHR=function(){return this.xhr=new XMLHttpRequest,this.xhr.open(\"GET\",this.url,!0),this.xhr.timeout=1e3*this.constructor.timeout,this.xhr.setRequestHeader(\"Accept\",\"text/html, application/xhtml+xml\"),this.xhr.setRequestHeader(\"Turbolinks-Referrer\",this.referrer),this.xhr.onprogress=this.requestProgressed,this.xhr.onload=this.requestLoaded,this.xhr.onerror=this.requestFailed,this.xhr.ontimeout=this.requestTimedOut,this.xhr.onabort=this.requestCanceled},r.prototype.endRequest=function(t){return this.xhr?(this.notifyApplicationAfterRequestEnd(),null!=t&&t.call(this),this.destroy()):void 0},r.prototype.setProgress=function(t){var e;return this.progress=t,\"function\"==typeof(e=this.delegate).requestProgressed?e.requestProgressed(this.progress):void 0},r.prototype.destroy=function(){var t;return this.setProgress(1),\"function\"==typeof(t=this.delegate).requestFinished&&t.requestFinished(),this.delegate=null,this.xhr=null},r}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};e.ProgressBar=function(){function e(){this.trickle=t(this.trickle,this),this.stylesheetElement=this.createStylesheetElement(),this.progressElement=this.createProgressElement()}var r;return r=300,e.defaultCSS=\".turbolinks-progress-bar {\\n  position: fixed;\\n  display: block;\\n  top: 0;\\n  left: 0;\\n  height: 3px;\\n  background: #0076ff;\\n  z-index: 9999;\\n  transition: width \"+r+\"ms ease-out, opacity \"+r/2+\"ms \"+r/2+\"ms ease-in;\\n  transform: translate3d(0, 0, 0);\\n}\",e.prototype.show=function(){return this.visible?void 0:(this.visible=!0,this.installStylesheetElement(),this.installProgressElement(),this.startTrickling())},e.prototype.hide=function(){return this.visible&&!this.hiding?(this.hiding=!0,this.fadeProgressElement(function(t){return function(){return t.uninstallProgressElement(),t.stopTrickling(),t.visible=!1,t.hiding=!1}}(this))):void 0},e.prototype.setValue=function(t){return this.value=t,this.refresh()},e.prototype.installStylesheetElement=function(){return document.head.insertBefore(this.stylesheetElement,document.head.firstChild)},e.prototype.installProgressElement=function(){return this.progressElement.style.width=0,this.progressElement.style.opacity=1,document.documentElement.insertBefore(this.progressElement,document.body),this.refresh()},e.prototype.fadeProgressElement=function(t){return this.progressElement.style.opacity=0,setTimeout(t,1.5*r)},e.prototype.uninstallProgressElement=function(){return this.progressElement.parentNode?document.documentElement.removeChild(this.progressElement):void 0},e.prototype.startTrickling=function(){return null!=this.trickleInterval?this.trickleInterval:this.trickleInterval=setInterval(this.trickle,r)},e.prototype.stopTrickling=function(){return clearInterval(this.trickleInterval),this.trickleInterval=null},e.prototype.trickle=function(){return this.setValue(this.value+Math.random()/100)},e.prototype.refresh=function(){return requestAnimationFrame(function(t){return function(){return t.progressElement.style.width=10+90*t.value+\"%\"}}(this))},e.prototype.createStylesheetElement=function(){var t;return t=document.createElement(\"style\"),t.type=\"text/css\",t.textContent=this.constructor.defaultCSS,t},e.prototype.createProgressElement=function(){var t;return t=document.createElement(\"div\"),t.className=\"turbolinks-progress-bar\",t},e}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};e.BrowserAdapter=function(){function r(r){this.controller=r,this.showProgressBar=t(this.showProgressBar,this),this.progressBar=new e.ProgressBar}var n,o,i;return i=e.HttpRequest,n=i.NETWORK_FAILURE,o=i.TIMEOUT_FAILURE,r.prototype.visitProposedToLocationWithAction=function(t,e){return this.controller.startVisitToLocationWithAction(t,e)},r.prototype.visitStarted=function(t){return t.issueRequest(),t.changeHistory(),t.loadCachedSnapshot()},r.prototype.visitRequestStarted=function(t){return this.progressBar.setValue(0),t.hasCachedSnapshot()||\"restore\"!==t.action?this.showProgressBarAfterDelay():this.showProgressBar()},r.prototype.visitRequestProgressed=function(t){return this.progressBar.setValue(t.progress)},r.prototype.visitRequestCompleted=function(t){return t.loadResponse()},r.prototype.visitRequestFailedWithStatusCode=function(t,e){switch(e){case n:case o:return this.reload();default:return t.loadResponse()}},r.prototype.visitRequestFinished=function(t){return this.hideProgressBar()},r.prototype.visitCompleted=function(t){return t.followRedirect()},r.prototype.pageInvalidated=function(){return this.reload()},r.prototype.showProgressBarAfterDelay=function(){return this.progressBarTimeout=setTimeout(this.showProgressBar,this.controller.progressBarDelay)},r.prototype.showProgressBar=function(){return this.progressBar.show()},r.prototype.hideProgressBar=function(){return this.progressBar.hide(),clearTimeout(this.progressBarTimeout)},r.prototype.reload=function(){return window.location.reload()},r}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};e.History=function(){function r(e){this.delegate=e,this.onPageLoad=t(this.onPageLoad,this),this.onPopState=t(this.onPopState,this)}return r.prototype.start=function(){return this.started?void 0:(addEventListener(\"popstate\",this.onPopState,!1),addEventListener(\"load\",this.onPageLoad,!1),this.started=!0)},r.prototype.stop=function(){return this.started?(removeEventListener(\"popstate\",this.onPopState,!1),removeEventListener(\"load\",this.onPageLoad,!1),this.started=!1):void 0},r.prototype.push=function(t,r){return t=e.Location.wrap(t),this.update(\"push\",t,r)},r.prototype.replace=function(t,r){return t=e.Location.wrap(t),this.update(\"replace\",t,r)},r.prototype.onPopState=function(t){var r,n,o,i;return this.shouldHandlePopState()&&(i=null!=(n=t.state)?n.turbolinks:void 0)?(r=e.Location.wrap(window.location),o=i.restorationIdentifier,this.delegate.historyPoppedToLocationWithRestorationIdentifier(r,o)):void 0},r.prototype.onPageLoad=function(t){return e.defer(function(t){return function(){return t.pageLoaded=!0}}(this))},r.prototype.shouldHandlePopState=function(){return this.pageIsLoaded()},r.prototype.pageIsLoaded=function(){return this.pageLoaded||\"complete\"===document.readyState},r.prototype.update=function(t,e,r){var n;return n={turbolinks:{restorationIdentifier:r}},history[t+\"State\"](n,null,e)},r}()}.call(this),function(){e.HeadDetails=function(){function t(t){var e,r,n,s,a,u;for(this.elements={},n=0,a=t.length;a>n;n++)u=t[n],u.nodeType===Node.ELEMENT_NODE&&(s=u.outerHTML,r=null!=(e=this.elements)[s]?e[s]:e[s]={type:i(u),tracked:o(u),elements:[]},r.elements.push(u))}var e,r,n,o,i;return t.fromHeadElement=function(t){var e;return new this(null!=(e=null!=t?t.childNodes:void 0)?e:[])},t.prototype.hasElementWithKey=function(t){return t in this.elements},t.prototype.getTrackedElementSignature=function(){var t,e;return function(){var r,n;r=this.elements,n=[];for(t in r)e=r[t].tracked,e&&n.push(t);return n}.call(this).join(\"\")},t.prototype.getScriptElementsNotInDetails=function(t){return this.getElementsMatchingTypeNotInDetails(\"script\",t)},t.prototype.getStylesheetElementsNotInDetails=function(t){return this.getElementsMatchingTypeNotInDetails(\"stylesheet\",t)},t.prototype.getElementsMatchingTypeNotInDetails=function(t,e){var r,n,o,i,s,a;o=this.elements,s=[];for(n in o)i=o[n],a=i.type,r=i.elements,a!==t||e.hasElementWithKey(n)||s.push(r[0]);return s},t.prototype.getProvisionalElements=function(){var t,e,r,n,o,i,s;r=[],n=this.elements;for(e in n)o=n[e],s=o.type,i=o.tracked,t=o.elements,null!=s||i?t.length>1&&r.push.apply(r,t.slice(1)):r.push.apply(r,t);return r},t.prototype.getMetaValue=function(t){var e;return null!=(e=this.findMetaElementByName(t))?e.getAttribute(\"content\"):void 0},t.prototype.findMetaElementByName=function(t){var r,n,o,i;r=void 0,i=this.elements;for(o in i)n=i[o].elements,e(n[0],t)&&(r=n[0]);return r},i=function(t){return r(t)?\"script\":n(t)?\"stylesheet\":void 0},o=function(t){return\"reload\"===t.getAttribute(\"data-turbolinks-track\")},r=function(t){var e;return e=t.tagName.toLowerCase(),\"script\"===e},n=function(t){var e;return e=t.tagName.toLowerCase(),\"style\"===e||\"link\"===e&&\"stylesheet\"===t.getAttribute(\"rel\")},e=function(t,e){var r;return r=t.tagName.toLowerCase(),\"meta\"===r&&t.getAttribute(\"name\")===e},t}()}.call(this),function(){e.Snapshot=function(){function t(t,e){this.headDetails=t,this.bodyElement=e}return t.wrap=function(t){return t instanceof this?t:\"string\"==typeof t?this.fromHTMLString(t):this.fromHTMLElement(t)},t.fromHTMLString=function(t){var e;return e=document.createElement(\"html\"),e.innerHTML=t,this.fromHTMLElement(e)},t.fromHTMLElement=function(t){var r,n,o,i;return o=t.querySelector(\"head\"),r=null!=(i=t.querySelector(\"body\"))?i:document.createElement(\"body\"),n=e.HeadDetails.fromHeadElement(o),new this(n,r)},t.prototype.clone=function(){return new this.constructor(this.headDetails,this.bodyElement.cloneNode(!0))},t.prototype.getRootLocation=function(){var t,r;return r=null!=(t=this.getSetting(\"root\"))?t:\"/\",new e.Location(r)},t.prototype.getCacheControlValue=function(){return this.getSetting(\"cache-control\")},t.prototype.getElementForAnchor=function(t){try{return this.bodyElement.querySelector(\"[id='\"+t+\"'], a[name='\"+t+\"']\")}catch(e){}},t.prototype.getPermanentElements=function(){return this.bodyElement.querySelectorAll(\"[id][data-turbolinks-permanent]\")},t.prototype.getPermanentElementById=function(t){return this.bodyElement.querySelector(\"#\"+t+\"[data-turbolinks-permanent]\")},t.prototype.getPermanentElementsPresentInSnapshot=function(t){var e,r,n,o,i;for(o=this.getPermanentElements(),i=[],r=0,n=o.length;n>r;r++)e=o[r],t.getPermanentElementById(e.id)&&i.push(e);return i},t.prototype.findFirstAutofocusableElement=function(){return this.bodyElement.querySelector(\"[autofocus]\")},t.prototype.hasAnchor=function(t){return null!=this.getElementForAnchor(t)},t.prototype.isPreviewable=function(){return\"no-preview\"!==this.getCacheControlValue()},t.prototype.isCacheable=function(){return\"no-cache\"!==this.getCacheControlValue()},t.prototype.isVisitable=function(){return\"reload\"!==this.getSetting(\"visit-control\")},t.prototype.getSetting=function(t){return this.headDetails.getMetaValue(\"turbolinks-\"+t)},t}()}.call(this),function(){var t=[].slice;e.Renderer=function(){function e(){}var r;return e.render=function(){var e,r,n,o;return n=arguments[0],r=arguments[1],e=3<=arguments.length?t.call(arguments,2):[],o=function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(this,e,function(){}),o.delegate=n,o.render(r),o},e.prototype.renderView=function(t){return this.delegate.viewWillRender(this.newBody),t(),this.delegate.viewRendered(this.newBody)},e.prototype.invalidateView=function(){return this.delegate.viewInvalidated()},e.prototype.createScriptElement=function(t){var e;return\"false\"===t.getAttribute(\"data-turbolinks-eval\")?t:(e=document.createElement(\"script\"),e.textContent=t.textContent,e.async=!1,r(e,t),e)},r=function(t,e){var r,n,o,i,s,a,u;for(i=e.attributes,a=[],r=0,n=i.length;n>r;r++)s=i[r],o=s.name,u=s.value,a.push(t.setAttribute(o,u));return a},e}()}.call(this),function(){var t,r,n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty;e.SnapshotRenderer=function(e){function o(t,e,r){this.currentSnapshot=t,this.newSnapshot=e,this.isPreview=r,this.currentHeadDetails=this.currentSnapshot.headDetails,this.newHeadDetails=this.newSnapshot.headDetails,this.currentBody=this.currentSnapshot.bodyElement,this.newBody=this.newSnapshot.bodyElement}return n(o,e),o.prototype.render=function(t){return this.shouldRender()?(this.mergeHead(),this.renderView(function(e){return function(){return e.replaceBody(),e.isPreview||e.focusFirstAutofocusableElement(),t()}}(this))):this.invalidateView()},o.prototype.mergeHead=function(){return this.copyNewHeadStylesheetElements(),this.copyNewHeadScriptElements(),this.removeCurrentHeadProvisionalElements(),this.copyNewHeadProvisionalElements()},o.prototype.replaceBody=function(){var t;return t=this.relocateCurrentBodyPermanentElements(),this.activateNewBodyScriptElements(),this.assignNewBody(),this.replacePlaceholderElementsWithClonedPermanentElements(t)},o.prototype.shouldRender=function(){return this.newSnapshot.isVisitable()&&this.trackedElementsAreIdentical()},o.prototype.trackedElementsAreIdentical=function(){return this.currentHeadDetails.getTrackedElementSignature()===this.newHeadDetails.getTrackedElementSignature()},o.prototype.copyNewHeadStylesheetElements=function(){var t,e,r,n,o;for(n=this.getNewHeadStylesheetElements(),o=[],e=0,r=n.length;r>e;e++)t=n[e],o.push(document.head.appendChild(t));return o},o.prototype.copyNewHeadScriptElements=function(){var t,e,r,n,o;for(n=this.getNewHeadScriptElements(),o=[],e=0,r=n.length;r>e;e++)t=n[e],o.push(document.head.appendChild(this.createScriptElement(t)));return o},o.prototype.removeCurrentHeadProvisionalElements=function(){var t,e,r,n,o;for(n=this.getCurrentHeadProvisionalElements(),o=[],e=0,r=n.length;r>e;e++)t=n[e],o.push(document.head.removeChild(t));return o},o.prototype.copyNewHeadProvisionalElements=function(){var t,e,r,n,o;for(n=this.getNewHeadProvisionalElements(),o=[],e=0,r=n.length;r>e;e++)t=n[e],o.push(document.head.appendChild(t));return o},o.prototype.relocateCurrentBodyPermanentElements=function(){var e,n,o,i,s,a,u;for(a=this.getCurrentBodyPermanentElements(),u=[],e=0,n=a.length;n>e;e++)i=a[e],s=t(i),o=this.newSnapshot.getPermanentElementById(i.id),r(i,s.element),r(o,i),u.push(s);return u},o.prototype.replacePlaceholderElementsWithClonedPermanentElements=function(t){var e,n,o,i,s,a,u;for(u=[],o=0,i=t.length;i>o;o++)a=t[o],n=a.element,s=a.permanentElement,e=s.cloneNode(!0),u.push(r(n,e));return u},o.prototype.activateNewBodyScriptElements=function(){var t,e,n,o,i,s;for(i=this.getNewBodyScriptElements(),s=[],e=0,o=i.length;o>e;e++)n=i[e],t=this.createScriptElement(n),s.push(r(n,t));return s},o.prototype.assignNewBody=function(){return document.body=this.newBody},o.prototype.focusFirstAutofocusableElement=function(){var t;return null!=(t=this.newSnapshot.findFirstAutofocusableElement())?t.focus():void 0},o.prototype.getNewHeadStylesheetElements=function(){return this.newHeadDetails.getStylesheetElementsNotInDetails(this.currentHeadDetails)},o.prototype.getNewHeadScriptElements=function(){return this.newHeadDetails.getScriptElementsNotInDetails(this.currentHeadDetails)},o.prototype.getCurrentHeadProvisionalElements=function(){return this.currentHeadDetails.getProvisionalElements()},o.prototype.getNewHeadProvisionalElements=function(){return this.newHeadDetails.getProvisionalElements()},o.prototype.getCurrentBodyPermanentElements=function(){return this.currentSnapshot.getPermanentElementsPresentInSnapshot(this.newSnapshot)},o.prototype.getNewBodyScriptElements=function(){return this.newBody.querySelectorAll(\"script\")},o}(e.Renderer),t=function(t){var e;return e=document.createElement(\"meta\"),e.setAttribute(\"name\",\"turbolinks-permanent-placeholder\"),e.setAttribute(\"content\",t.id),{element:e,permanentElement:t}},r=function(t,e){var r;return(r=t.parentNode)?r.replaceChild(e,t):void 0}}.call(this),function(){var t=function(t,e){function n(){this.constructor=t}for(var o in e)r.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;e.ErrorRenderer=function(e){function r(t){var e;e=document.createElement(\"html\"),e.innerHTML=t,this.newHead=e.querySelector(\"head\"),this.newBody=e.querySelector(\"body\")}return t(r,e),r.prototype.render=function(t){return this.renderView(function(e){return function(){return e.replaceHeadAndBody(),e.activateBodyScriptElements(),t()}}(this))},r.prototype.replaceHeadAndBody=function(){var t,e;return e=document.head,t=document.body,e.parentNode.replaceChild(this.newHead,e),t.parentNode.replaceChild(this.newBody,t)},r.prototype.activateBodyScriptElements=function(){var t,e,r,n,o,i;for(n=this.getScriptElements(),i=[],e=0,r=n.length;r>e;e++)o=n[e],t=this.createScriptElement(o),i.push(o.parentNode.replaceChild(t,o));return i},r.prototype.getScriptElements=function(){return document.documentElement.querySelectorAll(\"script\")},r}(e.Renderer)}.call(this),function(){e.View=function(){function t(t){this.delegate=t,this.htmlElement=document.documentElement}return t.prototype.getRootLocation=function(){return this.getSnapshot().getRootLocation()},t.prototype.getElementForAnchor=function(t){return this.getSnapshot().getElementForAnchor(t)},t.prototype.getSnapshot=function(){return e.Snapshot.fromHTMLElement(this.htmlElement)},t.prototype.render=function(t,e){var r,n,o;return o=t.snapshot,r=t.error,n=t.isPreview,this.markAsPreview(n),null!=o?this.renderSnapshot(o,n,e):this.renderError(r,e)},t.prototype.markAsPreview=function(t){return t?this.htmlElement.setAttribute(\"data-turbolinks-preview\",\"\"):this.htmlElement.removeAttribute(\"data-turbolinks-preview\")},t.prototype.renderSnapshot=function(t,r,n){return e.SnapshotRenderer.render(this.delegate,n,this.getSnapshot(),e.Snapshot.wrap(t),r)},t.prototype.renderError=function(t,r){return e.ErrorRenderer.render(this.delegate,r,t)},t}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};e.ScrollManager=function(){function r(r){this.delegate=r,this.onScroll=t(this.onScroll,this),this.onScroll=e.throttle(this.onScroll)}return r.prototype.start=function(){return this.started?void 0:(addEventListener(\"scroll\",this.onScroll,!1),this.onScroll(),this.started=!0)},r.prototype.stop=function(){return this.started?(removeEventListener(\"scroll\",this.onScroll,!1),this.started=!1):void 0},r.prototype.scrollToElement=function(t){return t.scrollIntoView()},r.prototype.scrollToPosition=function(t){var e,r;return e=t.x,r=t.y,window.scrollTo(e,r)},r.prototype.onScroll=function(t){return this.updatePosition({x:window.pageXOffset,y:window.pageYOffset})},r.prototype.updatePosition=function(t){var e;return this.position=t,null!=(e=this.delegate)?e.scrollPositionChanged(this.position):void 0},r}()}.call(this),function(){e.SnapshotCache=function(){function t(t){this.size=t,this.keys=[],this.snapshots={}}var r;return t.prototype.has=function(t){var e;return e=r(t),e in this.snapshots},t.prototype.get=function(t){var e;if(this.has(t))return e=this.read(t),this.touch(t),e},t.prototype.put=function(t,e){return this.write(t,e),this.touch(t),e},t.prototype.read=function(t){var e;return e=r(t),this.snapshots[e]},t.prototype.write=function(t,e){var n;return n=r(t),this.snapshots[n]=e},t.prototype.touch=function(t){var e,n;return n=r(t),e=this.keys.indexOf(n),e>-1&&this.keys.splice(e,1),this.keys.unshift(n),this.trim()},t.prototype.trim=function(){var t,e,r,n,o;for(n=this.keys.splice(this.size),o=[],t=0,r=n.length;r>t;t++)e=n[t],o.push(delete this.snapshots[e]);return o},r=function(t){return e.Location.wrap(t).toCacheKey()},t}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};e.Visit=function(){function r(r,n,o){this.controller=r,this.action=o,this.performScroll=t(this.performScroll,this),this.identifier=e.uuid(),this.location=e.Location.wrap(n),this.adapter=this.controller.adapter,this.state=\"initialized\",this.timingMetrics={}}var n;return r.prototype.start=function(){return\"initialized\"===this.state?(this.recordTimingMetric(\"visitStart\"),this.state=\"started\",this.adapter.visitStarted(this)):void 0},r.prototype.cancel=function(){var t;return\"started\"===this.state?(null!=(t=this.request)&&t.cancel(),this.cancelRender(),this.state=\"canceled\"):void 0},r.prototype.complete=function(){var t;return\"started\"===this.state?(this.recordTimingMetric(\"visitEnd\"),this.state=\"completed\",\"function\"==typeof(t=this.adapter).visitCompleted&&t.visitCompleted(this),this.controller.visitCompleted(this)):void 0},r.prototype.fail=function(){var t;return\"started\"===this.state?(this.state=\"failed\",\"function\"==typeof(t=this.adapter).visitFailed?t.visitFailed(this):void 0):void 0},r.prototype.changeHistory=function(){var t,e;return this.historyChanged?void 0:(t=this.location.isEqualTo(this.referrer)?\"replace\":this.action,e=n(t),this.controller[e](this.location,this.restorationIdentifier),this.historyChanged=!0)},r.prototype.issueRequest=function(){return this.shouldIssueRequest()&&null==this.request?(this.progress=0,this.request=new e.HttpRequest(this,this.location,this.referrer),this.request.send()):void 0},r.prototype.getCachedSnapshot=function(){var t;return!(t=this.controller.getCachedSnapshotForLocation(this.location))||null!=this.location.anchor&&!t.hasAnchor(this.location.anchor)||\"restore\"!==this.action&&!t.isPreviewable()?void 0:t},r.prototype.hasCachedSnapshot=function(){return null!=this.getCachedSnapshot()},r.prototype.loadCachedSnapshot=function(){var t,e;return(e=this.getCachedSnapshot())?(t=this.shouldIssueRequest(),this.render(function(){var r;return this.cacheSnapshot(),this.controller.render({snapshot:e,isPreview:t},this.performScroll),\"function\"==typeof(r=this.adapter).visitRendered&&r.visitRendered(this),t?void 0:this.complete()})):void 0},r.prototype.loadResponse=function(){return null!=this.response?this.render(function(){var t,e;return this.cacheSnapshot(),this.request.failed?(this.controller.render({error:this.response},this.performScroll),\"function\"==typeof(t=this.adapter).visitRendered&&t.visitRendered(this),this.fail()):(this.controller.render({snapshot:this.response},this.performScroll),\"function\"==typeof(e=this.adapter).visitRendered&&e.visitRendered(this),this.complete())}):void 0},r.prototype.followRedirect=function(){return this.redirectedToLocation&&!this.followedRedirect?(this.location=this.redirectedToLocation,this.controller.replaceHistoryWithLocationAndRestorationIdentifier(this.redirectedToLocation,this.restorationIdentifier),this.followedRedirect=!0):void 0},r.prototype.requestStarted=function(){var t;return this.recordTimingMetric(\"requestStart\"),\"function\"==typeof(t=this.adapter).visitRequestStarted?t.visitRequestStarted(this):void 0},r.prototype.requestProgressed=function(t){var e;return this.progress=t,\"function\"==typeof(e=this.adapter).visitRequestProgressed?e.visitRequestProgressed(this):void 0},r.prototype.requestCompletedWithResponse=function(t,r){return this.response=t,null!=r&&(this.redirectedToLocation=e.Location.wrap(r)),this.adapter.visitRequestCompleted(this)},r.prototype.requestFailedWithStatusCode=function(t,e){return this.response=e,this.adapter.visitRequestFailedWithStatusCode(this,t)},r.prototype.requestFinished=function(){var t;return this.recordTimingMetric(\"requestEnd\"),\"function\"==typeof(t=this.adapter).visitRequestFinished?t.visitRequestFinished(this):void 0},r.prototype.performScroll=function(){return this.scrolled?void 0:(\"restore\"===this.action?this.scrollToRestoredPosition()||this.scrollToTop():this.scrollToAnchor()||this.scrollToTop(),this.scrolled=!0)},r.prototype.scrollToRestoredPosition=function(){var t,e;return t=null!=(e=this.restorationData)?e.scrollPosition:void 0,null!=t?(this.controller.scrollToPosition(t),!0):void 0},r.prototype.scrollToAnchor=function(){return null!=this.location.anchor?(this.controller.scrollToAnchor(this.location.anchor),!0):void 0},r.prototype.scrollToTop=function(){return this.controller.scrollToPosition({x:0,y:0})},r.prototype.recordTimingMetric=function(t){var e;return null!=(e=this.timingMetrics)[t]?e[t]:e[t]=(new Date).getTime()},r.prototype.getTimingMetrics=function(){return e.copyObject(this.timingMetrics)},n=function(t){switch(t){case\"replace\":return\"replaceHistoryWithLocationAndRestorationIdentifier\";case\"advance\":case\"restore\":return\"pushHistoryWithLocationAndRestorationIdentifier\"}},r.prototype.shouldIssueRequest=function(){return\"restore\"===this.action?!this.hasCachedSnapshot():!0},r.prototype.cacheSnapshot=function(){return this.snapshotCached?void 0:(this.controller.cacheSnapshot(),this.snapshotCached=!0)},r.prototype.render=function(t){return this.cancelRender(),this.frame=requestAnimationFrame(function(e){return function(){return e.frame=null,t.call(e)}}(this))},r.prototype.cancelRender=function(){return this.frame?cancelAnimationFrame(this.frame):void 0},r}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};e.Controller=function(){function r(){this.clickBubbled=t(this.clickBubbled,this),this.clickCaptured=t(this.clickCaptured,this),this.pageLoaded=t(this.pageLoaded,this),this.history=new e.History(this),this.view=new e.View(this),this.scrollManager=new e.ScrollManager(this),this.restorationData={},this.clearCache(),this.setProgressBarDelay(500)}return r.prototype.start=function(){return e.supported&&!this.started?(addEventListener(\"click\",this.clickCaptured,!0),addEventListener(\"DOMContentLoaded\",this.pageLoaded,!1),this.scrollManager.start(),this.startHistory(),this.started=!0,this.enabled=!0):void 0},r.prototype.disable=function(){return this.enabled=!1},r.prototype.stop=function(){return this.started?(removeEventListener(\"click\",this.clickCaptured,!0),removeEventListener(\"DOMContentLoaded\",this.pageLoaded,!1),this.scrollManager.stop(),this.stopHistory(),this.started=!1):void 0},r.prototype.clearCache=function(){return this.cache=new e.SnapshotCache(10)},r.prototype.visit=function(t,r){var n,o;return null==r&&(r={}),t=e.Location.wrap(t),this.applicationAllowsVisitingLocation(t)?this.locationIsVisitable(t)?(n=null!=(o=r.action)?o:\"advance\",this.adapter.visitProposedToLocationWithAction(t,n)):window.location=t:void 0},r.prototype.startVisitToLocationWithAction=function(t,r,n){var o;return e.supported?(o=this.getRestorationDataForIdentifier(n),this.startVisit(t,r,{restorationData:o})):window.location=t},r.prototype.setProgressBarDelay=function(t){return this.progressBarDelay=t},r.prototype.startHistory=function(){return this.location=e.Location.wrap(window.location),this.restorationIdentifier=e.uuid(),this.history.start(),this.history.replace(this.location,this.restorationIdentifier)},r.prototype.stopHistory=function(){return this.history.stop()},r.prototype.pushHistoryWithLocationAndRestorationIdentifier=function(t,r){return this.restorationIdentifier=r,this.location=e.Location.wrap(t),this.history.push(this.location,this.restorationIdentifier)},r.prototype.replaceHistoryWithLocationAndRestorationIdentifier=function(t,r){return this.restorationIdentifier=r,this.location=e.Location.wrap(t),this.history.replace(this.location,this.restorationIdentifier)},r.prototype.historyPoppedToLocationWithRestorationIdentifier=function(t,r){var n;return this.restorationIdentifier=r,this.enabled?(n=this.getRestorationDataForIdentifier(this.restorationIdentifier),this.startVisit(t,\"restore\",{restorationIdentifier:this.restorationIdentifier,restorationData:n,historyChanged:!0}),this.location=e.Location.wrap(t)):this.adapter.pageInvalidated()},r.prototype.getCachedSnapshotForLocation=function(t){var e;return null!=(e=this.cache.get(t))?e.clone():void 0},r.prototype.shouldCacheSnapshot=function(){return this.view.getSnapshot().isCacheable();\n},r.prototype.cacheSnapshot=function(){var t,r;return this.shouldCacheSnapshot()?(this.notifyApplicationBeforeCachingSnapshot(),r=this.view.getSnapshot(),t=this.lastRenderedLocation,e.defer(function(e){return function(){return e.cache.put(t,r.clone())}}(this))):void 0},r.prototype.scrollToAnchor=function(t){var e;return(e=this.view.getElementForAnchor(t))?this.scrollToElement(e):this.scrollToPosition({x:0,y:0})},r.prototype.scrollToElement=function(t){return this.scrollManager.scrollToElement(t)},r.prototype.scrollToPosition=function(t){return this.scrollManager.scrollToPosition(t)},r.prototype.scrollPositionChanged=function(t){var e;return e=this.getCurrentRestorationData(),e.scrollPosition=t},r.prototype.render=function(t,e){return this.view.render(t,e)},r.prototype.viewInvalidated=function(){return this.adapter.pageInvalidated()},r.prototype.viewWillRender=function(t){return this.notifyApplicationBeforeRender(t)},r.prototype.viewRendered=function(){return this.lastRenderedLocation=this.currentVisit.location,this.notifyApplicationAfterRender()},r.prototype.pageLoaded=function(){return this.lastRenderedLocation=this.location,this.notifyApplicationAfterPageLoad()},r.prototype.clickCaptured=function(){return removeEventListener(\"click\",this.clickBubbled,!1),addEventListener(\"click\",this.clickBubbled,!1)},r.prototype.clickBubbled=function(t){var e,r,n;return this.enabled&&this.clickEventIsSignificant(t)&&(r=this.getVisitableLinkForNode(t.target))&&(n=this.getVisitableLocationForLink(r))&&this.applicationAllowsFollowingLinkToLocation(r,n)?(t.preventDefault(),e=this.getActionForLink(r),this.visit(n,{action:e})):void 0},r.prototype.applicationAllowsFollowingLinkToLocation=function(t,e){var r;return r=this.notifyApplicationAfterClickingLinkToLocation(t,e),!r.defaultPrevented},r.prototype.applicationAllowsVisitingLocation=function(t){var e;return e=this.notifyApplicationBeforeVisitingLocation(t),!e.defaultPrevented},r.prototype.notifyApplicationAfterClickingLinkToLocation=function(t,r){return e.dispatch(\"turbolinks:click\",{target:t,data:{url:r.absoluteURL},cancelable:!0})},r.prototype.notifyApplicationBeforeVisitingLocation=function(t){return e.dispatch(\"turbolinks:before-visit\",{data:{url:t.absoluteURL},cancelable:!0})},r.prototype.notifyApplicationAfterVisitingLocation=function(t){return e.dispatch(\"turbolinks:visit\",{data:{url:t.absoluteURL}})},r.prototype.notifyApplicationBeforeCachingSnapshot=function(){return e.dispatch(\"turbolinks:before-cache\")},r.prototype.notifyApplicationBeforeRender=function(t){return e.dispatch(\"turbolinks:before-render\",{data:{newBody:t}})},r.prototype.notifyApplicationAfterRender=function(){return e.dispatch(\"turbolinks:render\")},r.prototype.notifyApplicationAfterPageLoad=function(t){return null==t&&(t={}),e.dispatch(\"turbolinks:load\",{data:{url:this.location.absoluteURL,timing:t}})},r.prototype.startVisit=function(t,e,r){var n;return null!=(n=this.currentVisit)&&n.cancel(),this.currentVisit=this.createVisit(t,e,r),this.currentVisit.start(),this.notifyApplicationAfterVisitingLocation(t)},r.prototype.createVisit=function(t,r,n){var o,i,s,a,u;return i=null!=n?n:{},a=i.restorationIdentifier,s=i.restorationData,o=i.historyChanged,u=new e.Visit(this,t,r),u.restorationIdentifier=null!=a?a:e.uuid(),u.restorationData=e.copyObject(s),u.historyChanged=o,u.referrer=this.location,u},r.prototype.visitCompleted=function(t){return this.notifyApplicationAfterPageLoad(t.getTimingMetrics())},r.prototype.clickEventIsSignificant=function(t){return!(t.defaultPrevented||t.target.isContentEditable||t.which>1||t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)},r.prototype.getVisitableLinkForNode=function(t){return this.nodeIsVisitable(t)?e.closest(t,\"a[href]:not([target]):not([download])\"):void 0},r.prototype.getVisitableLocationForLink=function(t){var r;return r=new e.Location(t.getAttribute(\"href\")),this.locationIsVisitable(r)?r:void 0},r.prototype.getActionForLink=function(t){var e;return null!=(e=t.getAttribute(\"data-turbolinks-action\"))?e:\"advance\"},r.prototype.nodeIsVisitable=function(t){var r;return(r=e.closest(t,\"[data-turbolinks]\"))?\"false\"!==r.getAttribute(\"data-turbolinks\"):!0},r.prototype.locationIsVisitable=function(t){return t.isPrefixedBy(this.view.getRootLocation())&&t.isHTML()},r.prototype.getCurrentRestorationData=function(){return this.getRestorationDataForIdentifier(this.restorationIdentifier)},r.prototype.getRestorationDataForIdentifier=function(t){var e;return null!=(e=this.restorationData)[t]?e[t]:e[t]={}},r}()}.call(this),function(){!function(){var t,e;if((t=e=document.currentScript)&&!e.hasAttribute(\"data-turbolinks-suppress-warning\"))for(;t=t.parentNode;)if(t===document.body)return console.warn(\"You are loading Turbolinks from a <script> element inside the <body> element. This is probably not what you meant to do!\\n\\nLoad your application\\u2019s JavaScript bundle inside the <head> element instead. <script> elements in <body> are evaluated with each page change.\\n\\nFor more information, see: https://github.com/turbolinks/turbolinks#working-with-script-elements\\n\\n\\u2014\\u2014\\nSuppress this warning by adding a `data-turbolinks-suppress-warning` attribute to: %s\",e.outerHTML)}()}.call(this),function(){var t,r,n;e.start=function(){return r()?(null==e.controller&&(e.controller=t()),e.controller.start()):void 0},r=function(){return null==window.Turbolinks&&(window.Turbolinks=e),n()},t=function(){var t;return t=new e.Controller,t.adapter=new e.BrowserAdapter(t),t},n=function(){return window.Turbolinks===e},n()&&e.start()}.call(this)}).call(this),\"object\"==typeof module&&module.exports?module.exports=e:\"function\"==typeof define&&define.amd&&define(e)}).call(this);","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","\nconst { klass, ensure } = require('../../../lib');\n\n// unlink server xbars app, this is for dispatching events only\n// - clients call xbarc directly to push messages to server\nmodule.exports = klass({\n  role: 'app',\n  name: 'xbars',\n\n  init(tree, xbarc) {\n    this.tree = tree;\n    this.xbarc = xbarc;\n    tree.join(this);\n    tree.apps.xbars = this; //TODO: hack\n\n    this._listeners = {};\n    this.updateListeners();\n    xbarc.on('config', function(key, val) {\n      if (key === 'tap') this.updateListeners();\n    }.bind(this));\n  },\n\n  updateListeners: function() {\n    var me = this;\n\n    if (!me._listeners.message) { //TODO: to remove, special case\n      me.xbarc.on('message', me._listeners.message = function(e) {\n        me.tree.root.emitPreOrder('xbars_message' , [e]);\n      });\n    }\n\n    me.xbarc.apps().forEach(function(aname) {\n      if (me._listeners[aname]) return;\n\n      me.xbarc.on(aname, me._listeners[aname] = function(e) {\n        me.tree.root.emitPreOrder(aname + '_' + (e.verb || 'push') , [e]);\n      });\n    });\n  },\n});\n","\nrequire('./scss/custom.scss');\n\nlet minstatic = require('../../lib');\nminstatic.ui = require('../../lib/ui');\n\nlet { ui, Tree, Xbarc } = minstatic;\n\nlet root = Tree.Namespace('apps').instance(null, 'minstatic');\nui.register('root', root);\n\nlet profile = window.PROFILE || {};\nui.register('profile', profile);\n\nif (profile.mode !== 'static') {\n  let ko = require('knockout');\n  ko.bindingHandlers.stopBinding = {\n    init() {\n      return { controlsDescendantBindings: true };\n    }\n  };\n  ko.virtualElements.allowedBindings.stopBinding = true;\n\n  let xbarc = Xbarc.instance({\n    url: 'http://localhost:7003/xbars',\n    fetch: window.fetch.bind(window),\n    eventSource: ui.eventSource,\n    tokenField: '_token',\n  });\n  ui.register('xbarc', xbarc);\n\n  require('../../xbar/xbars/client/xbars-app').instance(root, xbarc);\n}\n\nlet turbolinks = require('turbolinks');\n\n// Monkey patch Turbolinks to render 40x & 500 normally\n// See https://github.com/turbolinks/turbolinks/issues/179\nturbolinks.HttpRequest.prototype.requestLoaded = function() {\n  return this.endRequest(function() {\n    let code = this.xhr.status;\n    if (code >= 200 && code < 300 || code >= 400 && code <= 404 || code === 500) {\n      this.delegate.requestCompletedWithResponse(\n        this.xhr.responseText,\n        this.xhr.getResponseHeader('Turbolinks-Location'));\n    } else {\n      this.failed = true;\n      this.delegate.requestFailedWithStatusCode(code, this.xhr.responseText);\n    }\n  }.bind(this));\n};\n\nlet _curUrl = window.location.pathname;\ndocument.addEventListener('turbolinks:load', function(evt) {\n  updateUrl(window.location.pathname);\n});\n\nfunction updateUrl(url) {\n  let oldUrl = _curUrl;\n  if (!url || oldUrl === url) return;\n\n  _curUrl = url;\n  root.removeChild('page');\n  root.emitPreOrder('url_updated', [url, oldUrl]);\n}\n\nui.setTurbolinks(turbolinks);\nturbolinks.start();\n\n","\nvar content = require(\"!!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/src/index.js??ref--7-3!../../../node_modules/sass-loader/dist/cjs.js!./custom.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/src/index.js??ref--7-3!../../../node_modules/sass-loader/dist/cjs.js!./custom.scss\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/src/index.js??ref--7-3!../../../node_modules/sass-loader/dist/cjs.js!./custom.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","module.exports = ko;"],"sourceRoot":""}